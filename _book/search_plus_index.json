{"./":{"url":"./","title":"ç®€ä»‹","keywords":"","body":"Flutter å…¥é—¨ä¸è¿›é˜¶ "},"books/3.2state.html":{"url":"books/3.2state.html","title":"3.2ï¼šçŠ¶æ€ç®¡ç†","keywords":"","body":"çŠ¶æ€ç®¡ç† 3.2.1 çŠ¶æ€ç®¡ç† ç®€ä»‹ Widgetåˆ†ä¸ºæœ‰çŠ¶æ€å’Œæ— çŠ¶æ€ï¼Œæœ‰çŠ¶æ€çš„åˆ™å°±éœ€è¦æœ‰äººæ¥ç®¡ç†äº†ï¼Œçˆ¶ç»„ä»¶ç®¡ç†å’Œè‡ªå·±ç®¡ç†å„æœ‰ä»€ä¹ˆä¼˜åŠ£å‘¢ï¼Ÿ å¦‚æœçŠ¶æ€æ˜¯ç”¨æˆ·æ•°æ®ï¼Œå¦‚ï¼šå¤é€‰æ¡†ã€æ»‘å—ä½ç½®ã€æœ€å¥½æœ‰çˆ¶ç»„ä»¶ç®¡ç†ã€‚ å¦‚æœçŠ¶æ€æ˜¯æœ‰å…³ç•Œé¢çš„æ•ˆæœï¼Œä¾‹å¦‚é¢œè‰²ã€åŠ¨ç”»ã€æœ€å¥½ç”±è‡ªå·±ç®¡ç†ã€‚ å¦‚æœæŸä¸€ä¸ªçŠ¶æ€æ˜¯ä¸åŒçš„Widgetå…±äº«ï¼Œåˆ™æœ€å¥½æ˜¯çˆ¶ç»„ä»¶ç®¡ç†ã€‚ åœ¨ç»„ä»¶å†…éƒ¨ç®¡ç†ï¼Œå°è£…æ€§å½“ç„¶æ˜¯å¥½ä¸€ç‚¹ï¼Œè€Œç¼ºå°‘äº†çµæ´»æ€§ï¼Œåœ¨çˆ¶ç»„ä»¶ä¸­ç®¡ç†å­ç»„ä»¶çš„çŠ¶æ€ï¼Œåˆ™æ›´çµæ´»ï¼Œè®¾è®¡ç»„ä»¶çš„æ—¶å€™ï¼Œåº”å·²çµæ´»å¤šå˜ä¸ºè¦ç‚¹ï¼Œå¤šä½çˆ¶ç»„ä»¶ç®¡ç†ã€‚ æ¥ä¸‹æ¥æˆ‘ä»¬ç”¨å‡ ä¸ªä¾‹å­åˆ†åˆ«æ¼”ç¤ºè‡ªå·±ç®¡ç†ã€çˆ¶ç®¡ç†ã€å¤šç»„ä»¶ç®¡ç†æ¥è¯´æ˜çŠ¶æ€ç®¡ç†ä¸åŒæ–¹å¼ã€‚ æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç®€å•çš„ä¾‹å­ï¼šä¸€ä¸ªç›’å­ï¼Œæ´»è·ƒçŠ¶æ€æ˜¯çº¢è‰²ï¼Œä¸æ´»è·ƒæ˜¯ç°è‰². è‡ªå·±ç®¡ç†çŠ¶æ€ è‡ªå·±ç®¡ç†çŠ¶æ€ï¼Œå¤–ç•Œæ— éœ€å‚ä¸å³å¯å®Œæˆå®Œæ•´æ­¥éª¤ï¼Œå®Œå…¨å°é—­ã€‚ class TapBox extends StatefulWidget { TapBoxState createState() => TapBoxState(); } class TapBoxState extends State { bool _selected = false; @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar( title: Text('è‡ªå·±ç®¡ç†çŠ¶æ€'), ), body: Center( child: Column( mainAxisAlignment: MainAxisAlignment.center, children: [ Container( color: _selected ? Colors.red : Colors.black12, child: FlatButton( child: Text(_selected ? 'Active' : 'Inactive'), onPressed: _tap, ), ) ], ), ), ); } void _tap() { setState(() { _selected = !_selected; }); } } æ•ˆæœ: çˆ¶ç»„ä»¶ç®¡ç† çˆ¶ç»„ä»¶å¯ä»¥æŒ‡å®šå­ç»„ä»¶çš„çŠ¶æ€ï¼Œå½“æ¡ä»¶å¤æ‚çš„æ—¶å€™ï¼Œæäº¤æ•°æ®åˆ°æœåŠ¡åå°ï¼Œå¤±è´¥äº†ï¼Œè¿™ç§æƒ…å†µå°±ç”¨çˆ¶ç»„ä»¶æ¥ä¼ é€’çŠ¶æ€åˆ°å­ç»„ä»¶ã€‚ /// å°è£…å¥½çš„å­ç»„ä»¶ class TapBox2 extends StatefulWidget { final bool selected; final onChange onchange; TapBox2({Key key, this.selected, this.onchange}) : super(key: key); TapBoxState2 createState() => TapBoxState2(); } typedef onChange = Function(bool); class TapBoxState2 extends State { bool _selected; @override void initState() { _selected = widget.selected == true; super.initState(); } @override Widget build(BuildContext context) { return Container( color: widget.selected == true ? Colors.red : Colors.black12, child: FlatButton( child: Text(widget.selected == true ? 'Active' : 'Inactive'), onPressed: _tap, ), ); } void _tap() { if (widget.onchange != null) { _selected = !_selected; widget.onchange(_selected); } } } /// çˆ¶ç»„ä»¶æ¥ç®¡ç† class TapBox extends StatefulWidget { TapBoxState createState() => TapBoxState(); } class TapBoxState extends State { bool _selected = false; @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar( title: Text('ç®¡ç†çŠ¶æ€'), ), body: Center( child: Column( mainAxisAlignment: MainAxisAlignment.center, children: [ Container( color: _selected ? Colors.red : Colors.black12, child: TapBox2( onchange: (v) { setState(() { _selected = v; }); }, selected: _selected, ), ) ], ), ), ); } } æ•ˆæœï¼š æ··åˆç®¡ç† æœ‰äº›ç»„ä»¶ï¼Œæ··åˆæ–¹å¼æ¯”è¾ƒé€‚ç”¨ï¼Œè¿™ç§æƒ…å†µï¼Œç»„ä»¶è‡ªèº«ç®¡ç†ä¸€éƒ¨åˆ†çŠ¶æ€ï¼Œçˆ¶ç»„ä»¶ç®¡ç†ä¸€äº›å¤–éƒ¨çŠ¶æ€ã€‚ ä¸‹é¢çš„ä¾‹å­æ˜¯ä¸æ´»è·ƒçŠ¶æ€æŒ‰ä¸‹ç›’å­å‘¨å›´æ˜¾ç¤ºçº¢è‰²è¾¹æ¡†ï¼Œæ´»è·ƒçŠ¶æ€æŒ‰ä¸‹æ˜¾ç¤ºè“è‰²è¾¹æ¡†ï¼ŒæŠ¬èµ·æ—¶è¾¹æ¡†æ¶ˆå¤±ï¼Œç‚¹å‡»å®Œæˆåï¼ŒçŠ¶æ€è¿›è¡Œæ”¹å˜ã€‚æ´»è·ƒçŠ¶æ€ç”±å¤–éƒ¨ç®¡ç†,è¾¹æ¡†å˜åŒ–æœ‰å†…éƒ¨ç®¡ç†ã€‚ class TapBox3 extends StatefulWidget { final bool selected; final onChange onchange; TapBox3({Key key, this.selected, this.onchange}) : super(key: key); TapBoxState3 createState() => TapBoxState3(); } class TapBoxState3 extends State { bool _touching = false; @override void initState() { super.initState(); } @override Widget build(BuildContext context) { return Container( child: GestureDetector( child: Container( height: 50, width: 120, alignment: Alignment.center, child: Text(widget.selected == true ? 'Active' : 'Inactive'), decoration: new BoxDecoration( color: widget.selected == true ? Colors.red : Colors.black12, border: _touching ? Border.all( color: widget.selected == false ? Colors.red : Colors.blue, width: 4) : null), ), onTap: _tap, onTapDown: (TapDownDetails details) { _touchStart(); }, onTapUp: (detail) { _touchend(); }, ), ); } void _tap() { if (widget.onchange != null) { widget.onchange(!widget.selected); } } void _touchStart() { setState(() { _touching = true; }); } void _touchend() { setState(() { _touching = false; }); } } /// çˆ¶ç»„ä»¶ç®¡ç†æ´»è·ƒçŠ¶æ€ Container( color: _selected ? Colors.red : Colors.black12, child: TapBox3( onchange: (v) { setState(() { _selected = v; }); }, selected: _selected, ), ) æ•ˆæœï¼š 3.2.2 å…¨å±€çŠ¶æ€ç®¡ç† å½“è·¨é¡µé¢çŠ¶æ€ç®¡ç†çš„æ—¶å€™ï¼Œä¸Šé¢çš„æƒ…å†µå·²ç»ä¸é€‚ç”¨ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨eventBusæ¥è¿›è¡Œæ•°æ®ä¼ é€’ï¼Œæˆ–è€…ä½¿ç”¨Providerè¿›è¡Œæ•°æ®ç®¡ç†å’Œé¡µé¢åˆ·æ–°ã€‚ è‡ªå·±ç®¡ç†æˆ–è€…çˆ¶çº§ç®¡ç†æœ¬è´¨æ˜¯å¯ä»¥è°ƒç”¨Stateçš„setState((){})è¿›è¡ŒWidgetçš„buildå‡½æ•°ï¼Œå½“è¿™äº›ç»„ä»¶ä¸åœ¨ä¸€ä¸ªé¡µé¢ï¼Œåˆ™æ— æ³•è¿›è¡Œç›´æ¥é€šä¿¡ï¼Œè¿™æ—¶æˆ‘ä»¬æœ‰2ä¸­æ–¹æ³•è§£å†³ã€‚ å®ç°ä¸€ä¸ªå…¨å±€çš„æ—¶é—´æ€»çº¿ï¼Œå°†çŠ¶æ€å¯¹åº”ä¸€ä¸ªäº‹ä»¶ï¼Œç„¶ååœ¨å¯¹åº”çš„Widgetè¿›è¡Œåˆ·æ–°ã€‚ ä½¿ç”¨ä¸“é—¨ç®¡ç†çŠ¶æ€çš„åŒ…ï¼Œå¦‚Providerã€Reduxï¼Œè¯¦ç»†ç”¨æ³•è§pub åœ¨åç»­ç« èŠ‚ä¸­ä¼šä»‹ç»çŠ¶æ€ç®¡ç†çš„æœºåˆ¶åŸç†ï¼Œå†æ¬¡ä¸åšç´¯è¿°ã€‚ "},"books/3.3textandstyle.html":{"url":"books/3.3textandstyle.html","title":"3.3ï¼šæ–‡æœ¬å’Œæ ·å¼","keywords":"","body":"æ–‡æœ¬å’Œæ ·å¼ 3.1 Text and TextStyle textç”¨äºæ˜¾ç¤ºç®€å•çš„æ–‡å­—å’Œæ ·å¼ï¼Œä¸‹é¢çœ‹ä¸‹ç®€å•çš„ä¾‹å­ Text('text HelloWord', textAlign: TextAlign.left,) Text( 'åŠ äº†styleçš„æ–‡æœ¬', style: TextStyle( color: Colors.red, fontSize: 30, height: 1.4, background: new Paint()..color = Colors.black12, decoration: TextDecoration.underline, decorationColor: Colors.blue, decorationStyle: TextDecorationStyle.wavy), ) æ•ˆæœå¦‚ä¸‹ï¼š ä¸€ä¸ªæ˜¯ç®€å•çš„æ–‡æœ¬æ˜¾ç¤ºï¼Œå±æ€§ textAlign:TextAlign.left å¥½åƒæ²¡èµ·ä½œç”¨ï¼ŒåŸå› æ˜¯æ–‡æœ¬æ²¡è¶…è¿‡ä¸€è¡Œï¼Œæ²¡æ•ˆæœã€‚ åº•éƒ¨æ³¢çº¹ä»£ç å¦‚ä¸‹ï¼š decoration: TextDecoration.underline, decorationColor: Colors.blue, decorationStyle: TextDecorationStyle.wavy è¿™ä¸‰è¡Œçš„æ ·å¼æ˜¯åœ¨åº•éƒ¨æ·»åŠ äº†æ³¢çº¹çº¿ï¼ŒSDKä¸€å…±ç»™äº†4ä¸­çº¿çš„æ ·å¼ï¼Œ enum TextDecorationStyle { /// Draw a solid line solid, /// Draw two lines double, /// Draw a dotted line dotted, /// Draw a dashed line dashed, /// Draw a sinusoidal line wavy } æ•ˆæœå¦‚ä¸‹ï¼š å–œæ¬¢å“ªä¸€ä¸ªéšæ„æŒ‘é€‰å“¦ã€‚ å½“æ–‡æœ¬è¶…è¿‡ä¸€è¡Œçš„è¯å¯ä»¥æˆªæ–­æˆ–è€…æ¢è¡Œ ç”¨åˆ°äº†å±æ€§TextOverflow Text( 'TextOverflow.visible' * 10, textAlign: TextAlign.left, maxLines: 1, overflow: TextOverflow.visible, ) å®˜æ–¹æä¾›äº†å››ç§æ–¹å¼ï¼Œåœ¨è®¾ç½®maxLines=2æ•ˆæœå¦‚ä¸‹ é»˜è®¤maxLinesæ˜¯æ— é™çš„ï¼Œè‡ªåŠ¨æ¢è¡Œçš„ã€‚å¦‚æœè®¾ç½®å›ºå®šè¡Œæ•°ï¼Œåˆ™æ–‡æœ¬æœ€å¤šä¸è¶…è¿‡è¯¥è¡Œæ•°ï¼Œè¶…è¿‡è¯¥è¡Œæ•°åˆ™è¢«æˆªæ–­ï¼Œæˆªæ–­æ–¹å¼å¦‚ä¸Šå›¾æ‰€ç¤ºã€‚ç³»ç»Ÿè¿˜æä¾›äº†æ–‡å­—é—´éš”wordSpacingå’Œå­—ç¬¦é—´éš”letterSpacingï¼Œå­—ä½“æ”¾å¤§å€æ•°textScaleFactor,å¦‚æœä¸è®¾ç½® ï¼Œä¼š MediaQueryData.textScaleFactorè·å–ï¼Œé»˜è®¤æ˜¯1.0ã€‚ 3.2. TextSpan é¦–å…ˆçœ‹ä¸€ä¸ªç®€å•ä¾‹å­ï¼š TextSpan( text: 'Jok Ma,hello!', style: TextStyle( fontSize: 20, ), children: [ TextSpan( text: 'Bo', style: TextStyle( fontSize: 20, color: Colors.blue, backgroundColor: Colors.black12)), TextSpan( text: 'b,hello!', style: TextStyle( fontSize: 30, color: Colors.red, backgroundColor: Colors.lightGreenAccent)), TextSpan( text: 'two line', style: TextStyle( fontSize: 30, color: Colors.red, backgroundColor: Colors.lightGreenAccent, decoration: TextDecoration.underline, decorationColor: Colors.blue, decorationStyle: TextDecorationStyle.double)), TextSpan( text: '\\nç‚¹å‡»æ‰“å¼€æˆ‘ ğŸ–±http://www.fgyong.cn', style: TextStyle(fontSize: 20, height: 2), recognizer: new TapGestureRecognizer()..onTap = () { _openUrl('http://www.fgyong.cn'); }, ), ]), ), //æ˜¯å¦æ‰“å¼€url void _openUrl(String url) async { if (await canLaunch(url)) { await launch(url); } else { throw 'could not launch $url'; } } æ•ˆæœå¦‚ä¸‹ï¼š è¿™é‡Œä½¿ç”¨äº†TextSpanç»„ä»¶ï¼Œå’ŒTextç±»ä¼¼çš„éƒ½æœ‰styleï¼Œè¿™ä¸€ç‚¹å®Œå…¨ä¸€è‡´ï¼Œä¸åŒçš„æ˜¯TextSpanå¯ä»¥æ·»åŠ children,è¿™æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥è¿ç»­æ·»åŠ å¾ˆå¤šTextSpan,æ¯ä¸ªéƒ½å¯ä»¥å•ç‹¬è®¾ç½®æ ·å¼ï¼Œæ¯”å¦‚ä¸€ä¸ªæ‰‹æœºå·ï¼Œä¸€ä¸ªç½‘å€ï¼Œã€‚ã€‚å¯ä»¥é€šè¿‡recognizer: new TapGestureRecognizer()..onTap = _openUrlæ¥å®ç°ç‚¹å‡»æ–‡æœ¬è·³è½¬_openUrlå‡½æ•°ï¼Œè¿™ç»™æ–‡æœ¬å¸¦æ¥äº†æ›´å¤šçš„å¯èƒ½æ€§ã€‚ heightå±æ€§æ˜¯è®¡ç®—æ–¹å¼æ˜¯fontSize * heightï¼Œé»˜è®¤æ˜¯1.0ï¼Œè®¾ç½®å­—ä½“å¤§å°è¿˜æœ‰ä¸€ä¸ªå±æ€§æ˜¯textScaleFactorï¼Œè¿™ä¸ªæ˜¯è®¡ç®—æ–¹å¼æ˜¯fontSize * textScaleFactor,é»˜è®¤æ˜¯1.0. fontSizeå­—ä½“å…·ä½“çš„å¤§å° height è¡Œé«˜ textScaleFactorï¼Œæœ¬è´¨æ˜¯fontSize * textScaleFactor,é»˜è®¤æ˜¯1.0 * fontSize 3.3 DefaultTextStyle å¯ä»¥è¢«ç»§æ‰¿çš„TextStyle,å½“ä¸€ä¸ªå­æ ‘åŸºæœ¬æ ·å¼ç±»ä¼¼ï¼Œå¯ä»¥ä½¿ç”¨DefaultTextStyle DefaultTextStyle( //1.è®¾ç½®æ–‡æœ¬é»˜è®¤æ ·å¼ style: TextStyle( color: Colors.blue, fontSize: 30.0, ), textAlign: TextAlign.start, child: Column( crossAxisAlignment: CrossAxisAlignment.start, children: [ Text(\"Jack Ma\"), Text(\"I am Ok\"), Text( \"I am Jack\", style: TextStyle( inherit: false, //2.ä¸ç»§æ‰¿é»˜è®¤æ ·å¼ color: Colors.grey), ), ], ), ) æ•ˆæœå¦‚ä¸‹ï¼š è¿™é‡Œè¾¹é»˜è®¤æ ·å¼æ˜¯å­—ä½“å¤§å°30(é€»è¾‘åƒç´ ),ç„¶åé€šè¿‡DefaultTextStyleè®¾ç½®å­æ ‘çš„æ ·å¼ï¼Œè¿™æ ·å­æ‰€æœ‰å­æ ‘ä¸­çš„æ ·å¼éƒ½éµä»è¯¥æ ·å¼ï¼Œå¯ä»¥é€šè¿‡inherit: falseæ˜¾ç¤ºæŒ‡å®šä¸ç»§æ‰¿è¯¥æ ·å¼ã€‚ 3.3.4 å­—ä½“ å½“å¼€å‘äººå‘˜æƒ³ä½¿ç”¨è‡ªå®šä¹‰(éé»˜è®¤)å­—ä½“,å¯ä»¥å»Googleä¸‹è½½ï¼Œåˆ™å¯ä»¥é€šè¿‡pubspec.ymlä¸­å£°æ˜ä»–ï¼Œç„¶åå°†å­—ä½“ç§»åŠ¨åˆ°ç›®å½•ä¸‹fontsä¸‹ï¼š ç„¶ååœ¨pubspec.ymlçš„å£°æ˜å¦‚ä¸‹ï¼š fonts: - family: Merriweather fonts: - asset: fonts/Merriweather-Black.ttf - asset: fonts/Merriweather-Light.ttf weight: 700 è¿™æ ·å­å°±å¯ä»¥åœ¨textStyleä¸­ä½¿ç”¨äº† TextStyle(fontFamily: 'Merriweather',) æˆ–è€…åœ¨ä¸»é¢˜ä¸­ç›´æ¥å£°æ˜é»˜è®¤çš„å­—ä½“ ThemeData( primarySwatch: Colors.blue, visualDensity: VisualDensity.adaptivePlatformDensity, fontFamily: 'Merriweather') æ›´å¤šå­—ä½“è®¾ç½®è§å®˜ç½‘ å¦‚æœæƒ³çœäº‹å¯ä»¥ä½¿ç”¨google_fonts. "},"books/3.4button.html":{"url":"books/3.4button.html","title":"3.4ï¼šæŒ‰é’®","keywords":"","body":"3.4 æŒ‰é’® 3.4.1 Materialç»„ä»¶åº“çš„æŒ‰é’® Material ç»„ä»¶åº“ä¸­æä¾›äº†å¤šç§æŒ‰é’®ç»„ä»¶å¦‚RaisedButtonã€FlatButtonã€OutlineButtonç­‰ï¼Œå®ƒä»¬éƒ½æ˜¯ç›´æ¥æˆ–é—´æ¥å¯¹RawMaterialButtonç»„ä»¶çš„åŒ…è£…å®šåˆ¶ï¼Œæ‰€ä»¥ä»–ä»¬å¤§å¤šæ•°å±æ€§éƒ½å’ŒRawMaterialButtonä¸€æ ·ã€‚è€ŒRawMaterialButtonæ˜¯å¯¹InkWellçš„å°è£…ï¼Œæ¶Ÿæ¼ªæ•ˆæœä¹Ÿæ˜¯è¯¥ç»„ä»¶å®ç°ï¼Œå¦‚æœæƒ³è‡ªå·±å°è£…æ¶Ÿæ¼ªç»„ä»¶ï¼Œç»§æ‰¿è¯¥ç»„ä»¶å³å¯ã€‚åœ¨ä»‹ç»å„ä¸ªæŒ‰é’®æ—¶æˆ‘ä»¬å…ˆä»‹ç»å…¶é»˜è®¤å¤–è§‚ï¼Œè€ŒæŒ‰é’®çš„å¤–è§‚å¤§éƒ½å¯ä»¥é€šè¿‡å±æ€§æ¥è‡ªå®šä¹‰ï¼Œæˆ‘ä»¬åœ¨åé¢ç»Ÿä¸€ä»‹ç»è¿™äº›å±æ€§ã€‚å¦å¤–ï¼Œæ‰€æœ‰Material åº“ä¸­çš„æŒ‰é’®éƒ½æœ‰å¦‚ä¸‹ç›¸åŒç‚¹ï¼š æŒ‰ä¸‹æ—¶éƒ½ä¼šæœ‰â€œæ°´æ³¢åŠ¨ç”»â€ï¼ˆåˆç§°â€œæ¶Ÿæ¼ªåŠ¨ç”»â€ï¼Œå°±æ˜¯ç‚¹å‡»æ—¶æŒ‰é’®ä¸Šä¼šå‡ºç°æ³¢çº¹çš„åŠ¨ç”»ï¼‰ã€‚ æœ‰ä¸€ä¸ªonPressedå±æ€§æ¥è®¾ç½®ç‚¹å‡»å›è°ƒï¼Œå½“æŒ‰é’®æŒ‰ä¸‹æ—¶ä¼šæ‰§è¡Œè¯¥å›è°ƒï¼Œå¦‚æœä¸æä¾›è¯¥å›è°ƒåˆ™æŒ‰é’®ä¼šå¤„äºç¦ç”¨çŠ¶æ€ï¼Œç¦ç”¨çŠ¶æ€ä¸å“åº”ç”¨æˆ·ç‚¹å‡»ã€‚ FlatButton FlatButtonæ˜¯ä¸€ä¸ªæ‰å¹³æŒ‰é’®ï¼Œåœ¨é»˜è®¤èƒŒæ™¯é€æ˜æ— é˜´å½±ï¼ŒæŒ‰ä¸‹åæœ‰æ·±è‰²èƒŒæ™¯ï¼Œå¦‚å›¾ï¼š ä½¿ç”¨èµ·æ¥å¾ˆç®€å•ï¼š FlatButton( child: Text('nomal'), onPressed: () {},), RaisedButton RaisedButtonæ˜¯æ¼‚æµ®æŒ‰é’®ï¼Œé»˜è®¤å¸¦æœ‰èƒŒæ™¯å’Œé˜´å½±ï¼Œæ´»è·ƒçŠ¶æ€æŒ‰é’®èƒŒæ™¯å˜å¤§ï¼Œå¦‚å›¾æ‰€ç¤º IconButton IconButtoné»˜è®¤æ˜¯iconä½œä¸ºwidgetï¼ŒèƒŒæ™¯é€æ˜ï¼ŒæŒ‰å‹çŠ¶æ€ä¸‹ï¼Œæ³¢çº¹çŠ¶ï¼ŒèƒŒæ™¯å˜å¤§ã€‚å¦‚å›¾æ‰€ç¤º FloatingActionButton FloatingActionButtonå³æ˜¯æ‚¬æµ®æŒ‰é’®ï¼Œé»˜è®¤èƒŒæ™¯æ˜¯ä¸»é¢˜è‰²ï¼ŒæŒ‰å‹ä¹Ÿä¼šæœ‰æ³¢çº¹ã€‚å³è¾¹æ˜¯æŒ‰å‹ï¼Œå·¦è¾¹æ˜¯æ­£å¸¸çŠ¶æ€ã€‚ ä½¿ç”¨ä¾‹å­ï¼š FloatingActionButton(child: Icon(Icons.add), onPressed: () {}, ) BackButton CloseButton å®˜æ–¹å°è£…å¥½çš„è¿”å›å’Œå…³é—­æŒ‰é’®,å¦‚å›¾ï¼š ä½¿ç”¨ä¾‹å­: BackButton(onPressed: () {},), CloseButton(onPressed: () {},), OutlineButton OutlineButtonå¸¦è¾¹æ¡†çš„æŒ‰é’®ï¼Œé»˜è®¤æœ‰ç°è‰²è¾¹æ¡†ï¼ŒæŒ‰å‹ä¸‹è¾¹æ¡†é«˜äº®ï¼Œå¯ä»¥åŒæ—¶å…¼å¤‡iconå’Œlabel,å¦‚å›¾ï¼š ä½¿ç”¨ä¹Ÿå¾ˆç®€å•ï¼š OutlineButton( child: Text('OutlineButton'), onPressed: () {}, ), SizedBox( width: 10, ), OutlineButton.icon( icon: Icon(Icons.add), label: Text('label'), onPressed: () {}, ), SizedBox( width: 10, ), OutlineButton.icon( icon: Icon(Icons.add), label: Text('active'), onPressed: () {}, ) è‡ªå®šä¹‰æŒ‰é’®å¤–è§‚ å¤–è§‚å¯ä»¥é€šè¿‡å±æ€§æ¥å®šä¹‰ï¼Œä¸åŒæŒ‰é’®åŸºæœ¬ä¸€æ ·ï¼Œæˆ‘ä»¬ä»¥IconButtonä¸ºä¾‹å­ï¼Œä»‹ç»ä¸€ä¸‹å¸¸ç”¨å±æ€§ï¼Œè¯¦ç»†çš„å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚ textColor : æ–‡æœ¬å’Œiconçš„é¢œè‰² disabledBorderColor: ä¸ç‚¹å‡»çŠ¶æ€ä¸‹çš„è¾¹æ¡†é¢œè‰² highlightedBorderColorï¼š ç‚¹å‡»çŠ¶æ€ä¸‹è¾¹æ¡†é¢œè‰² splashColor:æ³¢çº¹é¢œè‰² borderSideï¼šè¾¹æ¡†å®½åº¦å’Œé¢œè‰² ç¤ºä¾‹ï¼š ä»£ç å¦‚ä¸‹ï¼š OutlineButton.icon( onPressed: () {}, icon: Icon(Icons.add), label: Text('diy style'), color: Colors.black12, textColor: Colors.blue, disabledBorderColor: Colors.black, highlightedBorderColor: Colors.greenAccent, splashColor: Colors.red ) å¦‚ä½•è‡ªå·±å®ç°ä¸€ä¸ªButton,åœ¨åç»­ç« èŠ‚ä¸­ä¼šå†æ¬¡è¯¦ç»†è®²åˆ°ï¼Œåœ¨æ­¤ä¸è¿‡å¤šç´¯è¿°ã€‚ "},"books/3.5img.html":{"url":"books/3.5img.html","title":"3.5ï¼šå›¾ç‰‡å’ŒIcon","keywords":"","body":"3.5 å›¾ç‰‡åŠIcon 3.5.1 å›¾ç‰‡ Flutterä¸­ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡imageåŠ è½½å¹¶æ˜¾ç¤ºå›¾ç‰‡ï¼Œæ•°æ®æºå¯ä»¥æ˜¯assetã€fileã€å†…å­˜ã€ç½‘ç»œã€‚ Image imageWidgetæœ‰ä¸€ä¸ªå¿…é€‰çš„å‚æ•°ï¼Œå¯¹åº”äº†ä¸€ä¸ªImageProvider,ä¸‹è¾¹æˆ‘ä»¬æ¥æ¼”ç¤ºä¸€ä¸‹imageçš„ä½¿ç”¨ã€‚ ä»assetsåŠ è½½ é¦–å…ˆå°†æ–‡ä»¶å¤åˆ¶åˆ°å·¥ç¨‹æŒ‡å®šæ–‡ä»¶å¤¹å†…ï¼Œæˆ‘ä»¬ç§»åŠ¨è‡³imgæ–‡ä»¶å¤¹ä¸‹ï¼Œ ç„¶ååœ¨pubpspec.yamlå†…å£°æ˜ assets: - img/1.jpeg ç„¶åè¿è¡Œflutter pub get,(æˆ–è€… android studio ä¸­ç¼–è¾‘ pubpspec.yamlç‚¹å‡»å³ä¸Šè§’pub getæŒ‰é’®)ã€‚ ç„¶åä»£ç ä¸­å¯ä»¥ä½¿ç”¨äº†ï¼Œå®ä¾‹: Image.asset('img/1.jpeg') æ•ˆæœå¦‚å›¾æ‰€ç¤ºï¼š ä»ç½‘ç»œåŠ è½½ Image( image: NetworkImage( \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1593336370404&di=c03084a66d06c1af8995088158e907c3&imgtype=0&src=http%3A%2F%2Fdmimg.5054399.com%2Fallimg%2Fpkm%2Fpk%2F13.jpg\"), width: 100.0, ) æˆ–è€…ä½¿ç”¨å¿«æ·çš„æ„é€ å‡½æ•°Image.networkç”¨äºä»ç½‘ç»œåŠ è½½ã€æ˜¾ç¤ºå›¾ç‰‡ Image.network( \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1593336370404&di=c03084a66d06c1af8995088158e907c3&imgtype=0&src=http%3A%2F%2Fdmimg.5054399.com%2Fallimg%2Fpkm%2Fpk%2F13.jpg\", width: 120, ), å‚æ•° Imageåœ¨æ˜¾ç¤ºå›¾ç‰‡æ˜¯å®šä¹‰äº†ä¸€ç³»åˆ—å‚æ•°ï¼Œé€šè¿‡å®šä¹‰ä¸€ç³»åˆ—å‚æ•°è¾¾åˆ°æ”¹å˜å›¾ç‰‡å¤–è§‚ã€å¤§å°ã€æ··åˆæ•ˆæœç­‰ï¼Œæˆ‘ä»¬çœ‹ä¸‹Imageçš„ä¸»è¦å‚æ•°ï¼š const Image({ ... this.width, //å›¾ç‰‡çš„å®½ this.height, //å›¾ç‰‡é«˜åº¦ this.color, //å›¾ç‰‡çš„æ··åˆè‰²å€¼ this.colorBlendMode, //æ··åˆæ¨¡å¼ this.fit,//ç¼©æ”¾æ¨¡å¼ this.alignment = Alignment.center, //å¯¹é½æ–¹å¼ this.repeat = ImageRepeat.noRepeat, //é‡å¤æ–¹å¼ ... }) widthã€height ï¼šç”¨æˆ·è®¾ç½®å›¾ç‰‡å¤§å°ï¼Œå½“ä¸æŒ‡å®šå¤§å°ï¼Œå›¾ç‰‡åˆ™åœ¨å¯Œå®¹å™¨å†…è¿›è¡Œå æ»¡ï¼Œå½“è®¾ç½®widthæˆ–heightæ—¶ï¼Œå¦å¤–ä¸€ä¸ªä¼šæŒ‰ç…§æ¯”ä¾‹ç¼©æ”¾ï¼Œä½†å¯ä»¥é€šè¿‡fitæ¥æŒ‡å®šç¼©æ”¾è§„åˆ™ã€‚ fit:æŒ‡å®šå›¾ç‰‡åœ¨å®¹å™¨å†…çš„ç¼©æ”¾è§„åˆ™ã€‚æœ‰å¦‚ä¸‹å‡ ä¸ªå€¼ fill:ä¼šæ‹‰ä¼¸é“ºæ»¡ï¼Œå›¾ç‰‡ä¼šå˜å½¢ cover: æŒ‰ç…§å›¾ç‰‡çš„é•¿å®½æ”¾å¤§åå¡«æ»¡å®¹å™¨ï¼Œä¸ä¼šå˜å½¢ã€‚ fitWidth: å›¾ç‰‡ä¼šéšç€ç¼©æ”¾åˆ°æ˜¾ç¤ºçš„å®½åº¦ï¼Œåœ¨ä¿è¯ä¸å˜å½¢çš„æ¡ä»¶ä¸‹è¿›è¡Œé€‚åº”å®½åº¦,è¶…å‡ºéƒ¨åˆ†ä¼šè£å‰ªã€‚ fitHeight:å›¾ç‰‡é«˜åº¦ä¼šæŒ‰ç…§ç­‰æ¯”ä¾‹ç¼©æ”¾åˆ°é€‚åº”é«˜åº¦ï¼Œè¶…å‡ºéƒ¨åˆ†ä¼šè£å‰ªã€‚ none: æ— é€‚åº”è§„åˆ™ï¼Œä¼šæ˜¾ç¤ºå½“å‰å®¹å™¨çš„å¤§å°ï¼Œå¦‚æœå›¾ç‰‡è¿‡å¤§ï¼Œåˆ™åªä¼šæ˜¾ç¤ºä¸­é—´éƒ¨åˆ†ã€‚ çœ‹å›¾ï¼Œç®€å•æ˜äº†ï¼š coloræŒ‡å®šæ··åˆé¢œè‰²ï¼ŒcolorBlendModeæŒ‡å®šæ··åˆæ¨¡å¼ã€‚ ä¾‹å­ï¼š Image( image: NetworkImage( \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1593336370404&di=c03084a66d06c1af8995088158e907c3&imgtype=0&src=http%3A%2F%2Fdmimg.5054399.com%2Fallimg%2Fpkm%2Fpk%2F13.jpg\"), width: 100.0, color: Colors.greenAccent, colorBlendMode: BlendMode.colorBurn, ) æ•ˆæœï¼š repeatæ˜¯å½“å›¾ç‰‡ä¸å¤Ÿå®¹å™¨å¤§å°å¯ä»¥è®¾ç½®æ²¿ç€Xæˆ–è€…Yè¿›è¡Œé‡å¤é“ºã€‚ Image( image: NetworkImage( \"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1593336370404&di=c03084a66d06c1af8995088158e907c3&imgtype=0&src=http%3A%2F%2Fdmimg.5054399.com%2Fallimg%2Fpkm%2Fpk%2F13.jpg\"), width: 100.0, height: 200, color: Colors.greenAccent, colorBlendMode: BlendMode.colorBurn, repeat: ImageRepeat.repeat, ) æ•ˆæœï¼š Image ä»ç½‘ç»œä¸‹è½½åŠ¨ç”» Imageä»ç½‘ç»œä¸‹è½½ä¼šä¸çŸ­æš‚çš„ ç©ºç™½æ—¶é—´ï¼Œè¿™æ˜¯æˆ‘ä»¬ä¸æƒ³çœ‹åˆ°çš„ï¼Œæˆ‘ä»¬å¯ä»¥åœ¨åŠ è½½çš„æ—¶å€™æ˜¾ç¤ºèŠèŠ±è½¬ã€‚ Image( image: NetworkImage( \"https://ss2.bdstatic.com/70cFvnSh_Q1YnxGkpoWK1HF6hhy/it/u=2053400745,529716701&fm=26&gp=0.jpg\"), width: 100.0, height: 200, loadingBuilder: ( BuildContext context, Widget child, ImageChunkEvent loadingProgress, ) { if (loadingProgress == null) { return child; } return CircularProgressIndicator(); }, ) æ•ˆæœå¦‚å›¾æ‰€ç¤ºï¼š 3.5.2 Icon flutterä¸­å¯ä»¥ä½¿ç”¨iconFontï¼Œå°±æ˜¯å°†å›¾æ ‡åšæˆæ–‡ä»¶ï¼Œé€šè¿‡æŒ‡å®šå­—ç¬¦åŠ è½½ä¸åŒicon. å­—ä½“æ–‡ä»¶ä¸­ï¼Œæ¯ä¸€ä¸ªå­—ç¬¦éƒ½å¯¹åº”ä¸€ä¸ªä½ç ï¼Œä¸åŒå­—ä½“å°±æ˜¯å­—å½¢ä¸åŒï¼Œå³å­—ç¬¦å¯¹åº”çš„å­—å½¢ä¸åŒï¼Œæœ€ç»ˆæ¸²æŸ“çš„ä¸åŒçš„å›¾æ ‡ã€‚ Flutteré»˜è®¤åŒ…å«äº†ä¸€å¥—Material Designçš„å­—ä½“å›¾æ ‡ï¼Œåœ¨pubspec.yamlæ–‡ä»¶ä¸­çš„é…ç½®å¦‚ä¸‹ uses-material-design: true Material Designæ‰€æœ‰å›¾æ ‡å¯ä»¥åœ¨å…¶å®˜ç½‘æŸ¥çœ‹. ä¾‹å­ï¼š Text('\\uE915 \\uE002 \\uE900', style: TextStyle( fontFamily: \"MaterialIcons\", fontSize: 24.0, color: Colors.green)) æ•ˆæœï¼š å¯¹ç€code æ‰¾å›¾æ ‡æ˜æ˜¾ä¸æ˜¯å¤ªäººæ€§åŒ–ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨cupertino_icons Icon( Icons.clear, color: Colors.red, ), Icon( Icons.add, color: Colors.greenAccent, ), Icon( Icons.collections, color: Colors.blue, ), Icon( Icons.extension, color: Colors.orange, ) ä½¿ç”¨è‡ªå®šä¹‰å­—ä½“å›¾æ ‡ æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰å­—ä½“å›¾æ ‡ã€‚iconfont.cnä¸Šæœ‰å¾ˆå¤šå­—ä½“å›¾æ ‡ç´ æï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©è‡ªå·±éœ€è¦çš„å›¾æ ‡æ‰“åŒ…ä¸‹è½½åï¼Œä¼šç”Ÿæˆä¸€äº›ä¸åŒæ ¼å¼çš„å­—ä½“æ–‡ä»¶ï¼Œåœ¨Flutterä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ttfæ ¼å¼å³å¯ã€‚ å‡è®¾æˆ‘ä»¬é¡¹ç›®ä¸­éœ€è¦ä½¿ç”¨ä¸€ä¸ªä¹¦ç±å›¾æ ‡å’Œå¾®ä¿¡å›¾æ ‡ï¼Œæˆ‘ä»¬æ‰“åŒ…ä¸‹è½½åå¯¼å…¥ï¼š å¯¼å…¥å­—ä½“å›¾æ ‡æ–‡ä»¶ï¼›è¿™ä¸€æ­¥å’Œå¯¼å…¥å­—ä½“æ–‡ä»¶ç›¸åŒï¼Œå‡è®¾æˆ‘ä»¬çš„å­—ä½“å›¾æ ‡æ–‡ä»¶ä¿å­˜åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹ï¼Œè·¯å¾„ä¸º\"fonts/iconfont.ttf\"ï¼š fonts: - family: myIcon #æŒ‡å®šä¸€ä¸ªå­—ä½“å fonts: - asset: fonts/iconfont.ttf ä¸ºäº†ä½¿ç”¨æ–¹ä¾¿ï¼Œæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªMyIconsç±»ï¼ŒåŠŸèƒ½å’ŒIconsç±»ä¸€æ ·ï¼šå°†å­—ä½“æ–‡ä»¶ä¸­çš„æ‰€æœ‰å›¾æ ‡éƒ½å®šä¹‰æˆé™æ€å˜é‡ï¼š class MyIcons{ // book å›¾æ ‡ static const IconData book = const IconData( 0xe614, fontFamily: 'myIcon', matchTextDirection: true ); // å¾®ä¿¡å›¾æ ‡ static const IconData wechat = const IconData( 0xec7d, fontFamily: 'myIcon', matchTextDirection: true ); } ä½¿ç”¨ Row( mainAxisAlignment: MainAxisAlignment.center, children: [ Icon(MyIcons.book,color: Colors.purple,), Icon(MyIcons.wechat,color: Colors.green,), ], ) è¿è¡Œåæ•ˆæœå¦‚å›¾3-22æ‰€ç¤ºï¼š "},"books/3.6sw.html":{"url":"books/3.6sw.html","title":"3.6ï¼šå•é€‰å’Œå¤é€‰çŸ¿","keywords":"","body":"3.6 å•é€‰å’Œå¤é€‰ 3.6.1 å•é€‰å’Œå¤é€‰ å•é€‰å’Œå¤é€‰å¾ˆç®€å•ï¼Œåªéœ€è¦ä¸€ä¸ªvalueå’Œä¸€ä¸ªå±æ€§æ¥ç»´æŠ¤æ¯ä¸ªé€‰æ‹©æ¡†çš„valueå³å¯ã€‚ class BaseSwitch extends StatefulWidget { @override State createState() { return BaseSwitchState(); } } class BaseSwitchState extends State { @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar( title: Text('å¼¹æ¡†'), ), body: Container( margin: EdgeInsets.all(30), child: _body(), ), ); } bool _state1 = false, _state2 = true, _s3 = true, _s4 = false; Widget _body() { Widget w = Column( children: [ Container( height: 30, child: Text('CupertinoSwitchState:$_state1'), ), CupertinoSwitch( value: _state1, onChanged: (v) { setState(() { _state1 = v; }); }, ), Container( height: 30, child: Text('SwitchStates:$_state2'), ), Switch( value: _state2, onChanged: (v) { setState(() { _state2 = v; }); }, ), Container( height: 30, child: Text('Checkbox'), ), Row( mainAxisAlignment: MainAxisAlignment.center, children: [ Checkbox( value: _s3, onChanged: (v) { setState(() { _s3 = v; }); }, ), Checkbox( value: _s4, onChanged: (v) { setState(() { _s4 = v; }); }, ) ], ) ], ); return w; } } æ•ˆæœå¦‚ä¸‹ï¼š å±æ€§å’Œå¤–è§‚ Switchå’ŒCheckBoxå±æ€§å¾ˆç®€å•ï¼Œå¯ä»¥è®¾ç½®valueæ¥æ§åˆ¶æ˜¯å¦è¢«é€‰ä¸­ï¼Œéœ€è¦çˆ¶çº§æ§ä»¶æ¥ç»´æŠ¤,çŠ¶æ€æ”¹å˜æ—¶ä¹Ÿæ˜¯çˆ¶çº§æ¥ç»´æŠ¤,å¦å¤–è¿˜å¯ä»¥è®¾ç½®activeColoræ¿€æ´»é¢œè‰²ï¼Œå’ŒnormalçŠ¶æ€çš„é¢œè‰²trackColorã€‚ è¿™æ ·å­è®¾è®¡ç»„ä»¶çš„å¥½å¤„æ˜¯ï¼Œäº¤äº’äº¤ç»™å¤–éƒ¨ï¼Œè‡ªå·±åªå¤„ç†æ ·å¼ï¼Œè¿™æ ·å­ä¼ é€’çš„ä¿¡æ¯å¯ä»¥æ›´çµæ´»ã€‚ CheckboxListTile CheckboxListTileæ˜¯å®˜æ–¹æ§ä»¶ï¼Œåƒä¸€ä¸ªæŒ‰é’®ä¸€æ ·ï¼Œç‚¹å‡»ä»»ä¸€åœ°æ–¹éƒ½å¯ä»¥å®ç°é€‰æ‹©å’Œå–æ¶ˆé€‰æ‹©ï¼Œè¿˜å¯ä»¥æ·»åŠ iconï¼Œå¯ä»¥æ§åˆ¶CheckBoxçš„ä½ç½®ã€‚ æˆ‘ä»¬çœ‹ä¸‹å±æ€§ï¼š const CheckboxListTile({ ... @required this.value, @required this.onChanged, this.activeColor, this.checkColor, this.title, this.subtitle, this.isThreeLine = false, this.dense, this.secondary, this.selected = false, this.controlAffinity = ListTileControlAffinity.platform, }) valueæ˜¯æœ‰é€‰ä¸­çŠ¶æ€ï¼Œç”±çˆ¶ç»„ä»¶æ¥ç»´æŠ¤ onChangedæ˜¯çŠ¶æ€æ”¹å˜å›è°ƒå‡½æ•° activeColor é€‰ä¸­çŠ¶æ€é¢œè‰² checkColor é€‰ä¸­çŠ¶æ€âœ”ï¸çš„é¢œè‰² denseå¦‚æœä¸ºnullï¼Œå°±ä½¿ç”¨ä¸»é¢˜ListTileTheme.dense secondaryå’ŒCheckboxå¯¹ç§°çš„ç»„ä»¶ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªIcon isThreeLine æ˜¯å¦æ˜¯å¼ºåˆ¶æ˜¾ç¤ºä¸‰è¡Œ subtitleå­æ ‡é¢˜ selectedæ˜¯å¦é€‰ä¸­ï¼Œé»˜è®¤æ˜¯false controlAffinity æ˜¯CheckBox çš„ä½ç½® controlAffinity memo leading checkboxåœ¨å·¦è¾¹ trailing checkboxåœ¨å³è¾¹ platform checkboxå…¸å‹çš„æ ·å¼ ä¾‹å­ï¼š CheckboxListTile( onChanged: (v) { setState(() { _checkList2 = v; }); }, title: Text('checkListTitle box is trailing'), value: _checkList2, controlAffinity: ListTileControlAffinity.leading, ), æ•ˆæœï¼š å¤–è§‚ å¯ä»¥ç»™å°éƒ¨ä»¶æ·»åŠ iconå’Œå­ä¸»é¢˜ï¼Œiconä¸€èˆ¬å’Œcheckboxåœ¨å¯¹ç§°çš„ä½ç½®ï¼Œå­ä¸»é¢˜åœ¨ä¸»é¢˜çš„ä¸‹è¾¹ï¼Œå½“ä½¿ç”¨é»˜è®¤ä¸»é¢˜ListTileTheme.dense,æ–‡å­—éƒ¨ä»¶ä¼šè‡ªåŠ¨ä½¿ç”¨ç³»ç»Ÿçš„æ ·å¼ã€‚ ä¾‹å­ï¼š CheckboxListTile( onChanged: (v) { setState(() { _checkList1 = v; }); }, title: Text('checkListTitle box is leading'), value: _checkList1, controlAffinity: ListTileControlAffinity.leading, secondary: Icon(Icons.message), activeColor: Colors.orange, checkColor: Colors.blue, subtitle: Text('æˆ‘æ˜¯subtitle'), dense: true, ), æ•ˆæœï¼š RadioListTile RadioListTileå’ŒCheckboxListTileå±æ€§åŸºæœ¬ä¸€è‡´ï¼Œæœ€å¤§çš„ä¸åŒæ˜¯å‰è€…åªèƒ½ç”±æœªé€‰ä¸­è¯¥ä¸ºé€‰ä¸­ï¼Œé€‰ä¸­ä¹‹åä¸èƒ½ç»§ç»­æ“ä½œï¼Œä¹Ÿå°±æ˜¯ä¸èƒ½å†æ¬¡ç‚¹å‡»å®ç°åé€‰åŠŸèƒ½ã€‚ CheckboxListTile( onChanged: (v) { setState(() { _checkList2 = v; }); }, title: Text('checkListTitle box is trailing'), value: _checkList2, secondary: Icon(Icons.message), controlAffinity: ListTileControlAffinity.leading, ), å¦‚æœè§‰å¾—ä¸æ˜¯å¾ˆæ–¹ä¾¿ï¼Œå¯ä»¥è‡ªå®šä¹‰ä¸€ä¸ªç±»ä¼¼è¿™ä¸ªæ ·å¼çš„å°éƒ¨ä»¶ï¼Œæˆ‘ä»¬ä¸‹è¾¹å®ç°ä¸€ä¸ªé€‰ä¸­ä¹‹åå¯ä»¥åé€‰çš„RadioWidget. class LinkedLabelRadio extends StatelessWidget { const LinkedLabelRadio({ this.label, this.padding, this.groupValue, this.value, this.onChanged, }); final String label; final EdgeInsets padding; final bool groupValue; final bool value; final Function onChanged; @override Widget build(BuildContext context) { return Padding( padding: padding, child: Row( children: [ Radio( groupValue: groupValue, value: value, onChanged: (bool newValue) { onChanged(newValue); }), RichText( text: TextSpan( text: label, style: TextStyle( color: Colors.blueAccent, decoration: TextDecoration.underline, ), recognizer: TapGestureRecognizer() ..onTap = () { print('Label has been tapped.'); }, ), ), ], ), ); } } ///-------------build widget---------------------- /// æ·»åŠ åˆ°build ä¸­ /// è¿˜éœ€è¦çˆ¶ç»„ä»¶æ¥ç»´æŠ¤ä¸€ä¸ª _isRadioSelected bool _isRadioSelected = false; LabeledRadio( label: 'This is the first label text', padding: const EdgeInsets.symmetric(horizontal: 5.0), value: true, groupValue: _isRadioSelected, onChanged: (bool newValue) { setState(() { _isRadioSelected = newValue; }); }, ), æ•ˆæœï¼š å†å°è£…ä¸€ä¸ªé™„å¸¦è¶…é“¾æ¥çš„Radio,ç‚¹å‡»è¶…é“¾æ¥ï¼Œæ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œç‚¹å‡»å…¶ä»–åŒºåŸŸï¼Œæ‰§è¡ŒselectedçŠ¶æ€å˜æ›´ã€‚ class LinkedLabelRadio extends StatelessWidget { const LinkedLabelRadio({ this.label, this.padding, this.groupValue, this.value, this.onChanged, }); final String label; final EdgeInsets padding; final bool groupValue; final bool value; final Function onChanged; @override Widget build(BuildContext context) { return Padding( padding: padding, child: Row( children: [ Radio( groupValue: groupValue, value: value, onChanged: (bool newValue) { onChanged(newValue); }), RichText( text: TextSpan( text: label, style: TextStyle( color: Colors.blueAccent, decoration: TextDecoration.underline, ), recognizer: TapGestureRecognizer() ..onTap = () { print('Label has been tapped.'); }, ), ), ], ), ); } } /// ----------------widget----------------- LinkedLabelRadio( label: 'First tappable label text', padding: EdgeInsets.symmetric(horizontal: 5.0), value: true, groupValue: _isRadioSelected2, onChanged: (bool newValue) { setState(() { _isRadioSelected2 = newValue; }); }, ), LinkedLabelRadio( label: 'Second tappable label text', padding: EdgeInsets.symmetric(horizontal: 5.0), value: false, groupValue: _isRadioSelected2, onChanged: (bool newValue) { setState(() { _isRadioSelected2 = newValue; }); }, ), æ•ˆæœï¼š æ›´å¤šè‡ªå®šä¹‰ç»„è£…åœ¨åç»­ç« èŠ‚ä¸­ä¼šä¸€ä¸€è®²è§£ï¼Œå†æ¬¡ä¸è¿‡å¤šç´¯è¿°ã€‚ "},"books/3.7textfield.html":{"url":"books/3.7textfield.html","title":"3.7ï¼šè¾“å…¥æ¡†","keywords":"","body":"3.7 è¾“å…¥æ¡†å’Œè¡¨å• è¾“å…¥æ¡†æœ‰TextFieldã€å¸¦æœ‰iOSé£æ ¼çš„CupertinoTextField,è¿˜æœ‰è¡¨å•form. 3.7.1 TextField TextFieldé»˜è®¤å¸¦æœ‰ä¸‹åˆ’çº¿ï¼Œæ— è¾¹æ¡†çš„ï¼Œå±æ€§InputDecorationå¯ä»¥è®¾ç½®é»˜è®¤æ–‡å­—ï¼Œå½“ç¼–è¾‘çŠ¶æ€ï¼Œæ–‡å­—å·²åŠ¨ç”»å½¢å¼ä¸Šæµ®è‡³å·¦ä¸Šè§’ï¼Œè¿™æ˜¯å…¶ä»–è¾“å…¥æ¡†æ‰€æ²¡æœ‰çš„ã€‚å…¶ä»–çš„çœ‹ä¸‹å±æ€§ï¼š const TextField({ ... this.controller, this.focusNode, this.decoration = const InputDecoration(), TextInputType keyboardType, this.textInputAction, this.style, this.textAlign = TextAlign.start, this.textAlignVertical, this.textDirection, this.showCursor, this.autofocus = false, this.obscureText = false, this.enableSuggestions = true, this.maxLines = 1, this.minLines, this.expands = false, this.maxLength, this.onChanged, this.onEditingComplete, this.onSubmitted, this.inputFormatters, this.enabled, this.cursorWidth = 2.0, this.cursorRadius, this.cursorColor, ... }) controllerå¯ä»¥è·å–æ–‡å­—å’Œè®¾ç½®æ–‡å­—ï¼Œ focusNode è·å–ç„¦ç‚¹ keyboardTypeé”®ç›˜ç±»å‹ textInputActionè¾“å…¥é”®ç›˜å³ä¸‹è§’çš„é”® onChanged å½“textFieldçš„valueå˜åŒ–å›è°ƒå‡½æ•° onSubmittedæäº¤æŒ‰é”® obscureText trueåˆ™æ˜¾ç¤ºåŸç‚¹ï¼Œå¦åˆ™æ˜¾ç¤ºåŸæ–‡å­— cursorWidthå…‰æ ‡å®½åº¦ cursorRadius å…‰æ ‡åœ†åœˆåŠå¾„ cursorColorå…‰æ ‡é¢œè‰² textInputActionæœ‰å¤šä¸ªå€¼ï¼Œå…·ä½“è§ä¸‹è¡¨æ ¼ï¼š textInputAction å¤‡æ³¨ none Androidæ˜¯IME_ACTION_NONE,iOSæ²¡æœ‰ unspecified Android's IME_ACTION_UNSPECIFIED,iOS æ˜¯return done Android's IME_ACTION_DONE iOSæ˜¯done go android and iOS éƒ½æ˜¯go search android and ios is Search send android and ios is send next android and ios is next previous iOSæ²¡æœ‰ï¼ŒAndroid's IME_ACTION_PREVIOUS continueAction Androidæ²¡æœ‰ï¼ŒiOSä¸Šæ˜¯contion join android and ios is join route androidæ²¡æœ‰ï¼Œios is route emergencyCall androidæ²¡æœ‰ï¼Œios is Emergency Call newline android and ioséƒ½æ²¡æœ‰ï¼Œåªæ˜¯æ–¹ä¾¿å¼€å‘äººå‘˜è°ƒè¯• ä¾‹å­ï¼š _focusNode = new FocusNode(); _editingController = new TextEditingController(); _field = TextField( focusNode: _focusNode, onChanged: (v) { setState(() {}); }, onSubmitted: (v) { _focusNode.unfocus(); }, controller: _editingController, obscureText: false, //æ˜¯å¦æ˜¯å¯†ç  decoration: InputDecoration(hintText: 'æ‰‹æœºå·', labelText: 'æ‰‹æœºå·'), keyboardType: TextInputType.number, ); Column( children: [ Text('TextField'), _field, Text(_editingController.value.text), ], ) æ•ˆæœå¦‚ä¸‹ï¼š iOS-styleçš„ç»„ä»¶CupertinoTextField,å±æ€§å’ŒTextFieldåŸºæœ¬ä¸€è‡´; ä¾‹å­ï¼š _editingController2 = new TextEditingController(); _focusNode2 = new FocusNode(); _cupertinoTextField = CupertinoTextField( focusNode: _focusNode2, controller: _editingController2, placeholder: 'å¯†ç ', prefix: Icon(Icons.lock), textInputAction: TextInputAction.go, obscureText: true, ); Column( children: [ SizedBox( height: 30, ), Text('CupertinoTextField'), _cupertinoTextField, ], ) æ•ˆæœï¼š ç›‘å¬æ–‡æœ¬å˜åŒ– _editingController = new TextEditingController() ..addListener(() { print(\"${_editingController.value.text}\"); }); æˆ–è€… TextField( focusNode: _focusNode, onChanged: (v) { print('onChange$v'); }, controller: _editingController, ... ); æ”¶é”®ç›˜ TextField( focusNode: _focusNode, ); /// æ”¶é”®ç›˜ _focusNode.unfocus(); æ”¶é”®ç›˜ä¹‹å‰å¿…é¡»åœ¨åˆå§‹åŒ–çš„æ—¶å€™èµ‹å€¼ç»™TextField,å¦å¤–å®˜æ–¹è¿˜æä¾›äº†ç¼–è¾‘ä¸‹ä¸€ä¸ªtextField,å½“ä¸‹è¾¹æ²¡æœ‰å¯ä»¥æä¾›ç¼–è¾‘çš„textFieldåˆ™è¿›è¡Œä¹¦é”®ç›˜æ“ä½œï¼Œæœ‰çš„è¯åˆ™è·³è‡³ä¸‹ä¸€ä¸ªtextField. _focusNode.focusInDirection(TraversalDirection.down); 3.7.2 Form Formæ›´æ–°æ•°æ®å’Œè·å–æ•°æ®éœ€è¦ä½¿ç”¨_globalKeyè·å–å½“å‰çš„Stateã€‚ ä¾‹å­ï¼š Form( key: _globalKey, child: Column( crossAxisAlignment: CrossAxisAlignment.start, children: [ TextFormField( decoration: const InputDecoration( hintText: 'Enter your email', ), validator: (value) { if (value.isEmpty) { return 'Please enter some text'; } return null; }, ), Padding( padding: const EdgeInsets.symmetric(vertical: 16.0), child: RaisedButton( onPressed: () { // Validate will return true if the form is valid, or false if // the form is invalid. if (_globalKey.currentState.validate()) { // Process data. } }, child: Text('Submit'), ), ), ], ), ) Formå­æ ‘ä¸­å¯ä»¥æ˜¯å¤šä¸ªTextFormField,æ¯ä¸ªå¯ä»¥å•ä¸ªæ ¡éªŒï¼Œæ‰€æœ‰çš„éƒ½æ ¡éªŒè¿‡äº†ï¼ŒFormStateæ‰æ˜¯æ ¡éªŒé€šè¿‡çš„ï¼Œå¤šç”¨äºå¤šè¾“å…¥æ ¡éªŒã€‚é‚£ä¹ˆæˆ‘ä»¬å†™ä¸€ä¸ªç™»é™†çš„ç®€å•æ ¡éªŒã€‚ ä¾‹å­ï¼š _form = Form( key: _globalKey, child: Column( crossAxisAlignment: CrossAxisAlignment.start, children: [ TextFormField( decoration: const InputDecoration( hintText: 'Enter your email', icon: Icon(Icons.mail)), validator: (value) { if (value.isEmpty) { return 'Please enter some text'; } return null; }, ), TextFormField( controller: _editingController3, decoration: InputDecoration( labelText: \"å¯†ç \", hintText: \"æ‚¨çš„ç™»å½•å¯†ç \", icon: Icon(Icons.lock)), obscureText: true, //æ ¡éªŒå¯†ç  validator: (v) { return v.trim().length > 5 ? null : \"å¯†ç ä¸èƒ½å°‘äº6ä½\"; }), Padding( padding: const EdgeInsets.symmetric(vertical: 16.0), child: RaisedButton( onPressed: () { // Validate will return true if the form is valid, or false if // the form is invalid. if (_globalKey.currentState.validate()) { // Process data. print('æ ¡éªŒé€šè¿‡'); } setState(() { _done = _globalKey.currentState.validate(); }); }, child: Text('Submit'), ), ), ], ), ); "},"books/3.8indicator.html":{"url":"books/3.8indicator.html","title":"3.8: è¿›åº¦æŒ‡ç¤ºå™¨","keywords":"","body":"3.8 è¿›åº¦æŒ‡ç¤ºå™¨ Materialç»„ä»¶åº“ä¸­æä¾›äº†ä¸¤ç§è¿›åº¦æŒ‡ç¤ºå™¨ï¼šLinearProgressIndicatorå’ŒCircularProgressIndicatorï¼Œå®ƒä»¬éƒ½å¯ä»¥åŒæ—¶ç”¨äºç²¾ç¡®çš„è¿›åº¦æŒ‡ç¤ºå’Œæ¨¡ç³Šçš„è¿›åº¦æŒ‡ç¤ºã€‚ç²¾ç¡®è¿›åº¦é€šå¸¸ç”¨äºä»»åŠ¡è¿›åº¦å¯ä»¥è®¡ç®—å’Œé¢„ä¼°çš„æƒ…å†µï¼Œæ¯”å¦‚æ–‡ä»¶ä¸‹è½½ï¼›è€Œæ¨¡ç³Šè¿›åº¦åˆ™ç”¨æˆ·ä»»åŠ¡è¿›åº¦æ— æ³•å‡†ç¡®è·å¾—çš„æƒ…å†µï¼Œå¦‚ä¸‹æ‹‰åˆ·æ–°ï¼Œæ•°æ®æäº¤ç­‰ã€‚ 3.8.1 LinearProgressIndicator LinearProgressIndicatorçº¿å½¢çš„è¿›åº¦æŒ‡ç¤ºå™¨ï¼Œçœ‹æ–‡æ¡£å¦‚ä¸‹ï¼š const LinearProgressIndicator({ Key key, double value, Color backgroundColor, Animation , String semanticsLabel, String semanticsValue, }) valueé»˜è®¤ä¸ºnullï¼Œæ•ˆæœä¸ºåŠ¨ç”»,èŒƒå›´æ˜¯[0,1] backgroundColoræ˜¯åŠ¨ç”»èƒŒæ™¯é¢œè‰²ï¼Œä¸ºé™æ€çš„ valueColoræ˜¯åŠ¨ç”»å‰æ™¯è‰²ï¼Œå¯ä»¥ä½¿ç”¨AnimationControlleræ­é…è¾¾åˆ°é¢œè‰²å˜åŒ–çš„ç›®çš„ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨AlwaysStoppedAnimationæ¥è¾¾åˆ°é™æ€é¢œè‰²ã€‚ ä¾‹å­ï¼š LinearProgressIndicator( valueColor: AlwaysStoppedAnimation(Colors.orange), backgroundColor: Colors.black12, ) æ•ˆæœï¼š è®¾ç½®å¤§å°å’Œçº¿æ¡å®½åº¦ï¼š SizedBox( height: 20, width: 200, child: LinearProgressIndicator( // value: 0.1, valueColor: AlwaysStoppedAnimation(Colors.orange), backgroundColor: Colors.black12, ), ), æ•ˆæœï¼š CircularProgressIndicator CircularProgressIndicatoræ˜¯åŸå‹è¿›åº¦æŒ‡ç¤ºå™¨ï¼Œå¯ä»¥è‡ªå·±é…ç½®é¢œè‰²å’Œè¿›åº¦ï¼Œç›¸å…³å±æ€§ç´§ç´§æ¯”LinearProgressIndicatorå¤šäº†ä¸€ä¸ªçº¿æ¡å®½åº¦strokeWidth. ç›¸å…³å±æ€§ï¼š CircularProgressIndicator({ ... double value, Color backgroundColor, Animation valueColor, this.strokeWidth = 4.0 ... }) valueé»˜è®¤ä¸ºnullï¼Œæ•ˆæœä¸ºåŠ¨ç”»,èŒƒå›´æ˜¯[0,1] backgroundColoræ˜¯åŠ¨ç”»èƒŒæ™¯é¢œè‰²ï¼Œä¸ºé™æ€çš„ valueColoræ˜¯åŠ¨ç”»å‰æ™¯è‰²ï¼Œå¯ä»¥ä½¿ç”¨AnimationControlleræ­é…è¾¾åˆ°é¢œè‰²å˜åŒ–çš„ç›®çš„ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨AlwaysStoppedAnimationæ¥è¾¾åˆ°é™æ€é¢œè‰²ã€‚ this.strokeWidthé»˜è®¤ä¸º4ï¼Œå¯ä»¥è‡ªå®šå•ç‹¬è®¾ç½®ã€‚ ä¾‹å­ï¼š CircularProgressIndicator( valueColor: AlwaysStoppedAnimation(Colors.orange), backgroundColor: Colors.greenAccent, ) æ•ˆæœï¼š è‡ªå®šä¹‰å¤–è§‚ é€šè¿‡strokeWidthå®šä¹‰çº¿æ¡å®½åº¦ï¼Œé€šè¿‡valueColorå®šä¹‰æ¸å˜è‰²,backgroundColorå®šä¹‰èƒŒæ™¯è‰²ã€‚ ä¾‹å­ï¼š AnimationController _controller; @override void initState() { _controller = AnimationController(vsync: this, duration: Duration(milliseconds: 2000)) ..repeat(); super.initState(); } SizedBox( height: 200, width: 200, child: CircularProgressIndicator( valueColor: ColorTween(begin: Colors.grey, end: Colors.orange) .animate(_controller), backgroundColor: Colors.black12, strokeWidth: 10, ), ), æ•ˆæœï¼š æ›´å¤šè¿›åº¦æŒ‡ç¤ºå™¨ å’Œå¥½ç½‘çš„æ ·å¼å¯ä»¥å‚è€ƒflutter_easyHub è¿›åº¦æ¡ åˆ©ç”¨valueå¯ä»¥å®šåˆ¶ï¼Œå¯ä»¥ç”¨åœ¨ä¸‹è½½è¿›åº¦æŒ‡ç¤ºå™¨ä¸Šã€‚ ä¾‹å­ï¼š AnimationController _controller; Timer _timer; double _value = 0; @override void initState() { _controller = AnimationController(vsync: this, duration: Duration(milliseconds: 2000)) ..repeat(); _timer = Timer.periodic(Duration(milliseconds: 16), (t) { _value += 0.01; if (_value >= 1.0) { _value = 0; } setState(() {}); }); super.initState(); } SizedBox( height: 200, width: 200, child: Stack( children: [ Positioned.fill( child: CircularProgressIndicator( valueColor: ColorTween(begin: Colors.blue, end: Colors.orange) .animate(_controller), backgroundColor: Colors.black12, strokeWidth: 10, value: _value, ), ), Positioned.fill( child: Center( child: Text( '${(_value * 100).toDouble().toStringAsFixed(2)}%', style: TextStyle(fontSize: 20, color: Colors.orange), ), )) ], ), ), æ•ˆæœï¼š "},"books/3.9dialog.html":{"url":"books/3.9dialog.html","title":"3.9: å¼¹çª—","keywords":"","body":"3.9 å¼¹çª— ç»„ä»¶åº“ä¸­æä¾›äº†å¤šç§å¼¹çª—é€‚ç”¨äºé€‰æ‹©æ—¶é—´ã€å®šæ—¶ã€ç”¨æˆ·é€‰æ‹©ã€è¡¨å•æäº¤ç­‰ã€‚ã€‚ã€‚ 3.9.1 showCupertinoDialog showCupertinoModalPopupæ˜¯ä¸€ä¸ªiOS-styleé£æ ¼çš„å¼¹çª—ï¼Œä»åº•éƒ¨å¼¹å‡ºï¼Œé™„å¸¦äº†ä¸€ä¸ªå”¯ä¸€åŠ¨ç”»å’Œæ¸å˜æ¶ˆå¤±çš„åŠ¨ç”»ï¼ŒæŒ‰é’®ä¹Ÿæ˜¯iOS-styleé£æ ¼ï¼Œç‚¹å‡»é®ç½©è¿”å›ã€‚ä¸‹é¢çœ‹ä¸‹ä»£ç ï¼š ä¾‹å­ï¼š void _showActionSheet() { showCupertinoModalPopup( context: context, builder: (ctx) { return CupertinoActionSheet( title: Text('æ¸©é¦¨æç¤º'), message: Text('æˆ‘æ˜¯æ”¯ä»˜é€‰é¡¹ï¼Œä»»æ„é€‰æ‹©ä¸€ä¸ªè¿›è¡Œæ”¯ä»˜å“¦'), actions: [ CupertinoActionSheetAction(onPressed: _pop, child: Text('å¾®ä¿¡')), CupertinoActionSheetAction(onPressed: _pop, child: Text('æ”¯ä»˜å®')), CupertinoActionSheetAction( onPressed: _pop, child: Text('å–æ¶ˆ'), isDestructiveAction: true, ), ], ); }); } æ•ˆæœï¼š 3.9.2 showCupertinoDialog showCupertinoDialogæ˜¯å¯¹showGeneralDialogçš„ä¸€ä¸ªå°è£…ï¼Œåªæ˜¯barrierDismissibleã€barrierColorã€transitionDurationè¿›è¡Œäº†iOS-styleæ ¼è°ƒçš„è®¾ç½®ã€‚ æºç ï¼š Future showCupertinoDialog({ @required BuildContext context, @required WidgetBuilder builder, bool useRootNavigator = true, RouteSettings routeSettings, }) { assert(builder != null); assert(useRootNavigator != null); return showGeneralDialog( context: context, barrierDismissible: false, barrierColor: CupertinoDynamicColor.resolve(_kModalBarrierColor, context), // This transition duration was eyeballed comparing with iOS transitionDuration: const Duration(milliseconds: 250), pageBuilder: (BuildContext context, Animation animation, Animation secondaryAnimation) { return builder(context); }, transitionBuilder: _buildCupertinoDialogTransitions, useRootNavigator: useRootNavigator, routeSettings: routeSettings, ); } å’ŒshowCupertinoModalPopupåŒºåˆ«æ˜¯ä¸€ä¸ªä»åº•éƒ¨ï¼Œä¸€ä¸ªå…¨å±ã€‚ ä¸‹é¢çœ‹ä¸‹ä¾‹å­ï¼› showCupertinoDialog( context: context, builder: (ctx) { return CupertinoActionSheet( title: Text('æ¸©é¦¨æç¤º'), message: Text('æˆ‘æ˜¯showCupertinoDialog'), actions: [ CupertinoActionSheetAction(onPressed: _pop, child: Text('å¾®ä¿¡')), CupertinoActionSheetAction(onPressed: _pop, child: Text('æ”¯ä»˜å®')), CupertinoActionSheetAction( onPressed: _pop, child: Text('å–æ¶ˆ'), isDestructiveAction: true, ), ], ); }); æ•ˆæœï¼š 3.9.3 showAboutDialog showAboutDialogæ˜¯flutterå®˜æ–¹å°è£…çš„ä¸€ä¸ªå…³äºæˆ‘çš„ç»„ä»¶ï¼ŒåŒ…å«äº†ç‰ˆæœ¬å·ã€iconã€ä»¥åŠLicenseså†…å®¹ã€‚ ä¾‹å­ï¼š showAboutDialog( context: context, applicationVersion: '1.0.0', applicationIcon: Icon(Icons.scatter_plot), applicationName: 'Jack ma', ); 3.9.4 showGeneralDialog showGeneralDialogæ˜¯ä¸€ä¸ªæ¯”è¾ƒåŸºç¡€çš„å¼¹çª—ï¼Œ å¯ä»¥ç”¨è¿™ä¸ªå°è£…æˆä»»æ„å…¶ä»–çš„å¼¹çª—ã€‚ ä¾‹å­ï¼š showGeneralDialog( context: context, barrierDismissible: true, barrierLabel: 'cancel', transitionDuration: Duration(milliseconds: 1000), pageBuilder: (BuildContext context, Animation animation, Animation secondaryAnimation) { return Material( child: Scaffold( body: Center( child: CupertinoActionSheet( title: Text('æ¸©é¦¨æç¤º'), message: Text('æˆ‘æ˜¯showGeneralDialogï¼Œä»»æ„é€‰æ‹©ä¸€ä¸ªè¿›è¡Œæ”¯ä»˜å“¦'), actions: [ CupertinoActionSheetAction( onPressed: _pop, child: Text('å¾®ä¿¡')), CupertinoActionSheetAction( onPressed: _pop, child: Text('æ”¯ä»˜å®')), CupertinoActionSheetAction( onPressed: _pop, child: Text('å–æ¶ˆ'), isDestructiveAction: true, ), ], ), ), ), ); }); æ•ˆæœï¼š 3.9.4 showDialog showDialogä¹Ÿæ˜¯å°è£…çš„showGeneralDialog,åªæ˜¯å›ºå®šå‚æ•°è¿›è¡Œäº†é€‚é…ã€‚ void _showDialog() { showDialog(context: context, child: bd()); } Widget bd() { return CupertinoActionSheet( title: Text('æ¸©é¦¨æç¤º'), message: Text('æˆ‘æ˜¯æ”¯ä»˜é€‰é¡¹ï¼Œä»»æ„é€‰æ‹©ä¸€ä¸ªè¿›è¡Œæ”¯ä»˜å“¦'), actions: [ CupertinoActionSheetAction(onPressed: _pop, child: Text('å¾®ä¿¡')), CupertinoActionSheetAction(onPressed: _pop, child: Text('æ”¯ä»˜å®')), CupertinoActionSheetAction( onPressed: _pop, child: Text('å–æ¶ˆ'), isDestructiveAction: true, ), ], ); } 3.9.6 showDatePicker showDatePickeræ˜¯å®˜æ–¹æä¾›çš„ä¸€ä¸ªæ—¥å†ç»„ä»¶ï¼Œä¹Ÿæ˜¯åº§ä½å¼¹çª—å½¢å¼å±•ç°ï¼Œå‚æ•°å¾ˆç®€å•ã€‚ showDatePicker({ @required BuildContext context, @required DateTime initialDate, @required DateTime firstDate, @required DateTime lastDate ... } åªéœ€è¦é…ç½®å½“å‰çš„ä¸Šä¸‹æ–‡å’Œå¼€å§‹ç»“æŸæ—¶é—´å³å¯ã€‚ ä¾‹å­ï¼š showDatePicker( context: this.context, initialDate: DateTime.now(), //åˆå§‹æ—¶é—´ firstDate: DateTime.now(), //å¼€å§‹æ—¶é—´ lastDate: DateTime.now().add(Duration(days: 10)), //æœ€åæ—¶é—´æ˜¯å½“å‰æ—¶é—´åŠ ä¸Š10å¤© initialDatePickerMode: DatePickerMode.year, //æœ€å¼€å§‹å±•ç¤ºå¹´ä»½ initialEntryMode: DatePickerEntryMode.input, //å¼€å§‹æ˜¯è¾“å…¥æ—¶é—´è¿˜æ˜¯æ—¥å† selectableDayPredicate: (time) { print(time.toString()); return true; }) æ•ˆæœï¼š 3.9.7 showTimePicker showTimePickeræ˜¯ä¸€ä¸ªé€‰æ‹©æ—¶é—´é•¿çŸ­çš„æ§ä»¶,ä½¿ç”¨èµ·æ¥å¾ˆç®€å•ï¼Œåªéœ€è¦ä¼ å…¥é»˜è®¤æ—¶é—´å³å¯ã€‚ showTimePicker( context: this.context, initialTime: TimeOfDay(hour: 1, minute: 10)) æ•ˆæœï¼š "},"books/4.1layoutdesc.html":{"url":"books/4.1layoutdesc.html","title":"4.1 å¸ƒå±€ç±»ç»„ä»¶ç®€ä»‹","keywords":"","body":"4.1 å¸ƒå±€ç®€ä»‹ å¸ƒå±€ç±»ç»„ä»¶éƒ½ä¼šåŒ…å«ä¸€ä¸ªæˆ–è€…å¤šä¸ªå­ç»„ä»¶ï¼Œä¸åŒçš„å¸ƒå±€ç±»ç»„ä»¶å¯¹å­ç»„ä»¶çš„æ’åˆ—æ–¹å¼ä¸åŒï¼Œæ’ç‰ˆæœ€ç»ˆä¼šé€šè¿‡Elementæ ‘æ‰æ˜¯æœ€ç»ˆçš„ç»˜åˆ¶æ ‘ï¼ŒElementæ˜¯é€šè¿‡Widget.createElementåˆ›å»ºçš„ï¼ŒWidgetæ˜¯Elementçš„é…ç½®æ•°æ®ï¼Œåœ¨Flutterä¸­ï¼Œæ ¹æ®Widgetæ˜¯å¦éœ€è¦åŒ…å«å­èŠ‚ç‚¹å°†Widgetåˆ†ä¸ºä¸‰ç±»ï¼Œå¦‚ä¸‹ï¼š Widget Element ç”¨é€” LeafRenderObjectWidget LeafRenderObjectElement Widgetçš„å¶å­èŠ‚ç‚¹(å¶å­å°±æ˜¯æ²¡æœ‰å­©å­çš„èŠ‚ç‚¹),ä¸€èˆ¬ç”¨äºåŸºç¡€ç»„ä»¶å¦‚Imageã€ SingleChildRenderObjectWidget SingleChildRenderObjectElement åŒ…å«ä¸€ä¸ªå­ç»„ä»¶ï¼Œå¦‚:Container,Align... MultiChildRenderObjectWidget MultiChildRenderObjectElement åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªå­ç»„ä»¶ï¼Œå¦‚ï¼šRow,Column,Stack... bå¸ƒå±€ç±»ç»„ä»¶å°±æ˜¯æŒ‡ç›´æ¥æˆ–è€…é—´æ¥(åŒ…å«)MutiChildRenderObjectWidgetçš„Widgetï¼Œä»–ä»¬ä¸€èˆ¬æœ‰childå±æ€§ç”¨æ¥æ¥æ”¶å­ç»„ä»¶ï¼ŒWidget>RenderObjectWidget>(Leaf/SingleChild/MutiChild)RenderObjectWidget RenderObjectWidgetç±»å®šä¹‰äº†åˆ›å»ºã€æ›´æ–°RenderObjectçš„æ–¹æ³•ï¼Œå­ç±»å¿…é¡»å®ç°ä»–ä»¬ï¼Œå…³äºRenderObjectæˆ‘ä»¬ç°åœ¨åªéœ€è¦çŸ¥é“ä»–æ˜¯æœ€ç»ˆå¸ƒå±€ï¼Œæ¸²æŸ“UIç•Œé¢å³å¯ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œå¸ƒå±€ç±»ç®—æ³•éƒ½æ˜¯é€šè¿‡RenderObjectå¯¹è±¡æ¥å®ç°çš„ï¼Œæ‰€ä»¥è¯»è€…æ¥ä¸‹æ¥å¯¹å¸ƒå±€ç±»ç»„ä»¶åŸç†æ„Ÿå…´è¶£å¯ä»¥è‡ªè¡ŒæŸ¥çœ‹RenderObjectçš„å®ç°ã€‚ "},"books/4.2rowandcolumn.html":{"url":"books/4.2rowandcolumn.html","title":"4.2 çº¿æ€§å¸ƒå±€ï¼ˆRowå’ŒColumn","keywords":"","body":"4.2 çº¿æ€§å¸ƒå±€ï¼ˆRowã€Columnï¼‰ Rowã€ Columnæ˜¯çº¿æ€§å¸ƒå±€ï¼Œé€šä¿—çš„æ¥è®²å°±æ˜¯æŒ‰ç…§æ¨ªè½´æˆ–è€…çºµè½´æ¥å¸ƒå±€ï¼Œä»–ä»¬å¯ä»¥ç›¸äº’åµŒå¥—å®ç°è´Ÿè´£çš„å¸ƒå±€ã€‚ ä¸»è½´å’Œæ¨ªè½´ åœ¨çº¿æ€§å¸ƒå±€ä¸­ï¼Œåˆ†ä¸ºçºµè½´å’Œæ¨ªè½´,å¦‚æœå¸ƒå±€æ˜¯æ°´å¹³åˆ†å¸ƒï¼Œé‚£ä¹ˆä¸»è½´æ˜¯æŒ‡æ°´å¹³æ–¹å‘ï¼›å¦‚æœå¸ƒå±€æ˜¯å‚ç›´æ–¹å‘ï¼Œé‚£ä¹ˆä¸»è½´å°±æ˜¯æŒ‡å‚ç›´æ–¹å‘ï¼Œè€Œçºµè½´æ˜¯æ°´å¹³æ–¹å‘ã€‚å®˜æ–¹æä¾›äº†ä¸¤ä¸ªæšä¸¾æ¥è¡¨ç¤ºæ¥è¡¨ç¤ºä¸»è½´MainAxisAlignmentå’Œçºµè½´CrossAxisAlignment. Row Rowç»„ä»¶å¯ä»¥æ²¿ç€æ°´å¹³æ’åˆ—ç»„ä»¶ï¼Œæ¯ä¸€ä¸ªRowéƒ½æ˜¯ä¸€åˆ—ï¼Œå­ç»„ä»¶ä¾æ¬¡æ’åˆ—ã€‚ Row({ Key key, MainAxisAlignment mainAxisAlignment = MainAxisAlignment.start, MainAxisSize mainAxisSize = MainAxisSize.max, CrossAxisAlignment crossAxisAlignment = CrossAxisAlignment.center, TextDirection textDirection, VerticalDirection verticalDirection = VerticalDirection.down, TextBaseline textBaseline, List children = const [], }) mainAxisAlignment: ä¸»è½´çš„æ’åˆ—ä½ç½®ï¼Œå¦‚æœæ–‡æœ¬æ–¹å‘æ˜¯TextDirection.ltr,start,æŒ‰ç…§ä»å·¦å‘å³çš„å¼€å§‹æ–¹å‘æ’åˆ—,å¦åˆ™ä»å³å‘å·¦æ’åˆ—ã€‚centeræ˜¯æŒ‰ç…§ä¸­é—´å‘ä¸¤è¾¹æ’åˆ—ï¼Œendæ˜¯æŒ‰ç…§ä»ç»“å°¾å‘å¼€å§‹æ–¹å‘æ’åˆ—ã€‚spaceBetweenæ˜¯ä¸¤ä¸ªå­ç»„ä»¶é—´éš”ä¸€è‡´ã€‚spaceEvenlyæ˜¯æ‰€æœ‰çš„ç©ºéš™ä¸€è‡´ã€‚spaceAroundå¼€å§‹å’Œç»“æŸæ˜¯ä¸­é—´çš„é—´éš™çš„ä¸€åŠã€‚é»˜è®¤æ˜¯MainAxisAlignment.start. crossAxisAlignment å‰¯è½´æ–¹å‘ï¼Œå’Œä¸»è½´æ–¹å‘ç±»ä¼¼ï¼Œstartæ˜¯æ’åˆ—åœ¨å¼€å§‹ä½ç½®ã€‚endæ’åˆ—åœ¨åº•éƒ¨ã€‚centeræ’åˆ—åœ¨å‰¯è½´ä¸­é—´ã€‚baselineæ ¹æ®åŸºçº¿æ’åˆ—ï¼Œstretchè¦æ±‚ä»–çš„å­ç»„ä»¶å‰¯è½´æ–¹å‘å……æ»¡çˆ¶ç»„ä»¶ï¼Œé»˜è®¤æ˜¯CrossAxisAlignment.centerã€‚ MainAxisSize:MainAxisSize.maxæ˜¯å¯ç”¨ç©ºé—´çš„æœ€å¤§å€¼ï¼Œå¤§å½“ç„¶å¯ç”¨ç©ºé—´å¿…é¡»æœ‰çº¦æŸï¼Œå¤§å°å¿…é¡»æ˜¯èƒ½è®¡ç®—å‡ºæ¥çš„ï¼Œå¦åˆ™å°†å´©æºƒã€‚å› ä¸ºç©ºé—´å¤§å°ä¸å¯èƒ½æ˜¯æ— é™åˆ¶çš„ã€‚ children:å­éƒ¨ä»¶æ•°ç»„ã€‚ ä¾‹å­ class BaseRowAndColumn extends StatelessWidget { @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar( title: Text('çº¿æ€§å¸ƒå±€'), ), body: SafeArea( child: CupertinoScrollbar( child: SingleChildScrollView( child: Column( children: [ _body(MainAxisAlignment.start, CrossAxisAlignment.start), _body(MainAxisAlignment.end, CrossAxisAlignment.start), _body(MainAxisAlignment.spaceBetween, CrossAxisAlignment.start), _body(MainAxisAlignment.spaceEvenly, CrossAxisAlignment.start), _body(MainAxisAlignment.spaceAround, CrossAxisAlignment.start), _body(MainAxisAlignment.center, CrossAxisAlignment.start), _body(MainAxisAlignment.center, CrossAxisAlignment.start), _body(MainAxisAlignment.center, CrossAxisAlignment.stretch), _body(MainAxisAlignment.center, CrossAxisAlignment.end), ], ), ), ))); } Widget _body(MainAxisAlignment mainAxisAlignment, CrossAxisAlignment crossAxisAlignment) { return Container( margin: EdgeInsets.symmetric(vertical: 10), child: Column( children: [ Text('$mainAxisAlignment $crossAxisAlignment'), Container( height: 50, child: Row( mainAxisAlignment: mainAxisAlignment, crossAxisAlignment: crossAxisAlignment, children: [ Container( color: Colors.blue, child: Text('Hello,'), ), Container( color: Colors.red, child: Text('I am'), ), Container( color: Colors.orange, child: Text('Jack ma'), ), ], ), color: Colors.black12, ) ], ), ); } } æ•ˆæœå›¾ï¼š å±•ç¤ºäº†ä¸»è½´çš„å¸¸ç”¨çš„æ•ˆæœï¼š MainAxisAlignment:startæ˜¯æ¯”è¾ƒç®€å•æ˜¯æ’åˆ—æ˜¯ä»å¼€å§‹åˆ°ç»“æŸï¼Œendæ˜¯ä¸»è½´ç»“å°¾å¼€å§‹æ’åˆ—ï¼ŒspaceBetweenæ˜¯é—´éš™å‡åŒ€åˆ†å¸ƒ(ä¸åŒ…å«å·¦ä¾§å’Œå³ä¾§)ï¼ŒspaceEvenlyæ‰€æœ‰é—´éš™ç©ºé—´å‡åŒ€åˆ†å¸ƒ(åŒ…å«å·¦ä¾§å’Œå³ä¾§),spaceAroundæ‰€æœ‰é—´éš™ç©ºé—´å‡åŒ€åˆ†å¸ƒ(å·¦ä¾§å’Œå³ä¾§å ç”¨ä¸­é—´é—´éš™çš„ä¸€åŠ) CrossAxisAlignment: startåœ¨é¡¶éƒ¨æ’åˆ—ï¼Œendåœ¨åº•éƒ¨æ’åˆ—ï¼Œcenteråœ¨ä¸­é—´æ’åˆ—ï¼Œstretché“ºæ»¡çˆ¶çº§ç©ºé—´æ’åˆ—ã€‚ Column Columnæ˜¯æŒ‰ç…§çºµè½´æ’åˆ—ï¼Œæ¯ä¸ªç»„ä»¶å ç”¨ä¸€è¡Œç©ºé—´ã€‚ Column({ Key key, MainAxisAlignment mainAxisAlignment = MainAxisAlignment.start, MainAxisSize mainAxisSize = MainAxisSize.max, CrossAxisAlignment crossAxisAlignment = CrossAxisAlignment.center, TextDirection textDirection, VerticalDirection verticalDirection = VerticalDirection.down, TextBaseline textBaseline, List children = const [], }) å¤§å¤šæ•°å‚æ•°å’ŒRowä¸€è‡´ï¼Œä¸åŒçš„æ˜¯ä¸»è½´å’Œçºµè½´æ–¹å‘æ­£å¥½ç›¸åï¼Œä¸‹é¢çœ‹ä¸€ä¸ªä¾‹å­ï¼š Widget _bd2() { return Column( children: [ _column(MainAxisAlignment.start, CrossAxisAlignment.start), _column(MainAxisAlignment.center, CrossAxisAlignment.start), _column(MainAxisAlignment.end, CrossAxisAlignment.start), _column(MainAxisAlignment.spaceAround, CrossAxisAlignment.start), _column(MainAxisAlignment.spaceEvenly, CrossAxisAlignment.start), _column(MainAxisAlignment.spaceBetween, CrossAxisAlignment.start), _column(MainAxisAlignment.start, CrossAxisAlignment.start), _column(MainAxisAlignment.start, CrossAxisAlignment.center), _column(MainAxisAlignment.start, CrossAxisAlignment.end), _column(MainAxisAlignment.start, CrossAxisAlignment.stretch), // _column(MainAxisAlignment.start, CrossAxisAlignment.start), ], ); } Widget _column(MainAxisAlignment mainAxisAlignment, CrossAxisAlignment crossAxisAlignment) { return Container( margin: EdgeInsets.symmetric(vertical: 20), color: Colors.black12, height: 105, child: Column( mainAxisAlignment: mainAxisAlignment, crossAxisAlignment: crossAxisAlignment, children: [ Text('$mainAxisAlignment $crossAxisAlignment'), Container( color: Colors.blue, child: Text('Hello,'), ), Container( color: Colors.red, child: Text('I am'), ), Container( color: Colors.orange, child: Text('Jack ma'), ), ], ), ); } æ•ˆæœï¼š æ¨ªè½´å’Œçºµè½´ æ•ˆæœ MainAxisAlignment.start, CrossAxisAlignment.start MainAxisAlignment.center, CrossAxisAlignment.start MainAxisAlignment.end, CrossAxisAlignment.start MainAxisAlignment.spaceAround, CrossAxisAlignment.start MainAxisAlignment.spaceEvently, CrossAxisAlignment.start MainAxisAlignment.spaceBeteen, CrossAxisAlignment.start MainAxisAlignment.start, CrossAxisAlignment.center MainAxisAlignment.start, CrossAxisAlignment.end MainAxisAlignment.start, CrossAxisAlignment.stretch æ€»çš„æ•ˆæœï¼š Widget _bd3() { return Container( color: Colors.red, height: 100, child: Row( children: [ Container( width: 100, color: Colors.black, ), ], ), ); } è¿™é‡Œrowä¸­çš„å­æ§ä»¶æŒ‡å®šäº†width,é«˜åº¦æ²¡æŒ‡å®šï¼Œé»˜è®¤æ˜¯é“ºæ»¡é«˜åº¦ æ•ˆæœï¼š å½“rowä¸­åµŒå¥—äº†å¦å¤–ä¸€ä¸ªrowåˆ™æ˜¾ç¤ºçœŸå®å¤§å°ã€‚åŸå› æ˜¯å½“å­æ§ä»¶æœ‰çœŸå®å¤§å°ï¼Œåœ¨rowä¸­åˆ™çˆ¶ç»„ä»¶æœªæŒ‡å®šé«˜åº¦ï¼Œåˆ™çˆ¶ç»„ä»¶é«˜åº¦å’Œå­ç»„ä»¶é«˜åº¦ä¸€è‡´ã€‚ Widget _bd3() { return Container( color: Colors.red, height: 100, child: Row( children: [ Container( width: 100, color: Colors.black, child: Row( children: [ Container( height: 50, width: 50, color: Colors.blue, ), ], mainAxisSize: MainAxisSize.max, )), ], ), ); } } å½“æˆ‘ä»¬æƒ³è®©ä¸€ä¸ªå­ç»„ä»¶å……æ»¡çˆ¶ç»„ä»¶åˆ™éœ€è¦ä½¿ç”¨å¼¹æ€§æ§ä»¶åŒ…è£¹ä¸€ä¸‹ã€‚å¼¹æ€§ç»„ä»¶åè¾¹çš„ç« èŠ‚ä¼šè¯¦ç»†è®²è§£ï¼Œå†æ¬¡ä¸å¤šå•°å—¦äº†ã€‚ Widget _bd3() { return Container( color: Colors.red, height: 100, child: Row( children: [ Expanded( child: Container( margin: EdgeInsets.all(20), color: Colors.black, ), ), ], ), ); } æ•ˆæœï¼š æ•ˆæœï¼š åœ¨Columnç©ºé—´å……æ»¡çˆ¶ç»„ä»¶ï¼š Widget _bd3() { return Container( child: Column( children: [ Expanded( child: Container( margin: EdgeInsets.all(20), color: Colors.red, child: Text('Are you OK?'), ), ), ], ), ); } æ•ˆæœå›¾ï¼š æ€»ç»“ï¼š Rowå’ŒColumnä¸»è½´å’Œå‰¯è½´å®Œå…¨ç›¸åï¼Œä»–ä»¬çš„ä¸»è½´æ–¹å‘å°±æ˜¯Rowæ˜¯æ¨ªç€çš„ï¼ŒColumnæ˜¯å‚ç›´çš„ã€‚å¤šå±‚åµŒå¥—çš„è¯ï¼Œæœ€å¥½æ¯å±‚çš„ç»„ä»¶éƒ½åšå¥½çº¦æŸï¼Œæƒ³é“ºæ»¡çˆ¶ç»„ä»¶å°±æ˜¯ç”¨å¼¹æ€§æ§ä»¶Expanded "},"books/4.3flex.html":{"url":"books/4.3flex.html","title":"4.3 å¼¹æ€§å¸ƒå±€ï¼ˆFlexï¼‰","keywords":"","body":"4.3 å¼¹æ€§å¸ƒå±€ï¼ˆFlexï¼‰ Flexå¼¹æ€§å¸ƒå±€ï¼Œæ˜¯å¸¸è§çš„ä¸€ç§å¸ƒå±€ï¼Œä»–å…è®¸ç›’å­æŒ‰ç…§ä¸€å®šæ¯”ä¾‹æ¥åˆ†é…ç©ºé—´ã€‚ Flex Flexç»„ä»¶å¯ä»¥æ²¿ç€æ°´å¹³æˆ–è€…å‚ç›´æ–¹å‘æ’åˆ—ç»„ä»¶ï¼Œå¦‚æœä½ çŸ¥é“ä¸»è½´æ–¹å‘ï¼Œä½¿ç”¨Rowæˆ–Columnå¯èƒ½ä¼šæ›´æ–¹ä¾¿ç‚¹ï¼Œå› ä¸ºRowå’ŒColumnéƒ½æ˜¯ç»§æ‰¿Flex,å‚æ•°åŸºæœ¬ç›¸åŒï¼Œæ‰€ä»¥Flexå¯ä»¥ç”¨çš„åœ°æ–¹ï¼ŒåŸºæœ¬Rowå’ŒColumnéƒ½å¯ä»¥æ»¡è¶³è¦æ±‚ã€‚ Flex({ Key key, @required this.direction, this.mainAxisAlignment = MainAxisAlignment.start, this.mainAxisSize = MainAxisSize.max, this.crossAxisAlignment = CrossAxisAlignment.center, this.textDirection, this.verticalDirection = VerticalDirection.down, this.textBaseline, List children = const [], }) direction: æŒ‡å®šAxis.verticalå®ƒå°±æ˜¯Columnï¼ŒæŒ‡å®šä¸ºAxis.horizontalå®ƒå°±æ˜¯Row. mainAxisAlignment: ä¸»è½´çš„æ’åˆ—ä½ç½®ï¼Œå¦‚æœæ–‡æœ¬æ–¹å‘æ˜¯TextDirection.ltr,start,æŒ‰ç…§ä»å·¦å‘å³çš„å¼€å§‹æ–¹å‘æ’åˆ—,å¦åˆ™ä»å³å‘å·¦æ’åˆ—ã€‚centeræ˜¯æŒ‰ç…§ä¸­é—´å‘ä¸¤è¾¹æ’åˆ—ï¼Œendæ˜¯æŒ‰ç…§ä»ç»“å°¾å‘å¼€å§‹æ–¹å‘æ’åˆ—ã€‚spaceBetweenæ˜¯ä¸¤ä¸ªå­ç»„ä»¶é—´éš”ä¸€è‡´ã€‚spaceEvenlyæ˜¯æ‰€æœ‰çš„ç©ºéš™ä¸€è‡´ã€‚spaceAroundå¼€å§‹å’Œç»“æŸæ˜¯ä¸­é—´çš„é—´éš™çš„ä¸€åŠã€‚ crossAxisAlignment å‰¯è½´æ–¹å‘ï¼Œå’Œä¸»è½´æ–¹å‘ç±»ä¼¼ï¼Œstartæ˜¯æ’åˆ—åœ¨å¼€å§‹ä½ç½®ã€‚endæ’åˆ—åœ¨åº•éƒ¨ã€‚centeræ’åˆ—åœ¨å‰¯è½´ä¸­é—´ã€‚baselineæ ¹æ®åŸºçº¿æ’åˆ—ï¼Œstretchè¦æ±‚ä»–çš„å­ç»„ä»¶å‰¯è½´æ–¹å‘å……æ»¡çˆ¶ç»„ä»¶ã€‚ æ•ˆæœå›¾ï¼š å±•ç¤ºäº†ä¸»è½´çš„å¸¸ç”¨çš„æ•ˆæœï¼š Expanded å¯ä»¥æŒ‰ç…§æ¯”ä¾‹æ‰©å±•Rowæˆ–è€…Columnã€Flexçš„æ‰€å ç©ºé—´ã€‚ Expanded({ Key key, int flex = 1, @required Widget child, }) ä¾‹å­ï¼š Container( height: 30, child: Row(children: [ Expanded( flex: 1, child: Container( color: Colors.red, ), ), Expanded( flex: 2, child: Container( color: Colors.orange, ), ), Expanded( flex: 3, child: Container( color: Colors.blue, ), ) ])) æ•ˆæœï¼š Spacer const Spacer({Key key, this.flex = 1}) æºç ä¹Ÿå¾ˆç®€å•ï¼Œå…¶å®æ˜¯å°è£…äº†Expandedï¼Œä¸»åŠ¨æ·»åŠ äº†ä¸€ä¸ªå¤§å°æ˜¯0,0çš„SizedBox.shrink(). ä¾‹å­ï¼š Container( height: 30, child: Row(children: [ Container( width: 50, color: Colors.red, ), Spacer( flex: 1, ), Container( width: 50, color: Colors.red, ), Spacer( flex: 2, ), Container( width: 50, color: Colors.red, ), ])) æ•ˆæœï¼š å®é™…åº”ç”¨ å½“æˆ‘ä»¬æƒ³å­ç»„ä»¶éšç€ç”¨çˆ¶ç»„ä»¶å˜å¤§è€Œå˜å¤§ï¼Œå±å¹•å˜å®½è€Œå˜å®½ï¼Œé‚£ä¹ˆè¯·ä½¿ç”¨å¼¹æ€§å¸ƒå±€. Row( children: [ Expanded( child: OutlineButton( child: Text('Expanded btn'), ), ) ], ), OutlineButton( child: Text('btn'), ), æ•ˆæœï¼š å¦‚æœè·ç¦»å·¦ä¾§ æˆ–è€…å³ä¾§è¾¹è·20pxå‘¢ï¼Ÿ Row( children: [ SizedBox( width: 20, ), Expanded( child: OutlineButton( child: Text('Expanded btn'), ), ), SizedBox( width: 20, ), ], ) æ•ˆæœå›¾ï¼š æ€»ç»“ï¼š å¦‚æœæ¨ªç€æ’åˆ—è¯·ç”¨Row,å¦‚æœæ¨ªç€æœ‰äº›éšç€å±å¹•å˜å®½ä¹Ÿå˜å®½ï¼Œä½¿ç”¨Row+Expanded,å¦‚æœå›ºå®šé—´éš”è¯·ä½¿ç”¨SizedBox,å¦‚æœé—´éš”æŒ‰ç…§æ¯”ä¾‹åˆ†é…ï¼Œè¯·ç”¨Spacer å¼¹æ€§å¸ƒå±€æ¯”è¾ƒç®€å•ï¼Œå¤šç”¨æ‰èƒ½æœ‰æ›´æ·±ç†è§£ã€‚ "},"books/4.4wrap.html":{"url":"books/4.4wrap.html","title":"4.4 æµå¼å¸ƒå±€","keywords":"","body":"4.4 æµå¼å¸ƒå±€ æµå¼å¸ƒå±€å°±æ˜¯ç€‘å¸ƒä¸€æ ·çš„ç”±ä¸Šè€Œä¸‹çš„ä¾æ¬¡æ’å¼€çš„å¸ƒå±€æ–¹å¼ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºæ˜¯æµå¼å¸ƒå±€ã€‚flutterä¸­çš„æµå¼å¸ƒå±€æ˜¯Wrapå’ŒFlow,å½“è¶…è¿‡å±å¹•å¤§å°åˆ™è¿›è¡Œæ¢è¡Œæ“ä½œã€‚ Wrap Wrap({ ... this.direction = Axis.horizontal, this.alignment = WrapAlignment.start, this.spacing = 0.0, this.runAlignment = WrapAlignment.start, this.runSpacing = 0.0, this.crossAxisAlignment = WrapCrossAlignment.start, this.textDirection, this.verticalDirection = VerticalDirection.down, List children = const [], }) direction ã€alignment ã€crossAxisAlignment ã€textDirection ã€childrenè¿™äº›å‚æ•°åœ¨å‰é¢å·²ç»è®²è¿‡å¾ˆå¤šæ¬¡äº†ï¼Œå†æ¬¡ä¾¿ä¸é‡å¤è®²è§£ã€‚ spacing : ä¸»è½´æ–¹å‘é—´éš” runSpacing : å‰¯è½´æ–¹å‘é—´éš” runAlignment : å‰¯è½´æ–¹å‘çš„æ’åˆ—ä½ç½® è®¾ç½®ä¸»è½´é—´éš”æ˜¯20px,å‰¯è½´æ–¹å‘é—´éš”æ˜¯30px,ä¸»è½´å±…ä¸­WrapAlignment.center ä¾‹å­ï¼š Widget _body() { return Wrap( alignment: WrapAlignment.center, spacing: 20.0, runSpacing: 30, // direction: Axis.vertical, children: [ _item('Are you ok ï¼Ÿ', 'A'), _item('I am ok ', 'B'), _item('é©¬ä»€ä¹ˆï¼Ÿ', 'C'), _item('ä»€ä¹ˆæ¢…ï¼Ÿ', 'D'), _item('é©¬ä¸œä»€ä¹ˆï¼Ÿ', 'E'), ], ); } æ•ˆæœï¼š æ”¹æˆçºµè½´æ’åˆ—ï¼š Widget _body() { return Wrap( runAlignment: WrapAlignment.start, alignment: WrapAlignment.center, spacing: 20.0, runSpacing: 30, direction: Axis.vertical, children: [ _item('Are you ok ï¼Ÿ', 'A'), _item('I am ok ', 'B'), _item('é©¬ä»€ä¹ˆï¼Ÿ', 'C'), _item('ä»€ä¹ˆæ¢…ï¼Ÿ', 'D'), _item('é©¬ä¸œä»€ä¹ˆï¼Ÿ', 'E'), ], ); } æ•ˆæœï¼š Flow Flowç›¸å¯¹äºWrapæ¯”è¾ƒå¤æ‚ï¼Œéœ€è¦è‡ªå·±å®ç°å­ç»„ä»¶çš„ä½ç½®è½¬æ¢ï¼Œæ‰€ä»¥ä½¿ç”¨æµå¼å¸ƒå±€åˆ™æœ‰é™è€ƒè™‘Wrapï¼Œæ˜¯å¦æ»¡è¶³ã€‚Flowä¸»è¦åº”ç”¨åœ¨è‡ªå®šä¹‰å¸ƒå±€ç­–ç•¥æˆ–æ€§èƒ½è¦æ±‚é«˜çš„åœºæ™¯ï¼Œæœ‰ç‚¹å¦‚ä¸‹ï¼š æ€§èƒ½å¼ºåŠ²ï¼›Flowæ˜¯å¯¹äºå­ç»„ä»¶ä»¥åŠä½ç½®è°ƒæ•´éå¸¸é«˜æ•ˆçš„ç©ºé—´ï¼ŒFlowçš„è½¬æ¢çŸ©é˜µå¯¹äºå­ç»„ä»¶è¿›è¡Œè°ƒæ•´è¿›è¡Œäº†ä¼˜åŒ–ï¼ŒFlowå®šä½ä¹‹åï¼Œå¦‚æœå­ç»„ä»¶ä½ç½®æˆ–è€…å°ºå¯¸å‘ç”Ÿäº†å˜åŒ–ï¼Œåœ¨FlowDelegateä¸­çš„PaintChild()æ–¹æ³•è°ƒç”¨context,paintChild()è¿›è¡Œé‡ç»˜ï¼Œè€Œåœ¨context.paintChildåœ¨é‡ç»˜é’ˆå…·å¹¶æ²¡æœ‰è°ƒæ•´ç»„ä»¶ä½ç½®ã€‚ çµæ´»ï¼›å¯ä»¥è‡ªå·±å®ç°FlowDelegateçš„paintChild()æ–¹æ³•ï¼Œéœ€è¦è‡ªå·±è®¡ç®—æ¯ä¸€ä¸ªç»„ä»¶çš„ä½ç½®ã€‚ ç¼ºç‚¹ï¼š ä½¿ç”¨æ¯”è¾ƒå¤æ‚ ä¸èƒ½è‡ªé€‚åº”ç»„ä»¶å¤§å°ï¼Œå¿…é¡»æŒ‡å®šçˆ¶å®¹å™¨å¤§å°æˆ–å®ç°BaseFlowDelegateçš„getSizeè¿”å›å›ºå®šå¤§å°ã€‚ ç¤ºä¾‹ï¼š æˆ‘ä»¬å¯¹åˆšæ‰çš„å­ç»„ä»¶è¿›è¡Œå¸ƒå±€ï¼š class BaseFlowDelegate extends FlowDelegate { EdgeInsets margin; BaseFlowDelegate({this.margin = EdgeInsets.zero}); @override void paintChildren(FlowPaintingContext context) { var x = margin.left; var y = margin.top; //è®¡ç®—æ¯ä¸€ä¸ªå­widgetçš„ä½ç½® for (int i = 0; i _list() { return [ _item('Are you ok ï¼Ÿ', 'A'), _item('I am ok ', 'B'), _item('é©¬ä»€ä¹ˆï¼Ÿ', 'C'), _item('ä»€ä¹ˆæ¢…ï¼Ÿ', 'D'), _item('é©¬ä¸œä»€ä¹ˆï¼Ÿ', 'E'), ]; } æ•ˆæœï¼š æˆ‘ä»¬æ ¹æ®ä¼ å…¥çš„Marginæ¥è®¡ç®—æ¯ä¸€ä¸ªChildçš„å…·ä½“ä½ç½®ï¼Œç„¶åä½¿ç”¨context.paintChild()æ¥ç»˜åˆ¶å‡ºæ¥ã€‚ç”±äºFlowä¸èƒ½é€‚é…çˆ¶çº§å¤§å°ï¼Œæˆ‘ä»¬é€šè¿‡getSizeæ¥ç¡®å®šFlowå¤§å°ã€‚ "},"books/4.5stack.html":{"url":"books/4.5stack.html","title":"4.5 å±‚å å¸ƒå±€ Stackã€Positioned","keywords":"","body":"4.5 å±‚å å¸ƒå±€ Stackã€Positioned 4.5.1 Stack å±‚å å¸ƒå±€å’ŒiOSä¸­çš„å¸¸ç”¨å¸ƒå±€ä¸€è‡´ï¼ŒiOSerå¾ˆå®¹æ˜“ç†è§£ï¼Œå­ç»„ä»¶æ ¹æ®çˆ¶ç»„ä»¶çš„ä½ç½®æ¥ç¡®å®šè‡ªå·±çš„ä½ç½®ï¼Œçˆ¶ç»„ä»¶å…è®¸å­ç»„ä»¶ä¸€å±‚ä¸€å±‚å èµ·æ¥ï¼Œéœ€è¦åœ¨æ·»åŠ çš„æ—¶å€™æ³¨æ„é¡ºåºï¼Œå…ˆæ·»åŠ çš„åœ¨åº•éƒ¨ï¼Œåæ·»åŠ çš„åœ¨ä¸Šé¢ã€‚Stackå…è®¸å­ç»„ä»¶å †å ï¼ŒPositionedç”¨äºæ ¹æ®Stackçš„å››ä¸ªè§’æ¥ç¡®å®šè‡ªå·±çš„ä½ç½®å’Œå¤§å°ã€‚ Stack Stack({ Key key, this.alignment = AlignmentDirectional.topStart, this.textDirection, this.fit = StackFit.loose, this.overflow = Overflow.clip, List children = const [], }) alignment:å’ŒAlignä¸­çš„ä¸€è‡´ï¼Œç°åœ¨åªéœ€è¦äº†è§£æ˜¯ç›¸å¯¹äºçˆ¶ç»„ä»¶çš„ä½ç½®ï¼Œå…·ä½“çš„ç®—æ³•è§4.6 ç›¸å¯¹å®šä½. textDirection:å’ŒRowã€Wrapçš„textDirectionåŠŸèƒ½ä¸€æ ·ï¼Œéƒ½ç”¨äºç¡®å®šalignmentå¯¹é½çš„å‚è€ƒç³»ï¼Œå³ï¼štextDirectionçš„å€¼ä¸ºTextDirection.ltrï¼Œåˆ™alignmentçš„startä»£è¡¨å·¦ï¼Œendä»£è¡¨å³ï¼Œå³ä»å·¦å¾€å³çš„é¡ºåºï¼›textDirectionçš„å€¼ä¸ºTextDirection.rtlï¼Œåˆ™alignmentçš„startä»£è¡¨å³ï¼Œendä»£è¡¨å·¦ï¼Œå³ä»å³å¾€å·¦çš„é¡ºåº fit:æ­¤å‚æ•°ç”¨äºç¡®å®šæ²¡æœ‰å®šä½çš„å­ç»„ä»¶å¦‚ä½•å»é€‚åº”Stackçš„å¤§å°ã€‚StackFit.looseè¡¨ç¤ºä½¿ç”¨å­ç»„ä»¶çš„å¤§å°ï¼ŒStackFit.expandè¡¨ç¤ºæ‰©ä¼¸åˆ°Stackçš„å¤§å° overflowï¼šæ­¤å±æ€§å†³å®šå¦‚ä½•æ˜¾ç¤ºè¶…å‡ºStackæ˜¾ç¤ºç©ºé—´çš„å­ç»„ä»¶ï¼›å€¼ä¸ºOverflow.clipæ—¶ï¼Œè¶…å‡ºéƒ¨åˆ†ä¼šè¢«å‰ªè£ï¼ˆéšè—ï¼‰ï¼Œå€¼ä¸ºOverflow.visible æ—¶åˆ™ä¸ä¼šã€‚ children:å­ç»„ä»¶æ•°ç»„ Positioned const Positioned({ Key key, this.left, this.top, this.right, this.bottom, this.width, this.height, @required Widget child, }) leftã€top ã€rightã€ bottomåˆ†åˆ«ä»£è¡¨ç¦»Stackå·¦ã€ä¸Šã€å³ã€åº•å››è¾¹çš„è·ç¦»ã€‚widthå’Œheightç”¨äºæŒ‡å®šéœ€è¦å®šä½å…ƒç´ çš„å®½åº¦å’Œé«˜åº¦ã€‚æ³¨æ„ï¼ŒPositionedçš„widthã€height å’Œå…¶å®ƒåœ°æ–¹çš„æ„ä¹‰ç¨å¾®æœ‰ç‚¹åŒºåˆ«ï¼Œæ­¤å¤„ç”¨äºé…åˆleftã€top ã€rightã€ bottomæ¥å®šä½ç»„ä»¶ï¼Œä¸¾ä¸ªä¾‹å­ï¼Œåœ¨æ°´å¹³æ–¹å‘æ—¶ï¼Œä½ åªèƒ½æŒ‡å®šleftã€rightã€widthä¸‰ä¸ªå±æ€§ä¸­çš„ä¸¤ä¸ªï¼Œå¦‚æŒ‡å®šleftå’Œwidthåï¼Œrightä¼šè‡ªåŠ¨ç®—å‡º(left+width)ï¼Œå¦‚æœåŒæ—¶æŒ‡å®šä¸‰ä¸ªå±æ€§åˆ™ä¼šæŠ¥é”™ï¼Œå‚ç›´æ–¹å‘åŒç†. ä¾‹å­ï¼š Stack( fit: StackFit.loose,//ä¿è¯ç»„ä»¶çœŸå®å¤§å° children: [ Positioned.fill( child: Container( color: Colors.red, )), Positioned.fill( left: 20, right: 20, bottom: 20, top: 20, child: Container( color: Colors.deepOrangeAccent, )), Positioned.fill( left: 40, right: 40, bottom: 40, top: 40, child: Container( color: Colors.orange, )), ], ) Positioned.fillè¡¨ç¤ºå……æ»¡çˆ¶ç»„ä»¶ï¼Œä¸è¿‡è¿˜å¯ä»¥æŒ‡å®šleftã€rightã€topã€bottomä¸€ä¸ªæˆ–è€…å¤šä¸ªæ¥çº¦æŸå¤§å°ã€‚ ç¬¬ä¸€ä¸ªè¾¹è·æ˜¯0,ç¬¬äºŒä¸ªè¾¹è·æ˜¯20ï¼Œç¬¬ä¸‰ä¸ªè¾¹è·æ˜¯40ï¼Œå¤§å°ä¸€æ¬¡å‡å°ã€‚ æ•ˆæœï¼š ä¾‹å­äºŒï¼š Stack( fit: StackFit.loose, alignment: Alignment.bottomRight, children: [ Positioned( left: 0, right: 0, height: 50, child: Container( color: Colors.red, alignment: Alignment.center, child: Text('Are you OK?'), ), ), Positioned( right: 0, height: 50, width: 50, top: 0, child: Container( color: Colors.red, alignment: Alignment.center, child: Text('I ma Jack!'), ), ), Positioned( height: 40, width: 60, child: Container( color: Colors.blue, alignment: Alignment.center, child: Text('hello'), ), ), ], ) Are you ok?æœªæŒ‡å®šä½ç½®ï¼Œåªæ˜¯æŒ‡å®šäº†å¤§å°ï¼Œä¸Šä¸‹ä½ç½®æœªæŒ‡å®šï¼Œæ‰€ä»¥ä¸Šä¸‹ä½ç½®éµä»çˆ¶ç»„ä»¶çš„alignment,åœ¨çˆ¶ç»„ä»¶åº•éƒ¨ã€‚ I am Jack!æŒ‡å®šäº†å…·ä½“çš„ä¸Šä¸‹å’Œå¤§å°ï¼Œåˆ™å¿½ç•¥çˆ¶ç»„ä»¶çš„ä½ç½®å‚æ•°ã€‚ helloè‡³æŒ‡å®šå¤§å°ï¼Œæ¨ªè½´å’Œçºµè½´éƒ½æœªæŒ‡å®šï¼Œæ‰€ä»¥éµä»çˆ¶ç»„ä»¶çš„bottomRightï¼Œåœ¨çˆ¶ç»„ä»¶çš„å³ä¸‹è§’ã€‚ æ•ˆæœå›¾ï¼š å®ä¾‹ä¸‰ï¼š Stack( fit: StackFit.expand, alignment: Alignment.center, children: [ Container( child: Text(\"Hello world\", style: TextStyle(color: Colors.white)), color: Colors.red, ), Positioned( top: 20.0, child: Container( child: Text(\"Are you OK?\"), color: Colors.blue, ), ), Positioned( left: 18.0, child: Container( child: Text(\"I am Jack\"), color: Colors.blue, )), ], ) Hello worldï¼ŒæœªæŒ‡å®šä½ç½®ï¼Œæ•…éµä»çˆ¶ç»„ä»¶fitå±æ€§ï¼Œé“ºæ»¡çˆ¶ç»„ä»¶ã€‚ å› ä¸ºæ˜¯å±‚å å¸ƒå±€ï¼Œç¬¬ä¸€ä¸ªæŒ‡å®šäº†ä½ç½®ï¼Œæ‰€ä»¥ä¸ä¼šé“ºæ»¡, Are you OK?æŒ‡å®šäº†ä½ç½®ï¼Œå¤§å°æ˜¯æ§ä»¶å¤§å°ï¼Œæ ¹æ®æ–‡å­—è‡ªåŠ¨ç®—å‡ºï¼Œæ‰€ä»¥å±•ç¤ºå®é™…å¤§å°ã€‚ I am JackæŒ‡å®šä½ç½®ï¼Œå¤§å°æœ‰å­ç»„ä»¶å­—ç¬¦ä¸²è‡ªåŠ¨ç®—å‡ºï¼Œæ•…æœªé“ºæ»¡çˆ¶ç»„ä»¶ã€‚ æ•ˆæœï¼š "},"books/4.6align.html":{"url":"books/4.6align.html","title":"4.6 å¯¹é½ä¸ç›¸å¯¹å®šä½ï¼ˆAlign","keywords":"","body":"4.6 å¯¹é½ä¸ç›¸å¯¹å®šä½(Align) 4.6.1 Align Alignç»„ä»¶å¯ä»¥è°ƒæ•´å­ç»„ä»¶çš„ä½ç½®ï¼Œå¹¶æ ¹æ®çˆ¶ç»„ä»¶çš„é«˜åº¦å’Œå®½åº¦æ¥ç¡®å®šè‡ªèº«çš„é«˜åº¦ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸‹å±æ€§ï¼š Align({ Key key, this.alignment = Alignment.center, this.widthFactor, this.heightFactor, Widget child, }) alignmentåœ¨çˆ¶ç»„ä»¶ä¸­çš„ä½ç½®ï¼Œæˆ‘ä»¬çœ‹ä¸‹ä»–çš„æ‰€æœ‰å€¼å’Œè®¡ç®—æ–¹å¼ã€‚ TopLeft = Alignment(-1.0, -1.0)ä¸­é—´ç‚¹æ˜¯[0,0],å³ä¸‹è§’æ˜¯[1,1],å…·ä½“çš„çœ‹ä¸‹å›¾ï¼š alignment å«ä¹‰ topLeft é¡¶éƒ¨å·¦ä¾§ topCenter é¡¶éƒ¨ä¸­é—´ topRight é¡¶éƒ¨å³ä¾§ centerLeft ä¸­é—´ä¾§ center ä¸­é—´ centerRight ä¸­é—´å³ä¾§ bottomLeft åº•éƒ¨å·¦ä¾§ bottomCenter åº•éƒ¨ä¸­é—´ bottomRight åº•éƒ¨å³ä¾§ widthFactorå’ŒheightFactoræ˜¯çˆ¶ç»„ä»¶/å½“å‰ç»„ä»¶çš„æ¯”ä¾‹ç³»æ•°ï¼Œåœ¨çˆ¶ç»„ä»¶æœªæŒ‡å®šå…·ä½“å¤§å°çš„æ—¶å€™ï¼Œåˆ™é€šè¿‡è®¡ç®—å¾—å‡ºçˆ¶ç»„ä»¶å¤§å°ï¼Œå…·ä½“å…¬å¼ï¼š å­ç»„ä»¶å®½åº¦* widthFactor =çˆ¶ç»„ä»¶å®½åº¦ å­ç»„ä»¶é«˜åº¦* heightFactor =çˆ¶ç»„ä»¶é«˜åº¦ ä¾‹å­ï¼š Container( color: Colors.black12, child: Align( alignment: Alignment.bottomRight, widthFactor: 2, heightFactor: 2, child: FlutterLogo( size: 30, )), ), æ•ˆæœï¼š å½“å‰logoå¤§å°æ˜¯30*30,çˆ¶ç»„ä»¶å¤§å°æ˜¯30*2=60,å®½åº¦å’Œé«˜åº¦ä¸€è‡´ã€‚å½“æ˜¾ç¤ºæŒ‡å®šå¤§å°ï¼Œåˆ™å¿½ç•¥è¯¥å‚æ•°ã€‚ Container( width: 200, height: 200, color: Colors.black12, child: Align( alignment: Alignment.bottomRight, widthFactor: 2, heightFactor: 2, child: FlutterLogo( size: 30, )), ), æ•ˆæœï¼š é™¤äº†è¿™ç§æ–¹å¼ï¼Œä¹Ÿå¯ä»¥åœ¨çˆ¶ç»„ä»¶ä¸­æŒ‡å®šå­ç»„ä»¶çš„ä½ç½® Container( width: 200, height: 200, color: Colors.black12, alignment: Alignment.center, child: Align( alignment: Alignment.bottomRight, widthFactor: 2, heightFactor: 2, child: FlutterLogo( size: 30, )), ) å½“çˆ¶ç»„ä»¶ä¸­æŒ‡å®šäº†ä½ç½®ï¼Œåˆ™åœ¨Alignä¸­Logoç«™çš„å¤§å°è¿˜æ˜¯widthFactor * 30,å†æ¬¡åŸºç¡€ä¸Šé¢å†æ‰§è¡Œå­ç»„ä»¶çš„ä½ç½®ã€‚ä¹Ÿå°±æ˜¯çˆ¶ç»„ä»¶å¤§å°æ˜¯200*200,å­ç»„ä»¶Logoå…·ä½“å¤§å°æ˜¯30*30,Alignç›¸å¯¹äºçˆ¶ç»„ä»¶å±…ä¸­ï¼Œå åœ°å¤§å°æ˜¯60*60,Logoç›¸å¯¹äºAlignåœ¨åº•éƒ¨å³ä¾§ã€‚ åƒè¨€ä¸‡è¯­ä¸å¦‚ä¸€å¼ å›¾ï¼š æ ¹æ®æºç å¾—çŸ¥ï¼š static const Alignment topLeft = Alignment(-1.0, -1.0) å…¶å®å®˜æ–¹çš„9ä¸­ä½ç½®ï¼Œåªæ˜¯æå‰å®šä¹‰å¥½çš„ï¼Œå¦‚æœè‡ªå·±æƒ³è¦æœ‰å…¶ä»–çš„å…·ä½“çš„ä½ç½®çš„è¯ï¼Œå¯ä»¥ä½¿ç”¨Alignment(x, y)æˆ–è€…FractionalOffset(x, y)æ¥æŒ‡å®šå…·ä½“çš„å…¶ä»–ä½ç½®ã€‚ Alignment Alignmentå…¶å®å°±æ˜¯ä¸€ä¸ªåæ ‡ï¼Œå…·ä½“çš„åæ ‡ç³»æ˜¯ åŸç‚¹åœ¨ä¸­é—´ï¼Œç»„ä»¶çš„åç§»é‡æ¢ç®—å…¬å¼æ˜¯ (Alignment.x*childWidth/2+childWidth/2, Alignment.y*childHeight/2+childHeight/2) childWidthåœ¨å­ç»„ä»¶çš„å®½åº¦ï¼ŒchildHeightæ˜¯å­ç»„ä»¶çš„é«˜åº¦ æˆ‘ä»¬å†çœ‹è¿™ä¸ªä¾‹å­ï¼š Container( width: 200, height: 200, color: Colors.black12, child: Align( alignment: Alignment(0, 1), child: FlutterLogo( size: 30, )), ) æˆ‘ä»¬å°†Alignment(1.0, -1.0)å¸¦å…¥ä¸Šé¢çš„å·¥æ—¶å¾—å‡ºï¼šFlutterLogoå®é™…åç§»åæ ‡æ˜¯(100,200) å†çœ‹å¦å¤–ä¸€ä¸ªä¾‹å­ï¼š Container( width: 200, height: 200, color: Colors.black12, child: Align( alignment: Alignment(2, 1), child: FlutterLogo( size: 30, )), ) ç»è¿‡è®¡ç®—å¾—å‡ºFlutterLogoåç§»é‡æ˜¯(300,200)ã€‚ FractionalOffset FractionalOffsetæ˜¯ç»§æ‰¿Alignmentï¼Œä»–ä»¬æœ€å¤§ä¸åŒå°±æ˜¯åŸç‚¹åæ ‡ä¸ä¸€è‡´ï¼ŒAlignmentåŸç‚¹åœ¨ç»„ä»¶ä¸­é—´,FractionalOffsetåœ¨ç»„ä»¶å·¦ä¸Šè§’ï¼Œå’ŒiOSåæ ‡ç³»æœ‰ç‚¹ç±»ä¼¼ã€‚ åæ ‡ç³»å¦‚å›¾æ‰€ç¤ºï¼š åç§»é‡å…¬å¼æ˜¯ å®é™…åç§» = (FractionalOffse.x * childWidth, FractionalOffse.y * childHeight) ä¸‹é¢æˆ‘ä»¬çœ‹ä¸ªä¾‹å­ï¼š Container( width: 200, height: 200, color: Colors.blue[50], child: Align( alignment: FractionalOffset(0.5, 0.5), child: FlutterLogo( size: 30, )), ), å°†å…¬å¼å¸¦å…¥FractionalOffset(0.5, 0.5)å¾—å‡ºï¼Œæœ€ç»ˆFlutterLogoçš„åç§»é‡æ˜¯(100,100). å†çœ‹å¦å¤–ä¸€ä¸ªä¾‹å­; Container( width: 200, height: 200, color: Colors.blue[50], child: Align( alignment: FractionalOffset(0, -0.1), child: FlutterLogo( size: 30, )), ), å°†å…¬å¼å¸¦å…¥FractionalOffset(0, -0.1)å¾—å‡ºï¼Œæœ€ç»ˆFlutterLogoçš„åç§»é‡æ˜¯(0,-20). æ•ˆæœå¦‚ä¸‹ï¼š 4.6.2 Center Centeræ˜¯ç»§æ‰¿Alignçš„ï¼Œæºç å¾ˆç®€å• class Center extends Align { /// Creates a widget that centers its child. const Center({ Key key, double widthFactor, double heightFactor, Widget child }) : super(key: key, widthFactor: widthFactor, heightFactor: heightFactor, child: child); } å› ä¸ºAligné»˜è®¤æ˜¯ä½ç½®æ˜¯center,æ‰€ä»¥ç”¨Align()å’ŒCenteræ•ˆæœæ˜¯ä¸€è‡´çš„ã€‚åªæ˜¯Centeræ— æ³•å¦å¤–æŒ‡å®šå…¶ä»–ä½ç½®ã€‚ æˆ‘ä»¬çœ‹ä¸‹é¢çš„ä¾‹å­ï¼š DecoratedBox( decoration: BoxDecoration(color: Colors.blue), child: Center( child: Text('center2'), ), ), SizedBox( height: 20, ), DecoratedBox( decoration: BoxDecoration(color: Colors.blue), child: Center( widthFactor: 1, heightFactor: 1, child: Text('center2'), ), ) æ•ˆæœï¼š å½“widthFactorå’ŒheightFactoræ²¡æŒ‡å®šæ—¶ï¼Œé»˜è®¤æ˜¯é“ºæ»¡çˆ¶å®¹å™¨çš„ æ€»ç»“ è¿™ä¸€èŠ‚ä¸»è¦è®²è§£äº†Alignç»„ä»¶åŠä¸¤ç§åç§»ç±»Alignment å’ŒFractionalOffsetï¼Œè¯»è€…éœ€è¦ç†è§£è¿™ä¸¤ç§åç§»ç±»çš„åŒºåˆ«åŠå„è‡ªçš„åæ ‡è½¬åŒ–å…¬å¼ã€‚å¦å¤–ï¼Œåœ¨æ­¤å»ºè®®è¯»è€…åœ¨éœ€è¦åˆ¶å®šä¸€äº›ç²¾ç¡®çš„åç§»æ—¶åº”ä¼˜å…ˆä½¿ç”¨FractionalOffsetï¼Œå› ä¸ºå®ƒçš„åæ ‡åŸç‚¹å’Œå¸ƒå±€ç³»ç»Ÿç›¸åŒï¼Œèƒ½æ›´å®¹æ˜“ç®—å‡ºå®é™…åç§»ã€‚ "},"books/5.1padding.html":{"url":"books/5.1padding.html","title":"5.1 å¡«å……ï¼ˆPaddingï¼‰","keywords":"","body":"5.1 Padding Paddingå±äºå¯¹äºç»„ä»¶çš„çº¦æŸæ¡ä»¶ï¼Œç”¨èµ·æ¥ä¹Ÿå¾ˆç®€å•ã€‚ å…¶å®paddingä¹Ÿæ˜¯å®¹å™¨æ¥ç»„ä»¶çš„å±æ€§ï¼Œè¿™ä¸ªå’Œcssç›’å­æ¨¡å‹ä¿æŒä¸€è‡´ï¼Œå¦å¤–ä¸€ä¸ªå‚æ•°æ˜¯marginæ˜¯å®¹å™¨çš„å¤–è¾¹è·ï¼Œpaddingæ˜¯å†…è¾¹è·ã€‚ çœ‹ä¸‹å›¾å°±ç†è§£äº†ï¼š ç»„ä»¶Cå’ŒAçš„è·ç¦»å¯ä»¥ç”¨Marginè¡¨ç¤ºï¼Œè€ŒAå†…éƒ¨æ˜¾ç¤ºæ–‡æœ¬Bä¸­çš„Paddingåˆ™æ˜¯J2/j3/j4/j5è¡¨ç¤º4ä¸ªæ–¹å‘çš„è·ç¦»ã€‚ æˆ‘ä»¬çœ‹ä¸‹å±æ€§ï¼š Widget _body() { return Center( child: Column( mainAxisAlignment: MainAxisAlignment.center, children: [ Container( color: Colors.black12, child: Padding( /// è®¾ç½®ä¸Šä¸‹å·¦å³å„10åƒç´  é¢œè‰²æ˜¯çˆ¶çº§é¢œè‰² padding: EdgeInsets.all(10), child: Container( color: Colors.red, child: Text('1'), ), ), ), Container( color: Colors.black12, child: Padding( /// è®¾ç½®ä¸Šä¸‹20åƒç´  é¢œè‰²æ˜¯çˆ¶çº§é¢œè‰² padding: EdgeInsets.symmetric(vertical: 20), child: Container( color: Colors.blue, child: Text('2'), ), ), ), Container( color: Colors.black12, child: Padding( /// è®¾ç½®ä¸Šä¸‹å·¦å³å„30åƒç´  é¢œè‰²æ˜¯çˆ¶çº§é¢œè‰² padding: EdgeInsets.only(left: 30, top: 30, right: 30, bottom: 30), child: Container( color: Colors.orange, child: Text('3'), ), ), ) ], ), ); } "},"books/5.2constrainedBox.html":{"url":"books/5.2constrainedBox.html","title":"5.2 å°ºå¯¸é™åˆ¶ç±»å®¹å™¨ï¼ˆConstrainedBoxç­‰ï¼‰","keywords":"","body":"5.2 å°ºå¯¸é™åˆ¶çš„å®¹å™¨ Flutteræä¾›äº†å¾ˆå¤šä¸ªå°ºå¯¸é™åˆ¶çš„å®¹å™¨æ¯”å¦‚ï¼šConstrainedBoxã€SizedBoxã€UnconstrainedBoxã€AspectRatioç­‰. 5.2.1 ConstrainedBox ConstrainedBoxç”¨äºæœ€å­ç»„ä»¶æ·»åŠ é¢å¤–çš„çº¦æŸï¼Œä¾‹å¦‚ï¼šå¦‚æœä½ æƒ³å­ç»„ä»¶çš„æœ€å°é«˜åº¦æ˜¯100åƒç´ ï¼Œå¯ä»¥ä½¿ç”¨const BoxConstraints(minHeight: 100.0)ä½œä¸ºå­ç»„ä»¶çš„çº¦æŸã€‚ ä¾‹å­ æˆ‘ä»¬åœ¨ç¬¬ä¸€ä¸ªContaineré™åˆ¶æœ€å°é«˜åº¦æ˜¯50px,æœ€å°å®½åº¦50pxï¼Œæœ€å¤§å®½åº¦å’Œé«˜åº¦200pxï¼Œç¬¬äºŒä¸ªæ˜¯å¤§å°ä¸º50pxçš„Containerç”¨æ¥åšå¯¹æ¯”ã€‚ å½“å­æ§ä»¶å°äºçˆ¶æ§ä»¶çš„å°ºå¯¸é™åˆ¶çš„æ—¶å€™ï¼Œéµä»çˆ¶æ§ä»¶çš„çº¦æŸã€‚ Column( children: [ Container( constraints: BoxConstraints( minWidth: 50, minHeight: 50, maxHeight: 200, maxWidth: 100), color: Colors.red, child: Container( width: 30, height: 30, color: Colors.blue, ), ), Container( height: 50, width: 50, color: Colors.red, ) ], ) æ•ˆæœï¼š const BoxConstraints({ this.minWidth = 0.0, this.maxWidth = double.infinity, this.minHeight = 0.0, this.maxHeight = double.infinity, }) å½“ä¸è®¾ç½®æœ€å¤§å®½åº¦å’Œé«˜åº¦ï¼Œé»˜è®¤æ˜¯è®¾ç½®å°½å¯èƒ½çš„å¤§ï¼Œæœ€ä¸‹éƒ½æ˜¯0.0ã€‚BoxConstraintsè¿˜æœ‰å¾ˆå¤šä¾¿æ·å‡½æ•°; BoxConstraints.tight(Size size)å›ºå®šsize BoxConstraints.tightFor({ double width, double height, })æœ€å°å®½åº¦å’Œé«˜åº¦ï¼Œæœ€å¤§è¿˜æ˜¯é»˜è®¤å°½å¯èƒ½å¤§ã€‚ BoxConstraints.tightForFinite({ double width = double.infinity, double height = double.infinity, })è®¾ç½®widthå’Œheightå°±æ˜¯è®¾ç½®é‡Œæœ€ä¸‹ï¼Œæœ€å¤§ä»ç„¶æ˜¯å°½å¯èƒ½å¤§double.infinity. BoxConstraints.loose(Size size)çœŸå®å¤§å° BoxConstraints.expandå¼¹æ€§åˆ°æœ€å¤§ 5.2.2 SizedBox SizedBoxç”¨äºç»™å­å…ƒç´ æŒ‡å®šå›ºå®šé«˜åº¦ï¼Œå¦‚ï¼š SizedBox( width: 80.0, height: 80.0, child: redBox ) ç­‰ä»·äºï¼š Container( constraints: BoxConstraints(maxWidth: 100, maxHeight: 100), color: Colors.red, ) SizedBoxä¸­çš„createRenderObject()æ˜¯è¿”å›çš„æ˜¯RenderConstrainedBox @override RenderConstrainedBox createRenderObject(BuildContext context) { return RenderConstrainedBox( additionalConstraints: _additionalConstraints, ); } 5.2.3 å¤æ‚æƒ…å†µ é™åˆ¶é‡å¤ å¦‚æœä¸€ä¸ªç»„ä»¶æœ‰å¤šä¸ªçˆ¶çº§ConstrinedBoxé™åˆ¶ï¼Œé‚£ä¹ˆæœ€åè°ä¼šç”Ÿæ•ˆå‘¢ï¼Ÿ ä¸€çº§ç»„ä»¶é™åˆ¶å¤§å°æ˜¯100ï¼ŒäºŒçº§é™åˆ¶æ˜¯50ï¼Œé‚£ä¹ˆæœ€æœ€ç»ˆæ˜¾ç¤ºçš„æ˜¯100. ConstrainedBox( constraints: BoxConstraints( maxWidth: 100, maxHeight: 100, ), child: ConstrainedBox( constraints: BoxConstraints( maxWidth: 50, maxHeight: 50, ), child: _redBox(), ), ) æ•ˆæœå¦‚ä¸‹ï¼š å½“maxHeightå¤šé‡é™åˆ¶åˆ™æ˜¾ç¤ºè¾ƒå°çš„ é‚£ä¹ˆminWidth?æœ‰å…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±è¯•ä¸€ä¸‹ã€‚ å½“å­å±‚çº§ä¸æƒ³ä½¿ç”¨çˆ¶çº§çº¦æŸäº†æ€ä¹ˆåŠï¼ŸFlutteræä¾›äº†UnconstrainedBoxç”¨æ¥å»é™¤çˆ¶çº§çš„é™åˆ¶ã€‚ UnconstrainedBox UnconstrainedBoxåªä¼šæŠŠçˆ¶çº§çš„çº¦æŸå¤±æ•ˆï¼Œä¸ä¼šå¯¹å­éƒ¨ä»¶äº§ç”Ÿå…¶ä»–å½±å“ã€‚æˆ‘ä»¬åšä¸€ä¸ªæµ‹è¯•ï¼Œçˆ¶ç±»æœ€å°æ˜¯100X100,å»é™¤å½±å“åå­éƒ¨ä»¶åº”è¯¥æ˜¯50X50. Widget _widget() { return Container( color: Colors.black12, constraints: BoxConstraints( minHeight: 100, minWidth: 100, maxWidth: 200, maxHeight: 200), child: UnconstrainedBox( child: _redBox(), ), ); } æˆ‘ä»¬çœ‹ä¸‹æ•ˆæœï¼š ä¹‹ç±»çˆ¶çº§çš„èƒŒæ™¯è¿˜æ˜¯100X100ï¼Œå­éƒ¨ä»¶å¤§å°æ˜¯50X50,è™½ç„¶æ²¡æœ‰å½±å“å­éƒ¨ä»¶ï¼Œä½†æ˜¯çˆ¶çº§çš„çº¦æŸå¯¹çˆ¶çº§å½±å“è¿˜æ˜¯åœ¨çš„ã€‚ å½“æˆ‘ä»¬å¼€å‘ä¸­å‘ç°ï¼Œè™½ç„¶æŒ‡å®šäº†BoxConstraintsçš„å¤§å°ï¼Œä½†æ˜¯è¿˜æ˜¯å¤±æ•ˆäº†ï¼Œæ˜¾è€Œæ˜“è§æ˜¯çˆ¶çº§å·²ç»æŒ‡å®šäº†çº¦æŸï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æ˜¯ç”¨UnconstrainedBoxæ¥åŒ…è£¹ä¸€ä¸‹ï¼Œå³å¯å»æ‰çˆ¶çº§å¯¹å­çº§çš„å½±å“ã€‚ "},"books/5.3decoratedbox.html":{"url":"books/5.3decoratedbox.html","title":"5.3 è£…é¥°å®¹å™¨ï¼ˆDecoratedBoxï¼‰","keywords":"","body":"5.3 è£…é¥°ç±»çš„å®¹å™¨ å…¶å®è¯¥é™åˆ¶å®¹å™¨å¾ˆç®€å•ï¼Œå°±æ˜¯è®¾ç½®é¢œè‰²ã€èƒŒæ™¯å›¾ç‰‡ã€å½¢çŠ¶ã€æ¸å˜ã€çš„ä¸€äº›å¤–è§‚å®¹å™¨ã€‚æˆ‘ä»¬å…ˆçœ‹ä¸‹å±æ€§ï¼š BoxDecoration({ this.color, //é¢œè‰² this.image,//å›¾ç‰‡ å¦‚æœé¢œè‰²åŒæ—¶è®¾ç½®ï¼Œé¢œè‰²åœ¨ä¸‹ï¼ŒèƒŒæ™¯å›¾ç‰‡åœ¨ä¸Š,childåœ¨æœ€ä¸Šå±‚ this.border,//è¾¹æ¡† this.borderRadius,//åœ†è§’åŠå¾„ this.boxShadow,//é˜´å½± this.gradient,//é¢œè‰²æ¸å˜ this.backgroundBlendMode,//èƒŒæ™¯æ··åˆæ¨¡å¼ this.shape = BoxShape.rectangle,//å½¢çŠ¶ï¼Œå½“è®¾ç½®åŸå‹åˆ™ä¸èƒ½ä¸è®¾ç½®this.borderRadius }) ä¸‹è¾¹æˆ‘ä»¬çœ‹ä¸‹ä¾‹å­,é¦–å…ˆä½¿ç”¨äº†æ¸å˜çš„ä¸‰ç§æ•ˆæœæˆ‘ä»¬æ¥çœ‹ä¸‹ï¼š Text('RadialGradient'), Container( width: 100, height: 100, decoration: BoxDecoration( color: Colors.blue, gradient: RadialGradient( colors: [Colors.orange, Colors.black12, Colors.blue]), ), ), Text('SweepGradient'), Padding( padding: EdgeInsets.all(20), child: Container( width: 100, height: 100, decoration: BoxDecoration( color: Colors.blue, gradient: SweepGradient( colors: [Colors.orange, Colors.black12, Colors.blue]), ), ), ), Text('LinearGradient'), Padding( padding: EdgeInsets.all(20), child: Container( width: 100, height: 100, decoration: BoxDecoration( color: Colors.blue, gradient: LinearGradient( colors: [Colors.orange, Colors.black12, Colors.blue]), ), ), ), ç„¶åçœ‹ä¸‹åŸå‹å’ŒçŸ©å½¢çš„åº”ç”¨ï¼š Text('BoxShape.circle'), Padding( padding: EdgeInsets.all(20), child: Container( width: 100, height: 100, decoration: BoxDecoration( color: Colors.blue, shape: BoxShape.circle, ), ), ), Text('BoxShape.rectangle BorderRadius.all(Radius.circular(20))'), Padding( padding: EdgeInsets.all(20), child: Container( width: 100, height: 100, decoration: BoxDecoration( color: Colors.blue, borderRadius: BorderRadius.all(Radius.circular(20)), shape: BoxShape.rectangle, boxShadow: [ BoxShadow( offset: Offset(0, 10), color: Colors.black12, blurRadius: 10.0, spreadRadius: 3) ]), ), ), Text('DecorationImage and BoxShadow'), Padding( padding: EdgeInsets.all(20), child: Container( width: 100, height: 100, decoration: BoxDecoration( color: Colors.blue, borderRadius: BorderRadius.all(Radius.circular(20)), shape: BoxShape.rectangle, image: DecorationImage( image: AssetImage('img/fl.png'), fit: BoxFit.contain), boxShadow: [ BoxShadow( offset: Offset(-10, -10), ///å·¦ä¸Šè§’åç§» color: Colors.black12, //èƒŒæ™¯é¢œè‰² blurRadius: 2.0, //æ¨¡ç³Šåº¦ 2å°±æ˜¯2ä¸ªåƒç´ å˜æˆä¸€ä¸ªåƒç´  spreadRadius: 3), //å¤–æ‰©èŒƒå›´ BoxShadow( offset: Offset(10, 10), color: Colors.black12, blurRadius: 2.0, spreadRadius: 3) ]), ), ), å†çœ‹ä¸‹æœ‰å›¾ç‰‡çš„æƒ…å†µä¸‹å’Œchildï¼š Text('child and image and color'), Padding( padding: EdgeInsets.all(20), child: Container( width: 100, height: 100, decoration: BoxDecoration( color: Colors.red, borderRadius: BorderRadius.all(Radius.circular(20)), image: DecorationImage( image: AssetImage('img/fl.png'), fit: BoxFit.contain), ), child: FlutterLogo( size: 20, ), )) æœ€é•¿ç”¨çš„è®¾ç½®è¾¹æ¡†ï¼š Padding( padding: EdgeInsets.all(20), child: Container( width: 100, height: 100, decoration: BoxDecoration( color: Colors.red, border: Border.fromBorderSide(BorderSide( color: Colors.orange, width: 10, )), // borderRadius: BorderRadius.all(Radius.circular(20)), ), child: FlutterLogo( size: 20, ), )) æ•ˆæœé›†åˆ: "},"books/5.4transform.html":{"url":"books/5.4transform.html","title":"5.4 å˜æ¢ï¼ˆTransformï¼‰","keywords":"","body":"5.4 å˜æ¢ Transform Transformå¯ä»¥å®ç°å®¹å™¨çš„æ”¾å¤§ç¼©å°ã€ä½ç§»ã€åç§»ã€‚ã€‚ã€‚ æˆ‘ä»¬é¦–å…ˆçœ‹ä¸‹Transformçš„å‡ ä¸ªéå†æ„é€ å‡½æ•°ï¼Œå¼€å‘ä¸­æœ€å¸¸ç”¨çš„ã€‚ é¦–å…ˆæˆ‘ä»¬çœ‹ä¸‹Transform.rotateï¼Œæ—‹è½¬å®¹å™¨ï¼Œå±æ€§angleæ˜¯æ—‹è½¬åº¦æ•°ï¼Œå•ä½æ˜¯Ï€,2Ï€ä¸ºä¸€å‘¨ï¼Œå°±æ˜¯360Â°ã€‚ Transform.rotate( angle: _rotate, alignment: Alignment.center, child: Container( child: Text('Transform.rotate'), color: Colors.blue, ), ), Row( mainAxisAlignment: MainAxisAlignment.center, children: [ Text('æ—‹è½¬è§’åº¦ï¼š' + _rotate.toStringAsFixed(2)), CupertinoSlider( value: _rotate, max: pi * 2, min: 0, onChanged: (v) { setState(() { _rotate = v; }); }, ), ], ), åœ¨çœ‹ä¸‹æ”¾å¤§å’Œç¼©å° Transform.scale( scale: _scale, alignment: Alignment.center, child: Container( child: Text('Transform.scale'), color: Colors.blueAccent, ), ), Row( mainAxisAlignment: MainAxisAlignment.center, children: [ Text('æ”¾å¤§å€æ•°ï¼š' + _scale.toStringAsFixed(2)), CupertinoSlider( value: _scale, max: 3, min: 0.01, onChanged: (v) { setState(() { _scale = v; }); }, ), ], ), å¯ä»¥çœ‹åˆ°æ”¾å¤§å’Œç¼©å°æ–‡æœ¬å®¹å™¨ç›´æ¥è¶…å‡ºçˆ¶ç»„ä»¶äº†ï¼Œå·²ç»è¦†ç›–äº†ä¸‹è¾¹çš„sliderï¼ŒåŸå› Tranformå˜æ¢å‘ç”Ÿåœ¨layouté˜¶æ®µï¼Œä¸æ˜¯å¸ƒå±€é˜¶æ®µï¼Œå¯¼è‡´æ¸²æŸ“æ ‘å·²ç»å·²ç»åˆ›å»ºå®Œæˆï¼ŒåŸç”±çš„å¸ƒå±€ä¸å†æ”¹å˜ï¼Œå…¶å®è¿™æ˜¯æ€§èƒ½æ›´å¥½çš„å˜ç°ï¼Œåªæ˜¯å˜æ¢çš„æ—¶å€™æå‰è®¾ç½®å¥½å®¹å™¨å¤§å°å³å¯ã€‚ ç„¶åå†çœ‹ä¸‹ä½ç§»ï¼š Transform.translate( offset: _offset, child: Container( child: Text('Transform.translate'), color: Colors.blueAccent, ), ), Row( mainAxisAlignment: MainAxisAlignment.center, children: [ Text('ä½ç§»Xï¼š' + _offset.dx.toStringAsFixed(2)), CupertinoSlider( value: _offset.dx, max: 100, min: -100, onChanged: (v) { setState(() { _offset = Offset(v, _offset.dy); }); }, ), ], ), Row( mainAxisAlignment: MainAxisAlignment.center, children: [ Text('ä½ç§»Yï¼š' + _offset.dy.toStringAsFixed(2)), CupertinoSlider( value: _offset.dy, max: 100, min: -100, onChanged: (v) { setState(() { _offset = Offset(_offset.dx, v); }); }, ), ], ) é™¤äº†è¿™å‡ ä¸ªæƒ³è¦è‡ªå·±æ›´å¤æ‚çš„å˜æ¢ï¼Œåˆ™éœ€è¦ä½¿ç”¨Transform xè½´æ‰­æ›²pi/10ï¼Œyè½´æ—‹è½¬pi/20 Container( width: 50, height: 50, alignment: Alignment.center, child: Container( transform: new Matrix4.skew(pi / 10, 0), child: Text('Matrix4'), color: Colors.blueGrey, ), color: Colors.lightBlueAccent, ) å½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨Matrix4.identity()..scaleæ¥è¾¾åˆ°Transform.scaleçš„æ•ˆæœã€‚ é¦–å…ˆé€šè¿‡Matrix4.identity()åˆ›å»ºä¸€ä¸ªé»˜è®¤çš„çŸ©é˜µï¼Œé€šè¿‡setEntry(3, 2, 0.01)è®¾ç½®è§†è§’ï¼Œç„¶åå°±å¯ä»¥å¼€å§‹æ„‰å¿«çš„ç©è€äº†ã€‚ Transform( transform: new Matrix4.identity() ..setEntry(3, 2, 0.01) ..rotateX(_rotateX) ..rotateY(_rotateY), alignment: Alignment.center, child: Container( width: 100, height: 100, child: Text('Matrix4'), alignment: Alignment.center, color: Colors.lightBlueAccent, ), ), Row( mainAxisAlignment: MainAxisAlignment.center, children: [ Text('ç¿»è½¬Xï¼š' + _rotateX.toStringAsFixed(2)), CupertinoSlider( value: _rotateX, max: pi / 2, min: -pi / 2, onChanged: (v) { setState(() { _rotateX = v; }); }, ), ], ), Row( mainAxisAlignment: MainAxisAlignment.center, children: [ Text('ç¿»è½¬Yï¼š' + _rotateY.toStringAsFixed(2)), CupertinoSlider( value: _rotateY, max: pi / 2, min: -pi / 2, onChanged: (v) { setState(() { _rotateY = v; }); }, ), ], ), æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥å…³æ³¨åç»­ç« èŠ‚ï¼Œåç»­ä¼šè¯¦è§£çŸ©é˜µå‚æ•°ï¼Œå†æ¬¡ä¸è¿‡å¤šç´¯è¿°ã€‚ RotatedBox RotatedBoxå’Œä½¿ç”¨Transform.rotateæ•ˆæœä¸€æ ·ï¼Œä¸è¿‡è¯¥ç»„ä»¶çš„å˜æ¢æ˜¯åœ¨createRenderObjectä¸­å®ç°çš„ï¼Œæ‰€ä»¥æ€§èƒ½ä¸Šå’ŒTranformè¿˜æ˜¯æœ‰ç‚¹å·®å¼‚çš„ã€‚ RotatedBoxæ˜¯ä½¿ç”¨RenderRotatedBoxæ¥å®ç°æ—‹è½¬çš„ï¼Œä¼ å…¥çš„å‚æ•°intï¼Œ1æ˜¯90Â°ï¼Œ2æ˜¯180Â°ï¼Œ3æ˜¯270Â°ï¼Œ4æ˜¯360Â°ã€‚ ä½¿ç”¨èµ·æ¥æ›´ç®€å•; Container( color: Colors.orange, width: 120, height: 50, alignment: Alignment.center, child: RotatedBox( child: Container( width: 100, height: 100, child: Text('RotatedBox'), color: Colors.lightBlueAccent, ), quarterTurns: 1, ), ) å¯ä»¥å‘ç°ï¼Œå­ç»„ä»¶æ—‹è½¬çš„æ—¶å€™ï¼Œç»„ä»¶å¤§å°æ²¡å˜ï¼Œä¸€ç›´å‘†åœ¨çˆ¶ç»„ä»¶å†…éƒ¨ï¼Œè¿™ç‚¹æ­£æ˜¯å’ŒTransformä¸ä¸€è‡´çš„åœ°æ–¹ã€‚å¼€å‘çš„æ—¶å€™ï¼Œå¯ä»¥æ ¹æ®è¿™åŒºåˆ«æ¥æ‰å»ä½¿ç”¨å“ªä¸€ä¸ªåˆé€‚ã€‚ æ€»ç»“ æƒ³è¦åªæ˜¯ç®€å•ä½¿ç”¨åªéœ€è¦ä½¿ç”¨ä¾¿æ·å‡½æ•°å³å¯ï¼Œæƒ³è¦å¥½å¥½ç²¾ç»†ç©è€ï¼Œä½¿ç”¨Matrix4æ‰æ˜¯ç‹é“ï¼Œåç»­ç« èŠ‚ä¼šè‡ªå®šä¹‰ç»„ä»¶å®ç°å¥½ç©çš„åŠ¨ç”»ï¼Œæ¬¢è¿è¯»è€…æŒç»­å…³æ³¨å“¦ã€‚ "},"books/5.5container.html":{"url":"books/5.5container.html","title":"5.5 Containerå®¹å™¨","keywords":"","body":"5.5 Containerå®¹å™¨ Containerå°±æ˜¯H5çš„Div,iOSçš„viewã€‚é¦–å…ˆæˆ‘ä»¬çœ‹ä¸‹å±æ€§ï¼š Container({ Key key, this.alignment,//å­éƒ¨ä»¶çš„ä½ç½® this.padding,//å†…è¾¹æ¡† this.color,//é¢œè‰² this.decoration,//è£…é¥°å™¨ ä½äºchildåº•éƒ¨ this.foregroundDecoration,//å‰æ™¯è£…é¥°å™¨ å”¯ä¸€childä¸Šè¾¹ double width,//å®½åº¦ double height,//é«˜åº¦ BoxConstraints constraints,//çº¦æŸ this.margin,//å¤–è¾¹æ¡† this.transform,//å˜æ¢ this.child,//å­éƒ¨ä»¶ this.clipBehavior = Clip.none,//å‰ªåˆ‡ç±»å‹ }) çœ‹ä¸‹è¿™ä¸ªä¾‹å­ï¼Œè®¾ç½®äº†å‰æ™¯å’ŒèƒŒæ™¯çš„è£…é¥°å™¨ï¼Œå‰æ™¯çš„è£…é¥°å™¨ä¼šé®ç›–ä½childå’Œè£…é¥°å™¨decorationï¼Œç„¶åè¿›è¡Œäº†å›´ç»•zè¿›è¡Œæ—‹è½¬pi/10,å‰æ™¯è‰²ä½¿ç”¨äº†æ¸å˜è‰²ã€‚ Widget _body() { return Center( child: Column( mainAxisAlignment: MainAxisAlignment.center, crossAxisAlignment: CrossAxisAlignment.center, children: [ Container( clipBehavior: Clip.none, width: 200, height: 100, decoration: BoxDecoration( shape: BoxShape.rectangle, color: Colors.black12, borderRadius: BorderRadius.all(Radius.circular(10))), foregroundDecoration: BoxDecoration( borderRadius: BorderRadius.all(Radius.circular(50)), gradient: LinearGradient(colors: [Colors.orange, Colors.deepOrange])), transform: Matrix4.identity()..rotateZ(pi / 10), child: Text('container'), ) ], ), ); } æ•ˆæœæ˜¯è¿™æ ·å­çš„ï¼š åœ¨ç¨å¾®æ”¹ä¸‹ï¼Œå‰æ™¯è‰²å»æ‰ï¼Œå‰æ™¯å˜æˆèƒŒæ™¯è‰²ã€‚ Container( clipBehavior: Clip.none, width: 200, height: 100, decoration: BoxDecoration( borderRadius: BorderRadius.all(Radius.circular(10)), gradient: LinearGradient(colors: [Colors.orange, Colors.deepOrange])), transform: Matrix4.identity()..rotateZ(pi / 10), child: Text( 'www.flutter.fgyong.cn', style: TextStyle(fontSize: 18, color: Colors.white), ), alignment: Alignment.center, ) "},"books/5.6bars.html":{"url":"books/5.6bars.html","title":"5.6 Scaffoldã€TabBarã€åº•éƒ¨å¯¼èˆª","keywords":"","body":"5.6 è„šæ‰‹æ¶ Scaffoldå°±æ˜¯ä¸€ä¸ªå¤§å®¹å™¨ï¼Œé‡Œè¾¹åŒ…å«äº†å¾ˆå¤šçš„å…¶ä»–å®¹å™¨ï¼Œæ¯”å¦‚æŠ½å±‰ã€æ‚¬æµ®æŒ‰é’®ã€bottombarã€ç­‰ç­‰ã€‚ æˆ‘ä»¬å…ˆçœ‹ä¸€ä¸‹å±æ€§ Scaffold({ Key key, this.appBar, this.body, this.floatingActionButton, this.floatingActionButtonLocation, this.floatingActionButtonAnimator, this.persistentFooterButtons, this.drawer, this.endDrawer, this.bottomNavigationBar, this.bottomSheet, this.backgroundColor, this.resizeToAvoidBottomPadding, this.resizeToAvoidBottomInset, this.primary = true, this.drawerDragStartBehavior = DragStartBehavior.start, this.extendBody = false, this.extendBodyBehindAppBar = false, this.drawerScrimColor, this.drawerEdgeDragWidth, this.drawerEnableOpenDragGesture = true, this.endDrawerEnableOpenDragGesture = true, }) appBar é»˜è®¤å¯¼èˆªæ  bodyé¡µé¢çš„ä¸»ä½“ floatingActionButtonã€floatingActionButtonLocationã€floatingActionButtonAnimatoræ‚¬æµ®æŒ‰é’®å’Œå±æ€§ draweræŠ½å±‰ endDrawerå³ä¾§æŠ½å±‰ bottomNavigationBaråº•éƒ¨å¯¼èˆª bottomSheetåº•éƒ¨å·¥å…·æ  ä½äºå¯¼èˆªä¸Šé¢ backgroundColorèƒŒæ™¯é¢œè‰² resizeToAvoidBottomPaddingã€resizeToAvoidBottomInsetå½“Textfieldç¼–è¾‘çŠ¶æ€æ˜¯å¦è°ˆèµ·é¡µé¢ã€‚ drawerEnableOpenDragGestureæ‰‹åŠ¿æ‹–åŠ¨æ‰“å¼€æŠ½å±‰ ä¾‹å­ class _ScaffoldRouteState extends State { int _selectedIndex = 1; @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar( //å¯¼èˆªæ  title: Text(\"è„šæ‰‹æ¶ tabbar åº•éƒ¨å¯¼èˆª\"), actions: [ //å¯¼èˆªæ å³ä¾§èœå• IconButton(icon: Icon(Icons.share), onPressed: () {}), ], ), drawer: new Drawer( child: _drawer(), ), //æŠ½å±‰ bottomNavigationBar: _bottomNavigationBar(), // bottomSheet: _bottomNavigationBar(), floatingActionButton: FloatingActionButton( //æ‚¬æµ®æŒ‰é’® child: Icon(Icons.add), onPressed: _onAdd), resizeToAvoidBottomInset: true, //è°ˆèµ·é”®ç›˜åˆ™é¡µé¢ä¸Šç§» primary: true, //æ˜¯å¦å±•ç¤ºåœ¨é¡¶éƒ¨ä¸œèˆªæ é«˜åº¦ï¼Œtrueå ç”¨é«˜åº¦ï¼Œå¦åˆ™åªæ˜¯åœ¨çŠ¶æ€æ  body: Center( child: Column( mainAxisAlignment: MainAxisAlignment.center, children: [_bd2(), Text('click times: $_count'), TextField()], ), ), // extendBody: true, // extendBodyBehindAppBar: true, drawerEdgeDragWidth: 20, //æ‰‹åŠ¿å¤šåŠ¨åç§»é‡ é»˜è®¤20px drawerDragStartBehavior: DragStartBehavior.start, drawerEnableOpenDragGesture: true, //æ‰‹åŠ¿æ‹–åŠ¨æ‰“å¼€æŠ½å±‰ ); } BottomNavigationBar _bottomNavigationBar() { return BottomNavigationBar( // åº•éƒ¨å¯¼èˆª items: [ BottomNavigationBarItem(icon: Icon(Icons.home), title: Text('Home')), BottomNavigationBarItem( icon: Icon(Icons.business), title: Text('Business')), BottomNavigationBarItem( icon: Icon(Icons.school), title: Text('School')), ], currentIndex: _selectedIndex, fixedColor: Colors.blue, onTap: _onItemTapped, ); } int _count = 0; void _onItemTapped(int index) { setState(() { _selectedIndex = index; }); } void _onAdd() { setState(() { _count++; }); } Widget _bd2() { return OutlineButton.icon( onPressed: () { Navigator.pop(context); }, icon: Icon( Icons.close, size: 25, ), label: Text('pop ')); } Widget _drawer() { return Column( mainAxisAlignment: MainAxisAlignment.center, children: [ Text('ç‚¹å‡»æˆ‘è¿”å›ï¼Œå·¦æ»‘è¿”å›ï¼Œç‚¹å‡»é®ç½©è¿”å›'), _bd2(), ], ); } } æ•ˆæœï¼š AppBar AppBaræ˜¯ä¸€ä¸ªMaterialé£æ ¼çš„å¯¼èˆªæ ï¼Œé€šè¿‡å®ƒå¯ä»¥è®¾ç½®å¯¼èˆªæ æ ‡é¢˜ã€å¯¼èˆªæ èœå•ã€å¯¼èˆªæ åº•éƒ¨çš„Tabæ ‡é¢˜ç­‰,æˆ‘ä»¬çœ‹ä¸‹å±æ€§ AppBar({ ... this.leading,//å¯¼èˆªå·¦ä¾§éƒ¨ä»¶ this.automaticallyImplyLeading = true,//æ˜¯å¦é»˜è®¤è‡ªåŠ¨å®ç°leading æŒ‰é’® this.title,//æ ‡é¢˜éƒ¨ä»¶ this.actions,//å¯¼èˆªå·¦ä¾§èœå• this.bottom,//åº•éƒ¨å¯¼èˆªèœå• ä¸€èˆ¬ç”¨äºTabæ•°ç»„ this.toolbarOpacity = 1.0, this.bottomOpacity = 1.0, ... }) è‡ªå®šä¹‰ä¸€ä¸ªleadingï¼Œæ‰“å¼€æŠ½å±‰ï¼š Scaffold( key: _globalKey, appBar: AppBar( //å¯¼èˆªæ  title: Text(\"è„šæ‰‹æ¶ tabbar åº•éƒ¨å¯¼èˆª\"), actions: [ //å¯¼èˆªæ å³ä¾§èœå• IconButton(icon: Icon(Icons.share), onPressed: () {}), ], leading: IconButton( onPressed: () { _globalKey.currentState.openDrawer(); }, icon: Icon(Icons.open_with), ), ) } çœ‹æ•ˆæœäº† Tabbar Materialç»„ä»¶åº“ä¸­æä¾›äº†ä¸€ä¸ªTabBarç»„ä»¶ï¼Œå®ƒå¯ä»¥å¿«é€Ÿç”ŸæˆTabèœå•.æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­; void initState() { _tabController = TabController(vsync: this, length: 3); super.initState(); } @override Widget build(BuildContext context) { return Scaffold( key: _globalKey, appBar: AppBar( //å¯¼èˆªæ  title: Text(\"è„šæ‰‹æ¶ tabbar åº•éƒ¨å¯¼èˆª\"), actions: [ //å¯¼èˆªæ å³ä¾§èœå• IconButton(icon: Icon(Icons.share), onPressed: () {}), ], bottom: TabBar( controller: _tabController, tabs: [Text('ä»Šå¤©'), Text('æ˜å¤©'), Text('åå¤©')], ), )) } ä½¿ç”¨TabBarViewæ·»åŠ body å®ç°è”åŠ¨æ•ˆæœï¼š ... body: TabBarView( controller: _tabController, children: [ Container( alignment: Alignment.topCenter, child: Text('ä»Šå¤©æ¥äº†'), ), Container( alignment: Alignment.topCenter, child: Text('æ˜å¤©æ¥äº†'), ), Container( alignment: Alignment.topCenter, child: Text('åå¤©æ¥äº†'), ), ], ) ... æ•ˆæœï¼š FloatingActionButton FloatingActionButtonåœ¨åº•éƒ¨ï¼Œä¹Ÿå¯ä»¥åµŒå…¥åˆ°åº•éƒ¨å¯¼èˆªæ ä¸Šã€‚ bottomNavigationBar: BottomAppBar( color: Colors.white, shape: CircularNotchedRectangle(), // åº•éƒ¨å¯¼èˆªæ æ‰“ä¸€ä¸ªåœ†å½¢çš„æ´ child: Row( children: [ IconButton(icon: Icon(Icons.home)), SizedBox(), //ä¸­é—´ä½ç½®ç©ºå‡º IconButton(icon: Icon(Icons.scatter_plot)), ], mainAxisAlignment: MainAxisAlignment.spaceAround, //å‡åˆ†åº•éƒ¨å¯¼èˆªæ æ¨ªå‘ç©ºé—´ ), ), floatingActionButtonLocation: FloatingActionButtonLocation.centerDocked, floatingActionButton: FloatingActionButton( //æ‚¬æµ®æŒ‰é’® child: Icon(Icons.add), onPressed: _onAdd) æˆ–è€…åµŒå…¥å³ä¾§ ... [ IconButton(icon: Icon(Icons.home)), IconButton(icon: Icon(Icons.scatter_plot)), SizedBox(),//å³ä¾§æµå‡ºç©ºéš™ ] ... floatingActionButtonLocation: FloatingActionButtonLocation.endDocked, æˆ–è€…åœ¨é¡¶éƒ¨ ... [ IconButton(icon: Icon(Icons.home)), IconButton(icon: Icon(Icons.scatter_plot)), ] ... floatingActionButtonLocation: FloatingActionButtonLocation.miniStartTop, CircularNotchedRectangleåœ¨åº•éƒ¨æ‰“äº†ä¸€ä¸ªæ´ï¼Œç»§æ‰¿äº†NotchedShapeï¼Œå½“ç„¶æˆ‘ä»¬ä¹Ÿå¯ä»¥è‡ªå·±å®šä¹‰ä¸€ä¸ªå½¢çŠ¶ã€‚å½¢çŠ¶çš„ä½ç½®æ˜¯ç”±floatingActionButtonLocationæ¥ç¡®å®šçš„ï¼Œ æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±å®ç°ä¸€ä¸ªäº”è§’æ˜Ÿçš„å½¢çŠ¶. "},"books/5.7clip.html":{"url":"books/5.7clip.html","title":"5.7 å‰ªè£ï¼ˆClipï¼‰","keywords":"","body":"5.7 è£å‰ªClip Flutterä¸­æä¾›äº†ä¸€äº›è£å‰ªå‡½æ•°ï¼Œå¯ä»¥ç”¨äºéƒ¨ä»¶è¿›è¡Œè£å‰ªæ“ä½œã€‚ è£å‰ª æ•ˆæœ ClipOval å°†å­éƒ¨ä»¶å‰ªåˆ‡ä¸ºå†…è´´åœ†å‹ï¼Œå½“ä¸ºçŸ©å½¢æ—¶ï¼Œå†…åˆ‡åœ†ä¸ºæ¤­åœ† ClipRRect å‰ªåˆ‡ä¸ºåœ†è§’çŸ©å½¢ ClipRect å‰ªåˆ‡å­éƒ¨ä»¶åˆ°å®é™…å ç”¨çš„ä¸¾è¡Œå¤§å°(æº¢å‡ºéƒ¨åˆ†å‰ªåˆ‡æ‰) ä¾‹å­ï¼š ClipOval( child: Container( width: 100, height: 100, color: Colors.blue, ), ) æ•ˆæœï¼š Widget _body() { Widget avator = Container( width: 100, height: 100, color: Colors.blue, ); return Column( mainAxisAlignment: MainAxisAlignment.center, children: [ Text('ClipOval å‰ªåˆ‡åœ†å½¢'), ClipOval( child: avator, ), Text('ClipOval åœ†è§’'), ClipRRect( borderRadius: BorderRadius.all(Radius.circular(10)), child: avator, ), Text('ClipOval å‰ªåˆ‡ä¸ºåŸæ¥çš„1/4'), ClipRect( child: Align( alignment: Alignment.topRight, widthFactor: 0.5, heightFactor: 0.5, child: avator, ), ) ], ); } } æ•ˆæœï¼š 5.7.2 CustomClipper ClipPath({ Key key, this.clipper, this.clipBehavior = Clip.antiAlias, Widget child, }) ä½¿ç”¨ClipPathå¯ä»¥å®ç°å‰ªåˆ‡è·¯å¾„ï¼Œclipperæ˜¯å‰ªåˆ‡è·¯å¾„ï¼ŒæŠ½è±¡ç±»CustomClipperã€‚ CustomClipperæ˜¯å‰ªåˆ‡è‡ªå®šä¹‰çš„ç‰¹æ®Šå½¢çŠ¶çš„éƒ¨ä»¶ï¼Œæ˜¯æŠ½è±¡ç±»ï¼Œéœ€è¦è‡ªå·±å»å®ç°ã€‚æˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªç”»å‡ºç¬‘è„¸çš„ä¾‹å­ã€‚ BaseCustomPathæ˜¯å®ç°äº†å‰ªåˆ‡çš„è·¯å¾„ã€‚ class BaseCustomPath extends CustomClipper { @override Path getClip(Size size) { Path path = Path(); path.moveTo(size.width / 2, 40); path.lineTo(size.width - 15, size.height - 15); path.lineTo(15, size.height - 15); double p1 = 1 * pi; path.addArc(Rect.fromLTWH(30,30,30,30), p1, p1 + 2 * pi); path.lineTo(15, size.height - 15); path.addArc( Rect.fromLTWH(size.width - 30,30,30,30), p1, p1 + 2 * pi); path.lineTo(0, 0); return path; } @override bool shouldReclip(CustomClipper oldClipper) { return this != oldClipper; } } å¸ƒå±€ä»£ç ï¼š ClipPath( child: avator, clipper: BaseCustomPath(), ) æ•ˆæœï¼š è“è‰²çœ‹ç€ä¸æ˜¯å¾ˆå¥½çœ‹ï¼Œæˆ‘ä»¬æ¢ä¸€ä¸ªå›¾ç‰‡ã€‚ åŸå›¾æ˜¯ï¼š æ•ˆæœå›¾ï¼š è·Ÿå¤šå¥½ç©çš„å‰ªåˆ‡è·¯å¾„è‡ªå·±å»æ¢ç´¢å“¦ã€‚ "},"books/6.1scrollviewdesc.html":{"url":"books/6.1scrollviewdesc.html","title":"6.1ï¼šå¯æ»šåŠ¨ç»„ä»¶ç®€ä»‹","keywords":"","body":"5.7 æ·»åŠ æ´»æ€§æ¨¡æ¿ æ¯æ¬¡æ–°å»ºç±»æ€»æ˜¯éœ€è¦è‡ªå·±å•ç‹¬å†™ä¸€å¥—ç»§æ‰¿StateFulWidget,ç°åœ¨æ·»åŠ ä¸€ä¸ªæ´»æ¨¡æ¿(æš‚æ—¶ä¸çŸ¥é“æ€ä¹ˆå«æ‰å¥½)ï¼Œè¾¾åˆ°ä¸‹è¾¹çš„æ•ˆæœï¼š å¦‚ä½•æ·»åŠ  è¿›å…¥è®¾ç½®ç•Œé¢Preferences->Edie->Live Templates æ·»åŠ åˆ›å»ºæ–‡ä»¶æ¨¡æ¿ "},"books/6.2singlechildscrollview.html":{"url":"books/6.2singlechildscrollview.html","title":"6.2ï¼šSingleChildScrollView","keywords":"","body":"5.7 æ·»åŠ æ´»æ€§æ¨¡æ¿ SingleChildScrollView({ this.scrollDirection = Axis.vertical, this.reverse = false, bool primary, this.controller, this.child, }) scrollDirection:æ»šåŠ¨æ–¹å‘ reverse: å¦‚æœfalse,æ»šåŠ¨æ–¹å‘ä¸ºAxis.vertical,åˆ™ä»ä¸Šå‘ä¸‹æ»šåŠ¨ï¼Œå½“æ»šåŠ¨æ–¹å‘æ˜¯Axis.horizontal,æ»šåŠ¨æ–¹å‘æ˜¯ä»å·¦å‘å³ï¼Œå¦‚æœä¸ºtrue,åˆ™æ–¹å‘å’Œä¸Šè¾¹çš„ç›¸åã€‚ controllerï¼šç›‘æµ‹æ»‘åŠ¨çš„controller. child: å­éƒ¨ä»¶ physics: æ»šåŠ¨æ–¹å¼ï¼Œ ScrollPhysics æ•ˆæœ AlwaysScrollableScrollPhysics æ€»æ˜¯å…è®¸æ»šåŠ¨ BouncingScrollPhysics æ»šåŠ¨åˆ°è¾¹ç•Œæ‰‹åŠ¿ç»“æŸå¼€å§‹å›å¼¹ ClampingScrollPhysics è¶…å‡ºè¾¹ç•Œåœæ­¢æ»šåŠ¨ NeverScrollableScrollPhysics æ€»æ˜¯ä¸å…è®¸æ»šåŠ¨ SingleChildScrollViewåŠ è½½æ•°æ®ä¼šä¸€æ¬¡æ€§æŠŠæ•°æ®åŠ è½½å®Œï¼Œå½“åšä¸€ä¸ªé•¿åˆ—è¡¨çš„æ—¶å€™æœ€å¥½ä½¿ç”¨Listç±»å‹çš„ï¼Œæ•°æ®å»¶è¿ŸåŠ è½½ï¼Œé‚£æ ·æ€§èƒ½æ›´å¥½ã€‚ ä¾‹å­ï¼š class _BaseSingleChildScrollViewState extends State { @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar( title: Text('SingleChildScrollView'), ), body: _body(), ); } Widget _body() { List list = new List(); for (int i = 0; i "},"books/6.3listview.html":{"url":"books/6.3listview.html","title":"6.3ï¼šListView","keywords":"","body":"6.3 Listview ListViewå’ŒiOS TableViewä¸€æ ·ï¼Œå¯ä»¥æ»šåŠ¨å’Œå»¶è¿ŸåŠ è½½çš„é•¿åˆ—è¡¨ã€‚æ€§èƒ½é«˜ã€‚ ListView({ Axis scrollDirection = Axis.vertical, bool reverse = false, ScrollController controller, bool primary, ScrollPhysics physics, bool shrinkWrap = false, this.itemExtent, bool addAutomaticKeepAlives = true, bool addRepaintBoundaries = true, bool addSemanticIndexes = true, double cacheExtent, List children = const [], int semanticChildCount, DragStartBehavior dragStartBehavior = DragStartBehavior.start, ScrollViewKeyboardDismissBehavior keyboardDismissBehavior = ScrollViewKeyboardDismissBehavior.manual, }) shrinkWrap: æ˜¯å¦æ ¹æ®itemCountæ¥è®¡ç®—å­æ§ä»¶æ•°é‡ itemExtent: å¦‚æœè®¾ç½®ï¼Œåˆ™æŠ¤å£«å­æ§ä»¶å¤§å°ï¼Œå¼ºåˆ¶è®¾ç½®çš„æ•°å€¼ã€‚ addAutomaticKeepAlives: æ˜¯å¦è‡ªåŠ¨ä¿å­˜çŠ¶æ€ï¼Œé»˜è®¤æ˜¯true.å½“ä¸ºtrue,å­éƒ¨ä»¶ä½¿ç”¨AutomaticKeepAliveæ¥åŒ…è£¹ï¼Œå½“å­éƒ¨ä»¶åˆ’å‡ºå±å¹•å®ƒä¹Ÿä¸ä¼šè¢«å›æ”¶ï¼Œå®ƒä½¿ç”¨KeepAliveNotificationæ¥ä¿å­˜çŠ¶æ€ã€‚å¦‚æœç”¨æˆ·è‡ªå·±ç®¡ç†çŠ¶æ€åˆ™è®¾ç½®ä¸ºfalse addRepaintBoundaries:æ˜¯å¦è¢«RepaintBoundaryåŒ…è£¹ï¼Œ é€šå¸¸ã€‚å°†æ»šåŠ¨å®¹å™¨å†…çš„å­çº§åŒ…è£¹åœ¨RepaintBoundaryï¼Œå› æ­¤åˆ—è¡¨åœ¨æ»šåŠ¨æ—¶ä¸éœ€è¦é‡ç»˜ã€‚å¦‚æœå­çº§æ˜“äºé‡ç»˜(å¦‚ çº¯è‰²å¿«ã€æ–‡æœ¬ç‰‡æ®µ)ï¼Œä¸æ·»åŠ é‡ç»˜è¾¹ç•Œå¯èƒ½ä¼šæ›´æœ‰æ•ˆï¼Œå¹¶åœ¨æ»šåŠ¨ä¸­ç®€å•çš„é‡ç»˜å­çº§ã€‚ addSemanticIndexes: æ˜¯å¦åœ¨IndexedSemanticsåŒ…è£¹æ¯ä¸ªå­éƒ¨ä»¶ï¼Œå¹³æ—¶æ»šåŠ¨æ—¶å­éƒ¨ä»¶ä¸è®¸ä½¿ç”¨è¯­ä¹‰ç´¢å¼•å·²ç”Ÿæˆæ­£ç¡®çš„ç´¢å¼•ä»…ä»…åœ¨IndexedChildSemanticså°éƒ¨ä»¶æä¾›çš„æ—¶å€™ã€‚ ä¸Šè¾¹å‡ ä¸ªå±æ€§æ˜¯ListViewå…±åŒæ‰€æœ‰ï¼Œä»–ä»¬æ•ˆæœä¸€æ ·çš„ é»˜è®¤æ„é€ å‡½æ•° é»˜è®¤çš„æ„é€ å‡½æ•°æœ‰childdrenå‚æ•°ï¼Œå®ƒæ¥å—ä¸€ä¸ªWidgetæ•°ç»„ã€‚è¿™ç§æ–¹å¼é€‚åˆå°‘é‡å­éƒ¨ä»¶ï¼Œå› ä¸ºè¿™ç§æ–¹å¼ï¼Œä¼šä¸€æ¬¡æ€§åˆ›å»ºæ‰€æœ‰å­éƒ¨ä»¶ï¼Œè€Œä¸æ˜¯æ‡’åŠ è½½(å½“ä½¿ç”¨çš„æ—¶å€™å†åˆ›å»º)ï¼Œå¯¼è‡´æ€§èƒ½ä½ä¸‹ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤æ„é€ å‡½æ•°çš„ListViewæ²¡æœ‰ä½¿ç”¨Sliverçš„æ‡’åŠ è½½æ¨¡å‹çš„ï¼Œå®é™…è¿™ç§é—®é¢˜å’ŒSingleChildScrollView+Columnçš„æ–¹å¼æœ¬è´¨ä¸€æ ·ã€‚ ä¾‹å­ï¼š Widget _body() { List list = new List(); for (int i = 0; i æ¬¡æ–¹å¼ä½¿ç”¨ç»„ä»¶å°‘çš„æƒ…å†µä¸‹ï¼Œå¦åˆ™å¯èƒ½ä¼šå¡ ListView.build ListView.buildé€‚åˆåˆ—è¡¨è¾ƒå¤šæˆ–æ— çº¿çš„æƒ…å†µï¼Œå› ä¸ºåªæœ‰å­ç»„ä»¶çœŸæ­£æ˜¾ç¤ºæ‰è¢«åˆ›å»ºï¼Œæ€§èƒ½æ›´å¥½ã€‚ ListView.builder({ ... @required IndexedWidgetBuilder itemBuilder, int itemCount, ... }) IndexedWidgetBuilderå­éƒ¨ä»¶åˆ›å»ºå‡½æ•°ï¼Œå½“å­éƒ¨ä»¶å°†è¦æ˜¾ç¤ºè°ƒç”¨è¯¥å‡½æ•°ã€‚itemCountå­éƒ¨ä»¶æ•°é‡ï¼Œä¸è®¾ç½®åˆ™ä¸ºæ— é™å¤§ã€‚å½“å­éƒ¨ä»¶æ»šåŠ¨é™¤å±å¹•åˆ™ä¼šè¢«é”€æ¯ã€‚ Widget _body2() { return ListView.builder( itemExtent: 80, itemBuilder: _buildCell, ); } Widget _buildCell(ctx, int index) { return TestContainer( title: index.toString(), ); } class TestContainer extends StatefulWidget { final String title; TestContainer({Key key, this.title}) : super(key: key); @override _TestContainerState createState() => _TestContainerState(); } class _TestContainerState extends State { @override Widget build(BuildContext context) { return _body(); } Widget _body() { return Container( child: Text(widget.title ?? '123'), ); } @override void dispose() { print(widget.title + ' dispose'); super.dispose(); } } ListView.separated ListView.separatedæ˜¯å¯ä»¥åœ¨åˆ—è¡¨å­éƒ¨ä»¶ä¸­é—´ç”Ÿæˆåˆ†éš”å­éƒ¨ä»¶ï¼Œå‚æ•°separatorBuilderæ˜¯åˆ†éš”å›è°ƒå‡½æ•°ï¼ŒåŸç†å’Œä¸Šé¢çš„itemBuilderä¸€è‡´ã€‚ ä¾‹å­ï¼šæ¯è¡Œçš„ä¸‹è¾¹æ·»åŠ ä¸€ä¸ªåˆ†å‰²çº¿ï¼Œé¢œè‰²ä¸ºç°è‰²ã€‚ Widget _body3() { return ListView.separated( itemBuilder: _buildCell, separatorBuilder: _buildSeparatedCell, itemCount: 30, ); } Widget _buildCell(ctx, int index) { return TestContainer( title: index.toString(), ); } Widget _buildSeparatedCell(ctx, int index) { return Divider( height: 2, thickness: 0.5, indent: 10, endIndent: 10, color: Colors.black45, ); } åŠ è½½æ›´å¤šæ•°æ® ä»£ç æ¯”è¾ƒç®€å•ï¼Œä¸€æ¬¡æ€§åŠ è½½10æ¡æ•°æ®ï¼ŒåŠ è½½åˆ°50æ¡æ•°æ®ï¼Œåœæ­¢åŠ è½½ã€‚ ä»£ç ï¼š Widget _body3() { return ListView.separated( itemBuilder: _buildCell, separatorBuilder: _buildSeparatedCell, itemCount: list.length, ); } Widget _buildCell(ctx, int index) { if (index = 50) { return Container( alignment: Alignment.center, height: 30, child: Row( mainAxisAlignment: MainAxisAlignment.center, children: [Icon(Icons.done), Text('æ²¡æœ‰æ›´å¤šæ•°æ®äº†')], ), ); } else { _getMoreData(); //åŠ è½½æ•°æ® return Container( alignment: Alignment.center, child: RefreshProgressIndicator(), ); } } Widget _buildSeparatedCell(ctx, int index) { return Divider( height: 2, thickness: 0.5, indent: 10, endIndent: 10, color: index % 2 == 0 ? Colors.blue : Colors.orange, ); } List list; @override void initState() { list = new List(); _getMoreData(); super.initState(); } void _getMoreData() async { await Future.delayed(Duration(milliseconds: 2000)); for (int i = 0; i æ•ˆæœï¼š å›ºå®šå¤´éƒ¨ä¿¡æ¯ å¹³æ—¶å¼€å‘æœ‰éœ€æ±‚å›ºå®šå¤´éƒ¨å…³é”®ä¿¡æ¯ï¼Œåªåˆ·æ–°åº•éƒ¨æ•°æ®çš„ æ—¶å€™ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥å®ç°ä¸€ä¸ªã€‚ Widget _body4() { return Column( children: [ Container( height: 30, width: MediaQuery.of(context).size.width, alignment: Alignment.center, decoration: BoxDecoration( gradient: LinearGradient( colors: [Colors.lightBlueAccent, Colors.orange])), child: Text('æˆ‘æ˜¯å¤´éƒ¨ä¿¡æ¯ï¼Œå¯ä»¥è‡ªå®šä¹‰çš„'), ), Expanded( child: ListView.separated( itemBuilder: _buildCell, separatorBuilder: _buildSeparatedCell, itemCount: list.length, ), ) ], ); } æ€»ç»“ ListViewæ˜¯ä¸€ä¸ªæ€§èƒ½é«˜çš„æ»šåŠ¨åˆ—è¡¨ï¼Œé•¿åˆ—è¡¨é¦–å…ˆè€ƒè™‘è¯¥éƒ¨ä»¶ï¼Œä¸åŒçš„æ„é€ å‡½æ•°åº”å¯¹äº†ä¸åŒçš„æ¨¡å‹ï¼Œè¿˜æœ‰æ›´å¤šçš„ä¾¿æ·æ„é€ å‡½æ•°ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥çœ‹ä¸‹å®˜æ–¹æ–‡æ¡£ã€‚ "},"books/6.4gridview.html":{"url":"books/6.4gridview.html","title":"6.4ï¼šGridView","keywords":"","body":"6.4 GridView GridViewæ˜¯ä¸€ä¸ªæ„æˆäºŒç»´ç½‘æ ¼çš„åˆ—è¡¨ï¼Œå…ˆçœ‹ä¸‹å®ƒçš„å±æ€§ï¼š GridView({ Axis scrollDirection = Axis.vertical, bool reverse = false, ScrollController controller, bool primary, ScrollPhysics physics, bool shrinkWrap = false, EdgeInsetsGeometry padding, @required SliverGridDelegate gridDelegate, //æ§åˆ¶å­widget layoutçš„å§”æ‰˜ bool addAutomaticKeepAlives = true, bool addRepaintBoundaries = true, double cacheExtent, List children = const [], }) å¤§å¤šæ•°å±æ€§åœ¨ListViewå·²ç»ä»‹ç»è¿‡äº†ï¼Œåœ¨æ­¤ä¸é‡å¤ä»‹ç»äº†ï¼Œå¦‚æœ‰ç–‘é—®ï¼Œè¯·æŸ¥çœ‹ListVIewç« èŠ‚ï¼Œè¿™è¾¹æ˜¯å¤šäº†ä¸€ä¸ªSliverGridDelegateï¼Œè¿™æ˜¯Grivdçš„layouté…ç½®å‚æ•°ï¼Œæœ‰äº†å®ƒï¼Œå­ç»„ä»¶æ‰æœ‰æ’åˆ—è§„åˆ™ã€‚ SliverGridDelegateæ˜¯ä¸€ä¸ªæŠ½è±¡ç±»ï¼Œå®šä¹‰äº†DridView layoutçš„ç›¸å…³æ¥å£ï¼Œå­ç±»éœ€è¦å®ç°ä»–ä»¬çš„å…·ä½“çš„å¸ƒå±€ç®—æ³•ã€‚å®˜æ–¹æä¾›äº†å·²ç»å®ç°å¥½äº†çš„ç±»ï¼Œåˆ†åˆ«æ˜¯SliverGridDelegateWithFixedCrossAxisCountå’ŒSliverGridDelegateWithMaxCrossAxisExtent,ä¸‹è¾¹æˆ‘ä»¬åˆ†åˆ«å°±ä»‹ç»ä¸€ä¸ªä¸‹ä»–ä»¬ã€‚ SliverGridDelegateWithFixedCrossAxisCount è¯¥å­ç±»å®ç°äº†ä¸€ä¸ªæ¨ªè½´ä¸ºå›ºå®šå…ƒç´ æ•°é‡çš„å¸ƒå±€ç®—æ³•ï¼Œçœ‹ä¸‹å±æ€§; SliverGridDelegateWithFixedCrossAxisCount({ @required double crossAxisCount, double mainAxisSpacing = 0.0, double crossAxisSpacing = 0.0, double childAspectRatio = 1.0, }) å±æ€§ å«ä¹‰ crossAxisCount æ¨ªè½´æ’åˆ—ä¸ªæ•° mainAxisSpacing ä¸»è½´é—´éš™ é»˜è®¤æ˜¯0.0 crossAxisSpacing å‰¯è½´é—´éš™ é»˜è®¤æ˜¯0.0 childAspectRatio å­éƒ¨ä»¶æ¯”ä¾‹ é»˜è®¤æ˜¯1.0 çœ‹ä¸‹ä¾‹å­;æˆ‘ä»¬å®ç°äº†æ¨ªè½´æ’åˆ—4ä¸ªï¼Œä¸»è½´å’Œå‰¯è½´é—´éš™æ˜¯10åƒç´ ï¼Œæ¯”ä¾‹æ˜¯0.5. List list = new List(); for (int i = 0; i æ•ˆæœï¼š SliverGridDelegateWithMaxCrossAxisExtent SliverGridDelegateWithMaxCrossAxisExtent({ @required this.maxCrossAxisExtent, this.mainAxisSpacing = 0.0, this.crossAxisSpacing = 0.0, this.childAspectRatio = 1.0, }) å’Œä¸Šè¾¹ä¸ä¸€æ ·çš„å°±æ˜¯maxCrossAxisExtentæœ€å¤§å®½åº¦ï¼Œå…¶ä»–å±æ€§å®Œå…¨ä¸€è‡´ã€‚å¦‚æœæ¨ªè½´ä¸º500,å‚æ•°maxCrossAxisExtentä¸º150 ,é‚£ä¹ˆæœ€ç»ˆé•¿åº¦ä¸º125.å› ä¸ºæ¯ä¸ªéƒ¨ä»¶æ˜¯å¹³å‡åˆ’åˆ†çš„ã€‚ ä¾‹å­ï¼š List list = new List(); for (int i = 0; i æ•ˆæœï¼š GridView.builder å±æ€§ï¼š GridView.builder({ ... @required this.gridDelegate, @required IndexedWidgetBuilder itemBuilder, int itemCount, ... }) å±æ€§ å«ä¹‰ gridDelegate ä¸Šæ–‡å·²ä»‹ç»ï¼Œå¸ƒå±€ç®—æ³•å®ç° itemBuilder å­éƒ¨ä»¶æ˜¾ç¤ºå›è°ƒï¼Œå½“å¿«è¦æ˜¾ç¤ºæ‰ä¼šå›è°ƒï¼Œæ»šå‡ºå±å¹•åˆ™é”€æ¯ï¼Œä¹Ÿä¼šå†æ¬¡å›è°ƒè¯¥å‡½æ•° itemCount å­éƒ¨ä»¶æ•°é‡,é»˜è®¤æ— é™åˆ¶ å®ä¾‹ï¼š Widget _body() { return GridView.builder( gridDelegate: SliverGridDelegateWithMaxCrossAxisExtent( // crossAxisCount: 4, maxCrossAxisExtent: MediaQuery.of(context).size.width / 4 + 10.0, mainAxisSpacing: 10, crossAxisSpacing: 10, childAspectRatio: 2), itemBuilder: _buildCell, itemCount: _list.length, semanticChildCount: 13, ); } List _list; Widget _buildCell(BuildContext context, int index) { if (index æ•ˆæœï¼š GridViewå­å…ƒç´ é»˜è®¤å¤§å°ä¸€è‡´çš„ï¼Œå½“ç„¶è‡ªå·±å¯ä»¥é‡å†™SliverGridDelegateï¼Œä¹Ÿå¯ä»¥åœ¨pubä¸Šä½¿ç”¨ä¸‰æ–¹å†™å¥½çš„åº“,æ¯”å¦‚ï¼šflutter_layout_gridã€flutter_staggered_grid_viewç­‰ç­‰ã€‚ "},"books/6.5customscrollview.html":{"url":"books/6.5customscrollview.html","title":"6.5ï¼šCustomScrollView","keywords":"","body":"6.5 è‡ªå®šä¹‰æ»‘åŠ¨åˆ—è¡¨ CustomScrollView CustomScrollViewæ˜¯ä¸€ä¸ªå¯ä»¥è‡ªå®šä¹‰çš„æ»šåŠ¨åˆ—è¡¨ï¼Œæ”¯æŒä½¿ç”¨Sliverçš„è‡ªå®šä¹‰æ»šåŠ¨æ•ˆæœç»„ä»¶ï¼Œå¯ä»¥åŒæ—¶åŒ…å«å¤šç§æ»šåŠ¨æ¨¡å‹ï¼Œä¾‹å¦‚ï¼šå¯ä»¥è®¾ç½®é¡¶éƒ¨ä¸€ä¸ªDridViewï¼Œåº•éƒ¨ä¸€ä¸ªListView,è®©ä»–ä»¬è¾¾æˆä¸€è‡´çš„æ»šåŠ¨æ•ˆæœï¼Œä¸ä¼šå‡ºç°æ»‘åŠ¨ä¸Šè¾¹ã€ä¸‹è¾¹æ²¡åŠ¨çš„æƒ…å†µã€‚Flutteræä¾›äº†ä¸€äº›æ»šåŠ¨ç»„ä»¶ï¼Œæ¯”å¦‚SliverLitã€SliverGridViewç­‰ç­‰ï¼Œå®é™…Sliverç‰ˆæœ¬çš„æ»šåŠ¨æ¨¡å‹å’Œå…¶ä»–çš„åŒºåˆ«å°±æ˜¯ï¼Œå‰è€…ä¸åŒ…å«æ»šåŠ¨æ¨¡å‹ï¼Œè€Œåè€…åŒ…å«æ»šåŠ¨æ¨¡å‹ï¼Œæ­£æ˜¯å¦‚æ­¤æ‰èƒ½å¤šä¸ªSliveræ¨¡å‹ç»„åˆåœ¨ä¸€èµ·å®ç°ä¸€ä¸ªå¤§çš„æ»šåŠ¨æ¨¡å‹ã€‚ const CustomScrollView({ ... this.slivers = const [], ... }) å±æ€§sliversæ˜¯CustomScrollViewçš„å­ç»„ä»¶ã€‚ å®ç°ä¸€ä¸ªSliverList ä¾‹å­ï¼š Widget _body() { List list = new List(); for (int i = 0; i [ SliverList( delegate: SliverChildListDelegate(list), ) ], ), ); } å®ç° é¡¶éƒ¨ä¸€ä¸ªSliverAppBaræ¥å±•ç¤ºå¤´éƒ¨çš„å¤´åƒæˆ–è€…banneræ»šåŠ¨å›¾,å’ŒAppbarä¸€æ ·ï¼Œä¸è¿‡å‰è€…å¯ä»¥é›†æˆåˆ°CustomScrollViewä¸­å»ã€‚ä¸­é—´ä¸€ä¸ªæ•°æ®åˆ—è¡¨ï¼Œå¾€ä¸‹æ˜¯ä¸€ä¸ªPageViewï¼Œä¸€èˆ¬ç”¨äºä¸­é—´å·®çš„å¹¿å‘Šæˆ–è€…å…¶ä»–çš„bannerï¼Œåº•éƒ¨ç»§ç»­å…¶ä»–çš„æ ·å¼çš„æ»‘åŠ¨åˆ—è¡¨ã€‚ class BaseCustomScrollView extends StatefulWidget { @override _BaseCustomScrollViewState createState() => _BaseCustomScrollViewState(); } class _BaseCustomScrollViewState extends State { @override Widget build(BuildContext context) { return Scaffold( body: _body(), ); } Widget _body() { List list = new List(); for (int i = 0; i [ SliverAppBar( expandedHeight: 300, flexibleSpace: FlexibleSpaceBar( title: Text('flexibleSpace'), collapseMode: CollapseMode.parallax, //æ¶ˆå¤±æ•ˆæœ stretchModes: [StretchMode.fadeTitle], //æ¶ˆå¤±æ•ˆæœ background: PageView( children: [ Container( // color: Colors.orange, alignment: Alignment.center, child: Image.asset('img/2.png'), ), Container( alignment: Alignment.center, child: Image.asset('img/2.png'), ), Container( alignment: Alignment.center, // color: Colors.orange, child: Image.asset('img/2.png'), ), Container( alignment: Alignment.center, child: Image.asset('img/2.png'), ), ], ), centerTitle: true, ), // title: Text('12'), pinned: true, // snap: true, ), SliverList( delegate: SliverChildListDelegate(list), ), SliverGrid( delegate: SliverChildBuilderDelegate(_buildCell, childCount: list.length), gridDelegate: SliverGridDelegateWithMaxCrossAxisExtent( maxCrossAxisExtent: 200), ), SliverToBoxAdapter( child: Container( height: 200, width: 200, child: PageView( children: [ Container( height: 50, width: 200, alignment: Alignment.center, child: Text( 'ä¸­é—´æ’ç”»ï¼Œå¯ä»¥å·¦å³æ»‘åŠ¨çš„å“¦ï¼ï¼ï¼', style: TextStyle(fontSize: 30), ), decoration: BoxDecoration( gradient: LinearGradient( colors: [Colors.deepOrangeAccent, Colors.orange])), ), Container( height: 50, width: 200, alignment: Alignment.center, child: Text( 'ä¸­é—´æ’ç”»ï¼Œå¯ä»¥å·¦å³æ»‘åŠ¨çš„å“¦ï¼ï¼ï¼', style: TextStyle(fontSize: 30), ), decoration: BoxDecoration( gradient: LinearGradient( colors: [Colors.deepOrangeAccent, Colors.orange])), ) ], ), ), ), SliverGrid( delegate: SliverChildBuilderDelegate(_buildCell, childCount: list.length), gridDelegate: SliverGridDelegateWithFixedCrossAxisCount(crossAxisCount: 2), ), ], ), ); } Widget _buildCell(ctx, int index) { if (index = 30) { return Container( alignment: Alignment.center, height: 80, child: Row( mainAxisAlignment: MainAxisAlignment.center, children: [Icon(Icons.done), Text('æ²¡æœ‰æ›´å¤šæ•°æ®äº†')], ), ); } else { _getMoreData(); //åŠ è½½æ•°æ® return Container( alignment: Alignment.center, child: RefreshProgressIndicator(), ); } } List list; @override void initState() { list = new List(); _getMoreData(); super.initState(); } void _getMoreData() async { await Future.delayed(Duration(milliseconds: 2000)); setState(() { for (int i = 0; i "},"books/6.6scrollviewreason.html":{"url":"books/6.6scrollviewreason.html","title":"6.6ï¼šæ»šåŠ¨ç›‘å¬åŠæ§åˆ¶ï¼ˆScrollControllerï¼‰","keywords":"","body":"6.6 æ»šåŠ¨åŠç›‘å¬æ§åˆ¶ æœ¬ç« è®²è§£äº†å¤šä¸ªæ»‘åŠ¨ç»„ä»¶åŒ…æ‹¬SingChildScrollviewã€ListViewã€GridViewã€CustomScrollViewï¼Œä»–ä»¬éƒ½æœ‰ä¸€ä¸ªå±æ€§controller,ç›‘å¬æ»šåŠ¨æ§åˆ¶å™¨ï¼Œæˆ‘ä»¬ä»¥SingChildScrollviewä¸ºä¾‹ï¼Œè®²è§£å…·ä½“çš„ç”¨æ³•ã€‚ 6.6.1 ScrollController æ„é€ å‡½æ•°å¾ˆç®€å•ï¼Œ ScrollController({ double initialScrollOffset = 0.0, //åˆå§‹æ»šåŠ¨ä½ç½® this.keepScrollOffset = true,//æ˜¯å¦ä¿å­˜æ»šåŠ¨ä½ç½® ... }) |å±æ€§|ä½¿ç”¨æ–¹æ³•| |ï¼š-ï¼š|ï¼š-ï¼š| |offset|æ»šåŠ¨ç»„ä»¶åˆ°å½“å‰ä½ç½®| |jumpTo(double offset)ã€animateTo(double offset|å‰è€…ç›´æ¥è·³è½¬ï¼Œåè€…é™„å¸¦åŠ¨ç”»æ•ˆæœ| ç›‘å¬æ»šåŠ¨ ScrollControllerçš„ç»§æ‰¿é“¾æ˜¯è¿™æ ·å­çš„ ScrollController,æ‰€ä»¥å¯ä»¥ç›‘å¬ã€‚ Widget _body() { return CupertinoScrollbar( child: ListView.builder( itemBuilder: _child, controller: _controller, ), ); } Widget _child(ctx, int index) { return Container( height: 80, color: Colors.primaries[index % Colors.primaries.length], ); } ScrollController _controller; @override void initState() { _controller = new ScrollController() ..addListener(() { print('${_controller.offset}'); }); super.initState(); } æ•ˆæœæ˜¯ï¼š ç›‘å¬æ»šåŠ¨é•¿åº¦å’Œæ¯”ä¾‹ Flutter Widgetæ ‘ä¸­å­Widgetå¯ä»¥é€šè¿‡å‘é€é€šçŸ¥ï¼ˆNotificationï¼‰ä¸çˆ¶(åŒ…æ‹¬ç¥–å…ˆ)Widgeté€šä¿¡ã€‚çˆ¶çº§ç»„ä»¶å¯ä»¥é€šè¿‡NotificationListenerç»„ä»¶æ¥ç›‘å¬è‡ªå·±å…³æ³¨çš„é€šçŸ¥ã€‚ å¯æ»šåŠ¨ç»„ä»¶åœ¨æ»šåŠ¨æ—¶ä¼šå‘é€ScrollNotificationç±»å‹çš„é€šçŸ¥ï¼ŒScrollBaræ­£æ˜¯é€šè¿‡ç›‘å¬æ»šåŠ¨é€šçŸ¥æ¥å®ç°çš„ã€‚é€šè¿‡NotificationListenerç›‘å¬æ»šåŠ¨äº‹ä»¶å’Œé€šè¿‡ScrollControlleræœ‰ä¸¤ä¸ªä¸»è¦çš„ä¸åŒï¼š é€šè¿‡NotificationListenerå¯ä»¥åœ¨ä»å¯æ»šåŠ¨ç»„ä»¶åˆ°widgetæ ‘æ ¹ä¹‹é—´ä»»æ„ä½ç½®éƒ½èƒ½ç›‘å¬ã€‚è€ŒScrollControlleråªèƒ½å’Œå…·ä½“çš„å¯æ»šåŠ¨ç»„ä»¶å…³è”åæ‰å¯ä»¥ã€‚ æ”¶åˆ°æ»šåŠ¨äº‹ä»¶åè·å¾—çš„ä¿¡æ¯ä¸åŒï¼›NotificationListeneråœ¨æ”¶åˆ°æ»šåŠ¨äº‹ä»¶æ—¶ï¼Œé€šçŸ¥ä¸­ä¼šæºå¸¦å½“å‰æ»šåŠ¨ä½ç½®å’ŒViewPortçš„ä¸€äº›ä¿¡æ¯ï¼Œè€ŒScrollControlleråªèƒ½è·å–å½“å‰æ»šåŠ¨ä½ç½®ã€‚ æ¥å—æ»šåŠ¨æ—¶é—´å‚æ•°ç±»å‹æ˜¯ScrollNotification,ä»–åŒ…å«å±æ€§metrics,è¯¥å±æ€§æè¿°æ»šåŠ¨çš„èŒƒå›´å’Œå¤§å° å±æ€§ å«ä¹‰ maxScrollExtent æ»šåŠ¨çš„æœ€å¤§è·ç¦» pixels æ»šåŠ¨çš„å½“å‰ä½ç½® viewportDimension æ»šåŠ¨çš„æœ€å¤§è·ç¦» axisDirection æ»šåŠ¨çš„æ–¹å‘ outOfRange æ˜¯å¦å·²è¶…å‡ºèŒƒå›´ï¼Œè¶…å‡ºæœ‰æ•ˆåŒºåŸŸä¼šè§¦å‘ atEdge ç°åœ¨åœ¨åº•éƒ¨æˆ–è€…é¡¶éƒ¨ extentBefore åˆ’å‡ºé¡¶éƒ¨çš„èŒƒå›´ extentAfter åˆ’å‡ºåº•éƒ¨çš„è·ç¦» æ›´å¤šå±æ€§è§flutter API ä¸‹é¢æˆ‘ä»¬çœ‹ä¸€ä¸ªç›‘å¬æ»‘åŠ¨ç™¾åˆ†æ¯”ä¾‹å­ï¼š Widget _body() { return Stack( alignment: Alignment.center, children: [ CupertinoScrollbar( child: NotificationListener( onNotification: (ScrollNotification no) { var v = no.metrics.pixels / no.metrics.maxScrollExtent; setState(() { _value = v * 100; }); return true; }, child: ListView.builder( itemBuilder: _child, controller: _controller, itemCount: 50, ), ), ), CircleAvatar( radius: 40, child: Container( // color: Colors.black45, child: Text('${_value.toStringAsFixed(2)}%'), ), ) ], ); } "},"books/7.1willpop.html":{"url":"books/7.1willpop.html","title":"7.1ï¼šå¯¼èˆªè¿”å›æ‹¦æˆªï¼ˆWillPopScopeï¼‰","keywords":"","body":"7.1 å¯¼èˆªè¿”å›æ‹¦æˆªï¼ˆWillPopScopeï¼‰ å¹³æ—¶ä¸ºé˜²æ­¢ç”¨æˆ·è¿”å›è¯¯è§¦å‘ï¼Œæˆ–è€…ä¸æ„¿æ„ç”¨æˆ·è¿”å›ï¼Œåˆ™å¯ä»¥ç”¨è¿‡WillPopScopeæ¥åˆ¤æ–­æ˜¯å¦å¯ä»¥ç”¨æˆ·è¿”å›ã€‚æˆ‘ä»¬çœ‹ä¸‹å±æ€§ï¼š const WillPopScope({ ... @required WillPopCallback onWillPop, @required Widget child }) onWillPopæ˜¯å›è°ƒå‡½æ•°ï¼Œå½“ç”¨æˆ·ç‚¹å‡»è¿”å›é”®è¢«è°ƒç”¨(åŒ…æ‹¬å¯¼èˆªè¿”å›é”®å’Œandroidç‰©ç†æŒ‰é”®)ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªFutureå¯¹è±¡ï¼Œå¦‚æœè¿”å›false,å½“å‰è·¯ç”±ä¸ä¼špopï¼Œå½“ä¸ºtrue,åˆ™é€€å‡ºå½“å‰è·¯ç”±ã€‚ ä¾‹å­ æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªè¿”å›å¼¹çª—æé†’ç”¨æˆ·ä¸€æ¬¡ï¼Œæ˜¯å¦çœŸçš„ å‡†å¤‡é€€å‡ºäº†ã€‚ç‚¹å‡»æš‚ä¸é€€å‡ºé€€åˆ°å½“å‰è·¯ç”±ï¼Œå¦åˆ™é€€åˆ°é¦–é¡µã€‚ @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar( title: Text('BaseWillPop'), ), body: WillPopScope( child: _body(), onWillPop: () async { //code showDialog( context: context, child: CupertinoAlertDialog( title: Text('æç¤º'), content: Text('çœŸçš„é€€å‡ºå—ï¼Ÿ'), actions: [ FlatButton( child: Text('çœŸçš„ é€€å‡ºäº†'), onPressed: () { Navigator.of(context).popUntil((route) { return route.isFirst; }); }, ), FlatButton( child: Text('æš‚ä¸é€€å‡ºäº†'), onPressed: () { Navigator.maybePop(context); }, ), ], )); return false; }), ); } "},"books/7.2inher.html":{"url":"books/7.2inher.html","title":"7.2ï¼šæ•°æ®å…±äº«ï¼ˆInheritedWidgetï¼‰","keywords":"","body":"7.2 å…±äº«æ•°æ® å…±äº«æ•°æ®åœ¨æˆ‘ä»¬æˆ‘ä»¬å¹³æ—¶å¼€å‘ä¸­å¾ˆå¸¸ç”¨çš„æ¯”å¦‚Theme.of(context)ã€Media.of()ç­‰ç­‰ï¼Œè¿™äº›éƒ½æ˜¯ é€šè¿‡ofå‡½æ•°è·å–ä¸Šçº§(é¡¶çº§æˆ–è€…å¤šå±‚çº§çš„ä¸€çº§)çš„æ•°æ®ã€‚å®ƒæ˜¯ç”¨InheritedWidgetæ¥å®ç°çš„ï¼Œæä¾›äº†ä¸€ä¸ªé™æ€æ–¹æ³•ofè·å–å®ä¾‹ï¼Œé€šè¿‡å®ä¾‹è·å–å…¶ä»–å±æ€§çš„å€¼ã€‚ ä¸‹è¾¹çœ‹äº›ä¾‹å­ï¼šå­˜å‚¨ç‚¹å‡»æ¬¡æ•°çš„ShareData class ShareData extends InheritedWidget { int count; ShareData({Key key, this.count, @required Widget child}) : super(key: key, child: child); @override bool updateShouldNotify(InheritedWidget oldWidget) { return this != oldWidget; } static ShareData of(BuildContext context) { return context.dependOnInheritedWidgetOfExactType(); } } ç„¶åç”¨å®ƒåŒ…è£¹å­éƒ¨ä»¶ class BaseShareData extends StatefulWidget { @override _BaseShareDataState createState() => _BaseShareDataState(); } class _BaseShareDataState extends State { @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar( title: Text('å…±äº«æ•°æ®'), ), body: _body(), floatingActionButton: FloatingActionButton( child: Icon(Icons.add), onPressed: () { setState(() { _count += 1; }); }, ), ); } int _count = 0; Widget _body() { return ShareData( count: _count, child: BaseShareData2(), ); } } /// å­éƒ¨ä»¶ æ˜¾ç¤ºå…±äº«æ•°æ®çš„countçš„å€¼ class BaseShareData2 extends StatelessWidget { @override Widget build(BuildContext context) { return Container( child: Text( ShareData.of(context).count.toString(), style: TextStyle(fontSize: 50), ), alignment: Alignment.center, ); } } æ¯ç‚¹å‡»ä¸€æ¬¡æŒ‰é’®ï¼Œæ•°å­—ä¾¿ä¼šå¢åŠ 1. didChangeDependenciesè¯¥å‡½æ•°å¼ å½“stateçš„ä¾èµ–æ›´æ”¹æ—¶å€™è°ƒç”¨ï¼Œå½“ä¾èµ–æ›´æ”¹ï¼Œåˆ™buildä¼šé‡æ–°è°ƒç”¨ï¼Œå°±æ˜¯ä¼šé‡ç»˜ï¼Œåˆ·æ–°é¡µé¢ã€‚ ä¸Šé¢çš„ä»£ç ç¨ä½œä¿®æ”¹; class BaseShareData2 extends StatefulWidget { @override _BaseShareData2State createState() => _BaseShareData2State(); } class _BaseShareData2State extends State { @override Widget build(BuildContext context) { return Container( child: Text( ShareData.of(context).count.toString(), style: TextStyle(fontSize: 50), ), alignment: Alignment.center, ); } @override void didChangeDependencies() { print('didChangeDependencies'); super.didChangeDependencies(); } } å½“ä¾èµ–æ›´æ”¹åˆ™è¾“å‡ºæ—¥å¿—ï¼š è¾“å‡ºæ¬¡æ—¥å¿—æ¡ä»¶æ˜¯å½“å¤©å­éƒ¨ä»¶å¿…éœ€åœ¨ShareDataéƒ¨ä»¶ä¸‹è¾¹ï¼Œå¦åˆ™é€šçŸ¥ä¸åˆ°è¯¥ç»„ä»¶ï¼Œåˆ™æ­¤å‡½æ•°ä¸ä¼šè°ƒç”¨ã€‚ ä¸Šè¾¹ä»£ç å†ç¨å¾®æ”¹ä¸‹ï¼Œå½“æˆ‘ä»¬ä¸ç”¨çˆ¶çº§éƒ¨ä»¶çš„è¯æ˜¯å¦ä¼šè°ƒç”¨ã€‚ class _BaseShareData2State extends State { @override Widget build(BuildContext context) { return Container( child: Text( 'test no sharedata', // ShareData.of(context).count.toString(), style: TextStyle(fontSize: 50), ), alignment: Alignment.center, ); } @override void didChangeDependencies() { print('didChangeDependencies'); super.didChangeDependencies(); } } å½“æˆ‘ä»¬æ³¨é‡Šæ‰å¯¹çˆ¶çº§ çš„å…±äº«çš„å¼•ç”¨ï¼Œåˆ™ä¸ä¼šè°ƒç”¨didChangeDependencies,é¡µé¢ä¸ä¼šå‘ç”Ÿé‡ç»˜åŠ¨ä½œï¼Œæ€§èƒ½æ›´å¥½ã€‚ didChangeDependencies åˆ°åº•æ˜¯åšä»€ä¹ˆçš„ å½“æ¬¡å¯¹è±¡çš„Stateå¯¹è±¡çš„ä¾èµ–æ›´æ”¹æ—¶è°ƒç”¨ï¼Œæ¯”å¦‚å¼•ç”¨äº†çˆ¶ç»„ä»¶çš„InheritedWidggetæ•°æ®ï¼Œæ¡†æ¶å°†é€šçŸ¥æ¬¡å¯¹è±¡æœ‰å…³æ›´æ”¹çš„æ–¹æ³•ã€‚ å½“Aæ˜¯å…±äº«æ•°æ®InhertedWidgetï¼ŒB``Fæ˜¯ä½¿ç”¨äº†Açš„æ•°æ®ï¼Œé‚£ä¹ˆå½“Aæ•°æ®å˜åŒ–æ—¶ï¼ŒB ->Géƒ½è°ä¼šåˆ·æ–°ï¼Ÿï¼Ÿ flutter: didChangeDependencies flutter: build true flutter: build false flutter: build false flutter: build false flutter: didChangeDependencies flutter: build true flutter: build false ç­”æ¡ˆæ˜¯éƒ½ä¼šbuildä¸€æ¬¡ï¼Œä½†æ˜¯didChangeDependenciesåªæœ‰2æ¬¡ï¼Œæ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è¯•ä¸€ä¸‹ã€‚ åŸå› æ˜¯é¡¶çº§ éƒ¨ä»¶buildä¼šå¯¼è‡´å­ç±»éƒ½buildï¼Œå¹¶ä¸æ˜¯dependenciesçš„åŸå› ã€‚ å¦‚æœåˆæƒ³ç”¨ShareDataçš„æ•°æ®ä½†æ˜¯ä¸æƒ³é‡å¤æ›´æ–°è¯¥æ€ä¹ˆåŠï¼Ÿ é‚£ä¹ˆæˆ‘ä»¬åªæ˜¯éœ€è¦å°†ofæ–°å¢ä¸€ä¸ªå³å¯ï¼Œä¸€ä¸ªè´Ÿè´£åˆ·æ–°ï¼Œä¸€ä¸ªåªæ˜¯å–å€¼ä¸ä¼šåˆ·æ–°çš„ã€‚ static ShareData ofNoRefresh(BuildContext context) { return context.getElementForInheritedWidgetOfExactType().widget; } ä»–ä»¬åˆ°åº•æœ‰ä»€ä¹ˆè”ç³»å’ŒåŒºåˆ«å‘¢ï¼Ÿ çœ‹ä¸‹æºç äº† ///--------dependOnInheritedWidgetOfExactType------ @override T dependOnInheritedWidgetOfExactType({Object aspect}) { assert(_debugCheckStateIsActiveForAncestorLookup()); final InheritedElement ancestor = _inheritedWidgets == null ? null : _inheritedWidgets[T]; if (ancestor != null) { assert(ancestor is InheritedElement); return dependOnInheritedElement(ancestor, aspect: aspect) as T; } _hadUnsatisfiedDependencies = true; return null; } ///----getElementForInheritedWidgetOfExactType----- @override InheritedElement getElementForInheritedWidgetOfExactType() { assert(_debugCheckStateIsActiveForAncestorLookup()); final InheritedElement ancestor = _inheritedWidgets == null ? null : _inheritedWidgets[T]; return ancestor; } å¤šå‡ºçš„å‡½æ•°å¦‚ä¸‹,è¯¥å‡½æ•°å°±æ˜¯å°†æ¸²æŸ“objæ·»åŠ åˆ°ä¾èµ–çš„æ•°ç»„ä¸­ã€‚ @override InheritedWidget dependOnInheritedElement(InheritedElement ancestor, { Object aspect }) { assert(ancestor != null); _dependencies ??= HashSet(); _dependencies.add(ancestor); ancestor.updateDependencies(this, aspect); return ancestor.widget; } æœ€ç»ˆè°ƒç”¨äº† @protected void updateDependencies(Element dependent, Object aspect) { setDependencies(dependent, null); } å†çœ‹ä¸€ä¸‹setDependenciesæºç ï¼š @protected void setDependencies(Element dependent, Object value) { _dependents[dependent] = value; } è¯¥å‡½æ•°åªæ˜¯å°†éœ€è¦ä¾èµ–çš„ç»„ä»¶åŠ å…¥åˆ°æ•°ç»„ä¸­_dependentsï¼Œè¿™ä¸ªæ•°ç»„å°±æ˜¯æœ€ç»ˆé€šçŸ¥åˆ°çš„objï¼Œæœ€ç»ˆè°ƒç”¨äº†notifyClientsä¸­çš„notifyDependent(oldWidget, dependent)å·²è¾¾åˆ°é€šçŸ¥ç»„ä»¶çš„æ•ˆæœã€‚ æœ€åè°ƒç”¨ çš„é€šçŸ¥å‡½æ•°ï¼š @protected void notifyDependent(covariant InheritedWidget oldWidget, Element dependent) { dependent.didChangeDependencies(); } "},"books/7.3provider.html":{"url":"books/7.3provider.html","title":"7.3ï¼š è·¨ç»„ä»¶çŠ¶æ€å…±äº«ï¼ˆProviderï¼‰","keywords":"","body":"7.1 å¯¼èˆªè¿”å›æ‹¦æˆªï¼ˆWillPopScopeï¼‰ "},"books/7.4theme.html":{"url":"books/7.4theme.html","title":"7.4ï¼šé¢œè‰²å’Œä¸»é¢˜ï¼ˆThemeï¼‰","keywords":"","body":"7.4.1 é¢œè‰² é¦–å…ˆäº†è§£ä¸€ä¸‹Colorç±»ã€‚åœ¨Flutterä¸­ï¼ŒColoræ˜¯ä¿å­˜ä¸€ä¸ª32ä½çš„int,é‚£ä¹ˆrgbaåˆ†åˆ«æ€ä¹ˆä½“ç°å‘¢ï¼Ÿæˆ‘ä»¬çœ‹ä¸‹è¡¨æ ¼ Bit èŒƒå›´ é¢œè‰² 0-7 blue è“è‰² 8-15 green ç»¿è‰² 16-23 red çº¢è‰² 24-31 alpha é€æ˜åº¦ é‚£ä¹ˆé¢œè‰²å°±æ˜¯ç”±è¿™ä¸‰ç§é¢œè‰²å’Œé€æ˜åº¦ç»„æˆçš„ï¼Œ8ä½intèŒƒå›´æ˜¯[0--255]ï¼Œæ‰€ä»¥æ¯ä¸ªå€¼æœ€å¤§æ˜¯255ï¼Œæœ€å°æ˜¯0. æˆ‘ä»¬çœ‹ä¸‹æ„é€ å‡½æ•°ï¼š è¯¥å‡½æ•°çš„å‚æ•°ræ˜¯çº¢è‰²ï¼ŒèŒƒå›´æ˜¯[0-255],gæ˜¯ç»¿è‰²ã€bæ˜¯è“è‰²ï¼Œaæ˜¯é€æ˜åº¦ï¼ŒèŒƒå›´ä¹Ÿæ˜¯[0,255]ï¼Œå½“a=0,åˆ™æ˜¯å®Œå…¨é€æ˜åº¦ï¼Œå½“a=255,åˆ™å®Œå…¨ä¸é€æ˜ã€‚ Color.fromARGB(int a, int r, int g, int b) ä¸‹è¾¹è¿™ä¸ªæ„é€ å‡½æ•°åªæœ‰opacityèŒƒå›´å˜æˆäº†[0--1],å…¶ä»–æ²¡å˜ã€‚ Color.fromRGBO(int r, int g, int b, double opacity) Flutteré™¤äº†Colorç±»ï¼Œè¿˜æœ‰MatarialColorç±»ï¼Œä¹Ÿæ˜¯è¡¨ç¤ºé¢œè‰²çš„ã€‚ MatarialColor MatarialColoræ˜¯Colorçš„å­ç±»ï¼Œå®ç°äº†Matarial Designä¸­é¢œè‰²çš„ç±»ï¼ŒåŒ…å«äº†10ä¸ªæ¸å˜çš„é¢œè‰²,å¯ä»¥é€šè¿‡[50]æ¥å¾—åˆ°é¢œè‰²çš„æ·±åº¦ï¼Œç´¢å¼•åŒ…å«[50]ã€[100]ã€[200]ã€[300]ã€[400]ã€[500]ã€[600]ã€[700]ã€[800]ã€[900]ï¼Œé¢œè‰²è¶Šå¤§ï¼Œé¢œè‰²è¶Šæ·±ã€‚ å…¶å®è¿™ä¸ª[]æ˜¯æ“ä½œç¬¦ï¼Œçœ‹ä¸‹æºç äº†è§£åˆ°å…¶å®æ˜¯MatarialColorçš„çˆ¶ç±»ColorSwatchä¸­æœ‰ä¸ªå±æ€§Map _swtchå­˜å‚¨çš„å€¼ /// ColorSwatch Color operator [](T index) => _swatch[index]; tealæ˜¯MaterialColorç±»ï¼Œçœ‹ä¸‹å®ƒçš„å®ç°ã€‚ static const MaterialColor teal = MaterialColor( _tealPrimaryValue, { 50: Color(0xFFE0F2F1), 100: Color(0xFFB2DFDB), 200: Color(0xFF80CBC4), 300: Color(0xFF4DB6AC), 400: Color(0xFF26A69A), 500: Color(_tealPrimaryValue), 600: Color(0xFF00897B), 700: Color(0xFF00796B), 800: Color(0xFF00695C), 900: Color(0xFF004D40), }, ); çœ‹ä¸‹æ•ˆæœï¼š Theme Themeç»„ä»¶å¯ä»¥å®ç°å®šä¹‰ç»„ä»¶çš„ä¸»é¢˜ï¼ŒåŒ…å«æŒ‰é’®ï¼Œæ–‡æœ¬ï¼Œbarã€‚ã€‚ã€‚ï¼Œå­éƒ¨ä»¶éƒ½ä¼šç»§æ‰¿è¯¥æ•ˆæœã€‚ ThemeData ThemeDataç”¨äºä¿å­˜Materialç»„ä»¶åº“çš„ä¸»é¢˜æ•°æ®ï¼Œç»„ä»¶çš„è§„èŒƒéƒ½å®šä¹‰åœ¨ThemeDataä¸­ï¼Œæ‰€ä»¥å¯ä»¥é€šè¿‡THemeDataæ¥è‡ªå®šä¹‰æ³¨æ„ï¼Œåœ¨å­éƒ¨ä»¶å¯ä»¥é€šè¿‡Theme.of(ctx)è·å–å½“å‰çš„ThemeData. çœ‹ä¸‹ThemeDataçš„éƒ¨åˆ†æ•°æ®ï¼š ThemeData({ Brightness brightness, //æ·±è‰²è¿˜æ˜¯æµ…è‰² MaterialColor primarySwatch, //ä¸»é¢˜é¢œè‰²æ ·æœ¬ï¼Œè§ä¸‹é¢ä»‹ç» Color primaryColor, //ä¸»è‰²ï¼Œå†³å®šå¯¼èˆªæ é¢œè‰² Color accentColor, //æ¬¡çº§è‰²ï¼Œå†³å®šå¤§å¤šæ•°Widgetçš„é¢œè‰²ï¼Œå¦‚è¿›åº¦æ¡ã€å¼€å…³ç­‰ã€‚ Color cardColor, //å¡ç‰‡é¢œè‰² Color dividerColor, //åˆ†å‰²çº¿é¢œè‰² ButtonThemeData buttonTheme, //æŒ‰é’®ä¸»é¢˜ Color cursorColor, //è¾“å…¥æ¡†å…‰æ ‡é¢œè‰² Color dialogBackgroundColor,//å¯¹è¯æ¡†èƒŒæ™¯é¢œè‰² String fontFamily, //æ–‡å­—å­—ä½“ TextTheme textTheme,// å­—ä½“ä¸»é¢˜ï¼ŒåŒ…æ‹¬æ ‡é¢˜ã€bodyç­‰æ–‡å­—æ ·å¼ IconThemeData iconTheme, // Iconçš„é»˜è®¤æ ·å¼ TargetPlatform platform, //æŒ‡å®šå¹³å°ï¼Œåº”ç”¨ç‰¹å®šå¹³å°æ§ä»¶é£æ ¼ ... }) ä¾‹å­ï¼šå®ç°ä¸€ä¸ªæŒ‰é’®æ¢è‚¤åŠŸèƒ½; class _BaseColorAndThemeState extends State { Color _color; @override Widget build(BuildContext context) { ThemeData themeData = Theme.of(context); return Theme( child: Scaffold( appBar: AppBar( title: Text('é¢œè‰²å’Œä¸»é¢˜'), ), body: _body(), ), data: ThemeData( primarySwatch: _color, iconTheme: IconThemeData(color: _color), textTheme: TextTheme(button: TextStyle(backgroundColor: _color))), ); } Widget _body() { return Center( child: Column( children: [ FlatButton( child: Text('åˆ‡æ¢é¢œè‰²'), color: Theme.of(context).buttonColor, onPressed: () { setState(() { // _iconColor = Colors.orange; _color = _color == Colors.orange ? Colors.green : Colors.orange; }); // Navigator.of(context) // .push(MaterialPageRoute(builder: (ctx) => _BaseRoutePage())); }, ), Row( children: [ Icon( Icons.add, size: 50, ), Text('é¢œè‰²è·Ÿéšä¸»é¢˜') ], ), Row( children: [ Icon( Icons.add, color: Colors.green, size: 50, ), Text('é¢œè‰²å›ºå®š') ], ), ], ), ); } @override void initState() { _color = Colors.teal; super.initState(); } } æ•ˆæœ; Theme = context.dependOnInheritedWidgetOfExactType(); context.dependOnInheritedWidgetOfExactTypeä¼šæŒ‰ç…§widgetæ ‘å‘ä¸ŠæŸ¥æ‰¾_InheritedTheme,æœ‰çš„è¯åˆ™è¿”å›ï¼Œæ— çš„è¯null. å½“å¤šçº§ThemeåµŒå¥—ï¼Œåˆ™è·ç¦»widgetå‘ä¸Šæœ€è¿‘çš„æ‰ä¼šæœ‰æ•ˆæœã€‚ ä¾‹å­ï¼š Theme( child: Row( children: [ Icon( Icons.add, size: 50, ), Text('é¢œè‰²å›ºå®š') ], ), data: ThemeData( iconTheme: IconThemeData(color: Colors.red), ), ) æ•ˆæœ; "},"books/7.5futurebuilder.html":{"url":"books/7.5futurebuilder.html","title":"7.5ï¼šå¼‚æ­¥UIæ›´æ–°ï¼ˆFutureBuilderã€StreamBuilderï¼‰","keywords":"","body":"7.5 å¼‚æ­¥UIæ›´æ–°ï¼ˆFutureBuilderã€StreamBuilderï¼‰ å¾ˆå¤šæ—¶å€™ä¾èµ–ä¸€éƒ¨åˆ†åŠ¨æ€æ•°æ®æ¥æ›´æ–°UIï¼Œæ¯”å¦‚æ‰“å¼€é¡µé¢å±•ç¤ºçš„åˆ—è¡¨é¡µé¢ï¼Œåˆ—è¡¨æ•°æ®æ˜¯ä»æœåŠ¡ç«¯è·å–çš„ï¼Œåœ¨è·å–è¿‡ç¨‹ä¸­å±•ç¤ºä¸€ä¸ªåŠ¨ç”»ï¼Œåœ¨æ•°æ®åŠ è½½åˆ°æœ¬åœ°ä¹‹åè¿›è¡Œæ¸²æŸ“ï¼›æ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨Stream(æ–‡ä»¶æµï¼Œäº’è”ç½‘æ•°æ®ç­‰)çš„è¿›åº¦ã€‚ç›ç„¶æˆ‘ä»¬ä½¿ç”¨StatefullWidgetå®Œå…¨å¯ä»¥ä½¿ç”¨è¿™ç§åŠŸèƒ½ï¼ŒFlutterä¸“é—¨æä¾›äº†FlutterBuilderå’ŒStreamBuilderä¸¤ä¸ªç»„ä»¶å®ç°è¿™ç§åŠŸèƒ½ã€‚ 7.5.1 FutureBuilder å‚æ•° å«ä¹‰ future FutureBuilderä¾èµ–çš„Futureï¼Œé€šå¸¸æ˜¯ä¸€ä¸ªå¼‚æ­¥è€—æ—¶ä»»åŠ¡ initData åˆå§‹åŒ–æ•°æ® builder æ„é€ å™¨ï¼ŒFunction (BuildContext context, AsyncSnapshot snapshot)ï¼Œsnapshot åŒ…å«å¼‚æ­¥ä»»åŠ¡çš„ä»»åŠ¡ä¿¡æ¯å’Œç»“æœï¼Œæ¯”å¦‚æˆ‘ä»¬å¯ä»¥é€šè¿‡snapshotè·å– ä¸‹è¾¹çœ‹ä¸‹è¿™ä¸ªä¾‹å­ return Center( child: Text('data:${snapshot.data}'), ); æ•ˆæœ; ConnectionStateæ˜¯ä¸ªæšä¸¾ï¼Œæ ¹æ®ä»»åŠ¡ä¸åŒçŠ¶æ€è¿”å›ä¸åŒçš„å€¼ã€‚ enum ConnectionState { // æ²¡ä»»åŠ¡åˆ™ä¸ºnone none, // ç­‰å¾…ä¸­ waiting, // ä»»åŠ¡åœ¨è¿›è¡Œä¸­ active, // å¼‚æ­¥ä»»åŠ¡å®Œæˆ done, } 7.5.2 StreamBuilder dartä¸­streamç”¨äºæ¥å—å¼‚æ­¥æ•°æ®ï¼Œå’ŒFutureä¸åŒçš„æ˜¯å‰è€…å¯ä»¥è¿ç»­æ¥å—æ•°æ®ï¼Œå¯ä»¥ç”¨äºå¤šæ¬¡æ•°æ®çš„å¼‚æ­¥ä»»åŠ¡ï¼Œå¦‚ç½‘ç»œä¸‹è½½ï¼Œæ–‡ä»¶è¯»å†™ï¼ŒstreamBuilderæ­£æ˜¯åŒ¹é…Streamæ¥å±•ç¤ºæ•°æ®æµçš„æ•°æ®å˜åŒ–UIï¼Œä¸‹è¾¹çœ‹ä¸‹æ„é€ å‡½æ•°ï¼š StreamBuilder({ Key key, this.initialData, Stream stream, @required this.builder, }) å¯ä»¥çœ‹åˆ°å’ŒFutureBuilderçš„æ„é€ å‡½æ•°åªæœ‰ä¸€ç‚¹ä¸åŒï¼šå‰è€…éœ€è¦ä¸€ä¸ªfutureï¼Œè€Œåè€…éœ€è¦ä¸€ä¸ªstreamã€‚ Widget _bd() { return Center( child: StreamBuilder( stream: _counter(), builder: (BuildContext context, AsyncSnapshot snapshot) { if (snapshot.connectionState == ConnectionState.done) { if (snapshot.hasError) { return Center( child: Text('error:${snapshot.error}'), ); } else { return Center( child: Text('data:${snapshot.data}'), ); } } else { return Center( child: Text( 'state:${snapshot.connectionState},count:${snapshot.data}'), ); } }, ), ); } Stream _counter() { return Stream.periodic(Duration(milliseconds: 500), (i) { return i; }); } @override void initState() { super.initState(); } æ•ˆæœ: "},"books/8.1zhizhen.html":{"url":"books/8.1zhizhen.html","title":"8.1:åŸå§‹æŒ‡é’ˆäº‹ä»¶å¤„ç†","keywords":"","body":"8.1 åŸå§‹æŒ‡é’ˆäº‹ä»¶å¤„ç† æœ¬ç« èŠ‚å…ˆä»‹ç»æ‰‹åŠ¿(Pointer Eventï¼Œç§»åŠ¨ç«¯è®¾å¤‡ä¸Šé€šå¸¸çš„è§¦æ‘¸äº‹ä»¶)ï¼Œåœ¨ç§»åŠ¨ç«¯ï¼Œæ¯ä¸ªå¹³å°æˆ–UIç³»ç»Ÿçš„åŸå§‹æŒ‡é’ˆäº‹ä»¶åŸºæœ¬ä¸€è‡´ï¼Œå³:ä¸€æ¬¡å®Œæ•´çš„æ—¶é—´åˆ†ä¸ºï¼šæ‰‹åŠ¿æŒ‰ä¸‹ã€æ‰‹åŠ¿ç§»åŠ¨ã€æ‰‹åŠ¿æŠ¬èµ·ï¼Œæˆ–è€…é«˜çº§çš„æ‰‹åŠ¿(ç‚¹å‡»ã€åŒå‡»ã€æ‹–åŠ¨ç­‰)éƒ½æ˜¯åŸºäºè¿™äº›åŸå§‹äº‹ä»¶çš„ã€‚ å½“æŒ‡é’ˆæŒ‰ä¸‹æ—¶ï¼ŒFlutterä¼šå¯¹åº”ç”¨ç¨‹åºæ‰§è¡Œå‘½ä¸­æµ‹è¯•(Hit Test)ï¼Œä»¥ç¡®å®šæŒ‡é’ˆä¸å±å¹•äº¤ç•Œå¤„çš„ä½ç½®å­˜åœ¨å“ªäº›ç»„ä»¶widgetï¼ŒæŒ‡é’ˆæŒ‰ä¸‹äº‹ä»¶(ä»¥åŠè¯¥æŒ‡é’ˆçš„åç»­äº‹ä»¶)ï¼Œç„¶åè¢«åˆ†åˆ°æœ‰å‘½ä¸­æµ‹è¯•æµ‹è¯•å‘ç°æœ€å†…éƒ¨çš„ç»„ä»¶ï¼Œç„¶åä»é‚£é‡Œå‘ç»„ä»¶æ ‘ä¸Šå†’æ³¡ï¼Œè¿™äº›äº‹ä»¶ä»å†…éƒ¨çš„ç»„ä»¶è¢«åˆ†å‘åˆ°ç»„ä»¶æ ‘æ ¹è·¯å¾„çš„æ‰€æœ‰ç»„ä»¶ï¼Œè¿™å’ŒiOSçš„æ‰‹åŠ¿å¤„ç†ä¸€è‡´ã€‚ Flutterä¸­å¯ä»¥ä½¿ç”¨Listenç›‘å¬åŸå§‹è§¦æ‘¸äº‹ä»¶ï¼ŒæŒ‰ç…§æœ¬ä¹¦å¯¹ç»„ä»¶çš„åˆ†è£‚ï¼Œåˆ™Listenerä¹Ÿæ˜¯åŠŸèƒ½æ€§ç»„ä»¶ã€‚ä¸‹é¢æ˜¯Listenerçš„æ„é€ å‡½æ•°å®šä¹‰ï¼š Listener({ Key key, this.onPointerDown, //æ‰‹æŒ‡æŒ‰ä¸‹å›è°ƒ this.onPointerMove, //æ‰‹æŒ‡ç§»åŠ¨å›è°ƒ this.onPointerUp,//æ‰‹æŒ‡æŠ¬èµ·å›è°ƒ this.onPointerCancel,//è§¦æ‘¸äº‹ä»¶å–æ¶ˆå›è°ƒ this.behavior = HitTestBehavior.deferToChild, //åœ¨å‘½ä¸­æµ‹è¯•æœŸé—´å¦‚ä½•è¡¨ç° Widget child }) ä¾‹å­ï¼š //å®šä¹‰ä¸€ä¸ªçŠ¶æ€ï¼Œä¿å­˜å½“å‰æŒ‡é’ˆä½ç½® PointerEvent _event; String _eventState = ''; Widget _body() { return Center( child: Listener( child: Container( width: 200, height: 200, color: Colors.orange, alignment: Alignment.center, child: Column( children: [ Text('state:$_eventState'), Text(_event.toString()) ], ), ), onPointerCancel: (PointerCancelEvent event) { setState(() { _event = _event; _eventState = 'å–æ¶ˆ'; }); }, onPointerDown: (PointerDownEvent ev) { setState(() { _event = ev; _eventState = 'æ‰‹åŠ¿æŒ‰ä¸‹'; }); }, onPointerMove: (PointerMoveEvent ev) { setState(() { _event = ev; _eventState = 'ç§»åŠ¨'; }); }, onPointerUp: (PointerUpEvent ev) { setState(() { _event = ev; _eventState = 'æŠ¬èµ·æ‰‹åŠ¿'; }); }, ), ); } æ•ˆæœï¼š æ‰‹æŒ‡åœ¨æ©˜é»„è‰²åŒºåŸŸç§»åŠ¨å¯ä»¥çœ‹åˆ°æŒ‡é’ˆä¾¿å®œï¼Œå½“è§¦å‘äº‹ä»¶æ—¶ï¼ŒPointerCancelEventã€PointerDownEventã€PointerMoveEventã€PointerUpEventéƒ½æ˜¯PointEventçš„å­ç±»ï¼ŒPointEventä¸­åŒ…å«æŒ‡é’ˆçš„ä¸€äº›ä¿¡æ¯ï¼Œå¦‚ position: å…¨å±€åæ ‡ delta: ä¸¤æ¬¡ç§»åŠ¨è·ç¦» pressure: æŒ‰å‹åŠ›åº¦ï¼Œæ”¯æŒ3DTouchçš„ï¼Œæ­¤å±æ€§æ‰æœ‰æ„ä¹‰ï¼Œè‹¥ä¸æ”¯æŒï¼Œåˆ™å§‹ç»ˆä¸º1. orientation: æŒ‡é’ˆç§»åŠ¨æ–¹å‘ï¼Œæ˜¯ä¸€ä¸ªè§’åº¦å€¼ å…¶ä»–æ›´å¤šå±æ€§å¯ä»¥æŸ¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚ ç°åœ¨çœ‹ä¸‹HitTestBehavior HitTestBehavior å«ä¹‰ deferToChild ç‚¹å‡»å­éƒ¨ä»¶å¯ä»¥æ”¶åˆ°å“åº”ï¼Œå¹¶ä¸æ˜¯æ‹¦æˆªï¼Œåº•éƒ¨è¿˜èƒ½ç»§ç»­æ”¶åˆ° opaque å‘½ä¸­æµ‹è¯•æ—¶ï¼Œå°†å½“å‰ç»„ä»¶å½“æˆä¸é€æ˜å¤„ç†ï¼ˆå’Œæœ¬èº«é€æ˜åº¦æ²¡å…³ç³»ï¼‰,æœ€ç»ˆæ•ˆæœæ˜¯å½“å‰widgetæ•´ä¸ªåŒºåŸŸéƒ½èƒ½ç‚¹å‡» translucent å½“ç‚¹å‡»é€æ˜éƒ¨ä»¶ï¼Œç»§ç»­å‘ä¸‹ä¼ é€’ ä¾‹å­ï¼š Widget _body2() { return Center( child: Listener( child: Center( child: Container( color: Colors.red, height: 200, width: 100, child: Stack( children: [ Listener( child: ConstrainedBox( child: DecoratedBox( decoration: BoxDecoration(color: Colors.blue), child: Text(_eventState), ), constraints: BoxConstraints.tight(Size(100.0, 100.0)), ), onPointerDown: (PointerDownEvent ev) { setState(() { _eventState = 'ç‚¹å‡» è“è‰²'; }); }, ), Listener( child: ConstrainedBox( child: DecoratedBox( decoration: BoxDecoration(color: Colors.orange), child: Text(_eventState), ), constraints: BoxConstraints.tight(Size(100.0, 50.0)), ), onPointerDown: (PointerDownEvent ev) { setState(() { _eventState = 'ç‚¹å‡»æ©˜é»„è‰²åŒºåŸŸ'; }); }, ), ], ), ), ), behavior: HitTestBehavior.deferToChild, onPointerUp: (PointerUpEvent ev) { setState(() { _event = ev; _eventState = 'æŠ¬èµ·æ‰‹åŠ¿'; }); }, ), ); } æ•ˆæœ; å¿½ç•¥PointerEvent å‡å¦‚æˆ‘ä»¬æƒ³è®©æŸä¸ªå­æ ‘å“åº”PositerEventçš„è¯ï¼Œå¯ä»¥ä½¿ç”¨IgnorePointerå’ŒAbsorbPointerï¼Œè¿™ä¸¤ä¸ªç»„ä»¶éƒ½èƒ½é˜»æ­¢å­æ ‘æ¥å—æŒ‡é’ˆäº‹ä»¶ï¼Œä¸åŒä¹‹å¤„æ˜¯AbsorbPointerä¼šå‚ä¸å‘½ä¸­æµ‹è¯•ï¼Œè€ŒIgnorePointeræœ¬èº«ä¸ä¼šå‚ä¸ï¼Œæ„å‘³ç€IgnorePointerå’Œå­æ ‘éƒ½ä¸èƒ½ä¼ é€’å‘½ä¸­æµ‹è¯•ï¼Œè€ŒAbsorbPointerè‡ªå·±å¯ä»¥å‚ä¸ï¼Œä½†æ˜¯å­æ ‘ä¸å‚ä¸ã€‚ ä¾‹å­ï¼š String _eventState = ''; Widget _body() { return Center( child: Listener( child: Center( child: Column( children: [ Listener( child: SizedBox( height: 50, child: Container( color: Colors.red, child: Text(_eventState), ), ), onPointerDown: (PointerDownEvent ev) { setState(() { _event = ev; _eventState = 'å­æ ‘ -> æ‰‹åŠ¿æŒ‰ä¸‹'; }); }, ) ], ), ), onPointerUp: (PointerUpEvent ev) { setState(() { _event = ev; _eventState = 'æŠ¬èµ·æ‰‹åŠ¿'; }); }, ), ); } æ•ˆæœï¼š æˆ‘ä»¬æŠŠAbsorbPointeræ¢æˆIgnorePointer,éƒ½ä¸èƒ½æ¥å—äº‹ä»¶äº†ã€‚ "},"books/8.2shoushi.html":{"url":"books/8.2shoushi.html","title":"8.2:æ‰‹åŠ¿è¯†åˆ«","keywords":"","body":"8.2 æ‰‹åŠ¿è¯†åˆ« é¦–å…ˆä»‹ç»å¤„ç†æ‰‹åŠ¿çš„ç»„ä»¶GestureDetectorå’ŒGestureRecognizerï¼Œåç»­åœ¨è®²è§£å…¶ä»–å¤æ‚æƒ…å†µ 8.2.1 GestureDetector é¦–å…ˆçœ‹ä¸‹å±æ€§ï¼š GestureDetector({ Key key, this.child, this.onTapDown,// æ‰‹åŠ¿æŒ‰ä¸‹ this.onTapUp,//æŠ¬èµ· this.onTap,//ç‚¹å‡» this.onTapCancel,//ç‚¹å‡»å–æ¶ˆ ç§»åŠ¨å‡ºèŒƒå›´è§¦å‘ this.onSecondaryTapDown,//ç¬¬äºŒä¸ªæŒ‡å¤´ç‚¹å‡» this.onSecondaryTapUp, this.onSecondaryTapCancel, this.onDoubleTap,//åŒå‡» this.onLongPress,//é•¿æŒ‰ this.onLongPressStart,//é•¿æŒ‰å¼€å§‹ this.onLongPressMoveUpdate,//é•¿æŒ‰ç§»åŠ¨ this.onLongPressUp,//é•¿æŒ‰æŠ¬èµ· this.onLongPressEnd,//é•¿æŒ‰ç»“æŸ this.onVerticalDragDown,//å‚ç›´æ‹–æ‹½ æŒ‰å‹ this.onVerticalDragStart, this.onVerticalDragUpdate, this.onVerticalDragEnd, this.onVerticalDragCancel, this.onHorizontalDragDown,//æ°´å¹³æ‹–æ‹½ æŒ‰å‹ this.onHorizontalDragStart, this.onHorizontalDragUpdate, this.onHorizontalDragEnd, this.onHorizontalDragCancel, this.onForcePressStart, this.onForcePressPeak, this.onForcePressUpdate, this.onForcePressEnd, this.onPanDown, this.onPanStart, this.onPanUpdate, this.onPanEnd, this.onPanCancel, this.onScaleStart,//æ”¾å¤§å¼€å§‹ this.onScaleUpdate, this.onScaleEnd, this.behavior, this.excludeFromSemantics = false, this.dragStartBehavior = DragStartBehavior.start, }) ç‚¹å‡» åŒå‡» é•¿æŒ‰ ç‚¹å‡»ã€åŒå‡»ã€é•¿æŒ‰å¯ä»¥å¹¶å­˜ï¼Œç›¸äº’æ— å½±å“ã€‚æˆ‘ä»¬è®¾ç½®è§¦æ§åŒºåŸŸä¸º100X100ï¼Œæ–¹ä¾¿æ“ä½œã€‚ ä¾‹å­ï¼š GestureDetector( child: Container( width: 100, height: 100, child: Text(_string == null ? 'ç‚¹å‡»æˆ‘è¯†åˆ«æ‰‹åŠ¿' : _string), color: Colors.orange, ), onTap: () { setState(() { _string = 'æ‰‹åŠ¿æŒ‰å‹'; }); }, onDoubleTap: () { setState(() { _string = 'æ‰‹åŠ¿åŒå‡»'; }); }, onLongPress: () { setState(() { _string = 'æ‰‹åŠ¿é•¿æŒ‰'; }); }, } åŒæ—¶ç›‘å¬onTapå’ŒonDoubleTapäº‹ä»¶æ—¶ï¼Œç”¨æˆ·è§¦å‘tapäº‹ä»¶ä¼šæœ‰200æ¯«ç§’å»¶è¿Ÿï¼Œå› ä¸ºç”¨æˆ·æœ‰å¯èƒ½è§¦å‘åŒå‡»äº‹ä»¶ï¼Œæ‰€ä»¥ç»„ä»¶ä¼šç­‰å¾…ä¸€æ®µæ—¶é—´æ¥ç¡®å®šæ˜¯å¦æ˜¯åŒå‡»ï¼Œå¦‚æœåªç›‘å¬onTapï¼Œåˆ™æ— å»¶è¿Ÿã€‚ æ•ˆæœï¼š æ‹–åŠ¨ æ»‘åŠ¨ é•¿æŒ‰æ‰‹åŠ¿æ ¹æ®ç§»åŠ¨çš„LongPressMoveUpdateDetailså¯ä»¥æ›´æ–°UI,æ ¹æ®LongPressStartDetailsè®¡ç®—å¾—å‡ºæ‰‹æŒ‡åœ¨ç»„ä»¶ä¸Šçš„ä½ç½®è®¡ç®—å¾—å‡ºåº”è¯¥ç§»åŠ¨çš„è·ç¦»ã€‚ Stack( children: [ GestureDetector( child: Container( width: 100, height: 100, margin: EdgeInsets.only( left: _left > 0 ? _left : 0, top: _top å›è°ƒ å«ä¹‰ onLongPressStart é•¿æŒ‰å¼€å§‹çš„ä½ç½® onLongPressMoveUpdate æ‰‹æŒ‡ç§»åŠ¨å›è°ƒ LongPressStartDetails.localPositionæ˜¯åŸºäºå±å¹•çš„ä½ç½®çš„offset æ•ˆæœï¼š å½“ç„¶ä¹Ÿå¯ä»¥åœ¨æ°´å¹³æˆ–è€…å‚ç›´æ–¹å‘æ‹–åŠ¨ï¼Œæˆ–è€…åŒæ—¶éƒ½ç›‘å¬ã€‚ Stack( children: [ GestureDetector( child: Container( width: 100, height: 100, margin: EdgeInsets.only( left: _left > 0 ? _left : 0, top: _top å‚ç›´å’Œæ°´å¹³æ‰‹åŠ¿å†²çªï¼ŒåŒæ—¶åªèƒ½å“åº”ä¸€ä¸ªï¼Œè°å…ˆå“åº”åç»­éƒ½æ˜¯è°ç›‘å¬ã€‚ æ•ˆæœï¼š ç¼©æ”¾ åŒæŒ‡åœ¨å±å¹•ä¸Šå¼ å¼€å’Œæ”¶ç¼©å°±æ˜¯æ”¾å¤§å’Œç¼©å°æ‰‹åŠ¿ï¼Œæœ¬ä¾‹å­æ”¾å¤§å’Œç¼©å°widgetã€‚ Stack( children: [ GestureDetector( child: Container( width: _width, height: _height, margin: EdgeInsets.only( left: _left > 0 ? _left : 0, top: _top æ•ˆæœï¼š 8.2.2 GestureRecognizer GestureRecognizeræ˜¯æŠ½è±¡ç±»ï¼Œflutteræä¾›äº†å·²ç»å®ç°äº†çš„ç±»ï¼Œæ¯”å¦‚TapGestureRecognizerã€DoubleTapGestureRecognizerã€DragGestureRecognizerç­‰ä¾›å¼€å‘è€…å¯ä»¥å®ç°åŸºæœ¬çš„æ“ä½œã€‚ bool _selected = false; Widget _body2() { return Center( child: Text.rich( TextSpan(text: 'ä½ å¥½,', children: [ TextSpan( text: 'Flutter', recognizer: _gestureRecognizer(), style: TextStyle( color: _selected ? Colors.blue : Colors.orange, fontSize: _selected ? 30 : 20)) ]), ), ); } GestureRecognizer _gestureRecognizer() { return TapGestureRecognizer() ..onTap = () { setState(() { _selected = !_selected; }); }; } æ•ˆæœï¼š 8.2.3 æ‰‹åŠ¿ç«äº‰ ç«äº‰ åœ¨å‰è¾¹çš„ä¾‹å­ä¸­æœ‰ä¸€ä¸ªå‚ç›´å’Œç«–ç›´æ–¹å‘çš„ç›‘å¬ï¼Œå‡å¦‚æˆ‘ä»¬æ–œç€æ‹–åŠ¨æ—¶å“ªä¸ªæ–¹å‘ä¼šç”Ÿæ•ˆï¼Ÿå®é™…ä¸Šå–å†³äºç¬¬ä¸€æ¬¡ç§»åŠ¨æ—¶ä¸¤ä¸ªè½´ä¸Šçš„ä½ç§»åˆ†é‡ï¼Œå“ªä¸ªè½´åœ¨æœ¬æ¬¡ç«äº‰ä¸­èƒœå‡ºã€‚å®é™…Flutterçš„æ‰‹åŠ¿è¯†åˆ«ç«äº‰å¼•å…¥äº†ä¸€ä¸ªArenaçš„æ¦‚å¿µï¼ŒArenaæ˜¯ç«æŠ€åœºçš„æ„æ€ï¼Œåœ¨æ¯ä¸€ä¸ªæ‰‹åŠ¿è¯†åˆ«å™¨éƒ½æ˜¯ ä¸€ä¸ªç«æŠ€åœºï¼Œåœ¨å‘ç”Ÿæ»‘åŠ¨äº‹ä»¶æ—¶ï¼Œä»–ä»¬éƒ½è¦å»ç«æŠ€åœºå»ç«äº‰æœ¬æ¬¡çš„å¤„ç†æƒï¼Œè€Œæœ€ç»ˆåªæœ‰ä¸€ä¸ªç«äº‰è€…ä¼šèƒœå‡ºã€‚ ä¾‹å­ï¼š æˆ‘ä»¬ä»¥æ‹–åŠ¨æ‰‹åŠ¿ä¸ºä¾‹ï¼ŒåŒæ—¶è¯†åˆ«å‚ç›´å’Œæ°´å¹³æ‰‹åŠ¿ï¼Œå½“ ç”¨æˆ·æŒ‰ä¸‹å±å¹•å°±ä¼šè§¦å‘(å‚ç›´å’Œç«–ç›´æ–¹å‘)ï¼Œä¸€æ—¦æŸä¸€ä¸ªæ–¹å‘èƒœå‡ºï¼Œç›´åˆ°æ‰‹åŠ¿ç»“æŸéƒ½ä¼šæ²¿ç€è¯¥æ–¹å‘ç§»åŠ¨ã€‚ Stack( children: [ GestureDetector( child: Container( width: 100, height: 100, margin: EdgeInsets.only( left: _left > 0 ? _left : 0, top: _top å‚ç›´å’Œæ°´å¹³æ‰‹åŠ¿å†²çªï¼ŒåŒæ—¶åªèƒ½å“åº”ä¸€ä¸ªï¼Œè°å…ˆå“åº”åç»­éƒ½æ˜¯è°ç›‘å¬ã€‚ æ•ˆæœï¼š æ‰‹åŠ¿å†²çª ç”±äºæ‰‹åŠ¿ç«äº‰æœ€ç»ˆåªæœ‰ä¸€ä¸ªè·èƒœè€…ï¼Œæ‰€ä»¥ï¼Œå½“å¤šä¸ªæ‰‹åŠ¿è¯†åˆ«å™¨æ—¶ï¼Œå¯èƒ½ä¼šäº§ç”Ÿå†²çªï¼Œå‡å¦‚æœ‰å¯ä»¥ä¸Šä¸‹ç§»åŠ¨æ‰‹åŠ¿ï¼Œæˆ‘ä»¬ä¹Ÿæƒ³ç›‘æµ‹åœ¨ä»–ä¸Šé¢æŒ‰ä¸‹å’ŒæŠ¬èµ·æ‰‹åŠ¿ã€‚ String _moveDetail = ''; Widget _body3() { return Stack( children: [ GestureDetector( child: Container( width: _width, height: _height, margin: EdgeInsets.only( left: _left > 0 ? _left : 0, top: _top å¯ä»¥å‘ç°å½“æ‰‹åŠ¿ç»“æŸçš„æ—¶å€™ï¼Œupä¹Ÿæ²¡æœ‰å›è°ƒã€‚å½“ç‚¹å‡»æ—¶æ˜¯tapèƒœå‡ºï¼Œå½“æ‰‹æŒ‡å¼€å§‹ç§»åŠ¨çš„æ—¶å€™ï¼Œtapå’ŒonHorizontalDragUpdateå¼€å§‹ç«äº‰ï¼Œç„¶åonHorizontalDragUpdateèƒœå‡ºï¼Œåç»­çš„æ“ä½œéƒ½æ˜¯æœ‰onHorizontalDragUpdateæ¥å¤„ç†ï¼Œæ‰€ä»¥æœ€ç»ˆupå¹¶æœªå›è°ƒã€‚ å‡å¦‚æˆ‘ä»¬ä¹Ÿæƒ³ç›‘å¬upæ‰‹åŠ¿ï¼Œé‚£ä¹ˆè¯¥æ€ä¹ˆå¤„ç†ï¼Ÿå¯ä»¥ç›‘å¬onHorizontalDragendæˆ–è€…ä½¿ç”¨åŸå§‹æŒ‡é’ˆListeneræ¥å¤„ç†ã€‚ Positioned( top:80.0, left: _leftB, child: Listener( onPointerDown: (details) { print(\"down\"); }, onPointerUp: (details) { //ä¼šè§¦å‘ print(\"up\"); }, child: GestureDetector( child: CircleAvatar(child: Text(\"B\")), onHorizontalDragUpdate: (DragUpdateDetails details) { setState(() { _leftB += details.delta.dx; }); }, onHorizontalDragEnd: (details) { print(\"onHorizontalDragEnd\"); }, ), ), ) æ„Ÿå…´è¶£çš„åŒå­¦å¯ä»¥è‡ªå·±å®éªŒä¸‹å“¦ã€‚ã€‚ã€‚ "},"books/8.3å…¨å±€æ€»çº¿.html":{"url":"books/8.3å…¨å±€æ€»çº¿.html","title":"8.3:å…¨å±€äº‹ä»¶æ€»çº¿","keywords":"","body":"8.3 å…¨å±€äº‹ä»¶æ€»çº¿ åœ¨APPä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šéœ€è¦ä¸€ä¸ªå¹¿æ’­æœºåˆ¶ï¼Œç”¨æ¥è·¨é¡µé¢ä¼ å€¼ï¼Œæ¯”å¦‚ä¸€ä¸ªAPPé€‰æ‹©äº†æŸä¸€ä¸ªå‚æ•°ï¼Œé¡µé¢å…³é—­ä¹‹åï¼Œä¸Šçº§é¡µé¢è¦æ˜¾ç¤ºè¯¥å‚æ•°è¿›è¡Œä¸€äº›é¡µé¢çš„æ›´æ–°ï¼Œè¿™æ—¶å€™ï¼Œä¸€ä¸ªäº‹ä»¶æ€»çº¿ä¾¿ä¼šéå¸¸æœ‰ç”¨ï¼Œäº‹ä»¶æ€»æ˜¾ç¤º å®ç°è®¢é˜…è€…æ¨¡å¼ï¼Œè®¢é˜…è€…åŒ…å«å‘å¸ƒè€…å’Œè®¢é˜…è€…ä¸¤ç§èº«ä»½ï¼Œå¯ä»¥é€šè¿‡æ€»çº¿è§¦å‘äº‹ä»¶å’Œç›‘å¬äº‹ä»¶ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ¥å®ç°è¿™ä¹ˆä¸€ä¸ªäº‹ä»¶æ€»çº¿ï¼Œä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚ typedef EventBusCallback = void Function(Object object); class FYEventBus { static FYEventBus _bus = new FYEventBus._(); FYEventBus._(); /// å·¥å‚æ„é€  å•ä¾‹æ¨¡å¼ factory FYEventBus() => _bus; //ä¿å­˜å…¨å±€ var _emap = new Map>(); /// ç›‘å¬å›è°ƒ void on(eventName, EventBusCallback callback) { if (eventName == null || callback == null) return; _emap[eventName] ??= new List(); if (_emap[eventName].contains(callback) == false) { _emap[eventName].add(callback); } } /// åˆ é™¤å›è°ƒ void off(eventName, EventBusCallback callback) { if (eventName == null || callback == null) return; if (callback == null) { _emap[eventName] = null; } else { _emap[eventName].remove(callback); } } /// å‘é€å›è°ƒ void fire(eventName, [arg]) { if (eventName == null) return; var list = _emap[eventName]; if (list == null) return; for (var j = list.length - 1; j >= 0; --j) { var o = list[j]; o(arg); } } } ç„¶åæˆ‘ä»¬å®ç°ä¸€ä¸ªè·¨é¡µé¢ä¼ å€¼ï¼ŒAé¡µé¢å±•ç¤ºæ•°æ®ï¼ŒBé¡µé¢ä¼ å€¼è¿‡å»ã€‚ class _BaseEventBusState extends State { @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar( title: Text('äº‹ä»¶æ€»çº¿'), ), body: _body(), ); } Widget _body() { return Center( child: Column( children: [ Text(_str), OutlineButton( onPressed: () { // _bus.fire('test', 'å…¨å±€è°ƒç”¨äº†ä¸€æ¬¡å“¦'); Navigator.of(context) .push(MaterialPageRoute(builder: (c) => _Page2())); }, child: Text('ç‚¹æˆ‘push new page'), ) ], ), ); } String _str = ''; FYEventBus _bus; @override void initState() { _bus = FYEventBus() ..on('test', (string) { setState(() { _str += string; }); }); super.initState(); } @override void dispose() { _bus.off('test', null); super.dispose(); } } class _Page2 extends StatelessWidget { @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar( title: Text('è¿‡æ¥ä¼ å€¼äº†'), ), body: _body(), ); } FYEventBus _bus = FYEventBus(); Widget _body() { return Center( child: Column( children: [ OutlineButton( onPressed: () { _bus.fire('test', '\\nç‚¹æˆ‘å‘é€è¯·æ±‚A'); }, child: Text('ç‚¹æˆ‘å‘é€è¯·æ±‚A'), ), OutlineButton( onPressed: () { _bus.fire('test', '\\nç‚¹æˆ‘å‘é€è¯·æ±‚B'); }, child: Text('ç‚¹æˆ‘å‘é€è¯·æ±‚B'), ) ], ), ); } } æ•ˆæœï¼š Dart ä¸­å•ä¾‹ç”¨ å·¥å‚æ–¹æ³•+é™æ€å˜é‡å¯ä»¥å®ç°ï¼Œè¿™æ ·å¯ä»¥ä¿è¯æ¯æ¬¡newéƒ½æ˜¯è¿”å›çš„åŒä¸€ä¸ªå®ä¾‹ã€‚ äº‹ä»¶æ€»çº¿é€šå¸¸ç”¨äºç»„ä»¶ä¹‹é—´çŠ¶æ€å…±äº«ï¼Œå•å…³äºç»„ä»¶ä¹‹é—´çŠ¶æ€å…±äº«ä¹Ÿæœ‰ä¸€äº›ä¸“é—¨çš„ç¬¬ä¸‰æ–¹åŒ…ï¼Œå¦‚Eventbusã€reduxã€blocç­‰ï¼Œå¼€å‘è€…æ„Ÿå…´è¶£å¯ä»¥å»pubå‚è€ƒä¸‹ã€‚ "},"books/8.4é€šçŸ¥.html":{"url":"books/8.4é€šçŸ¥.html","title":"8.4:é€šçŸ¥Notification","keywords":"","body":"8.4 é€šçŸ¥ Widget _body() { return NotificationListener( onNotification: (notification) { switch (notification.runtimeType) { case ScrollStartNotification: print(\"å¼€å§‹æ»šåŠ¨\"); break; case ScrollUpdateNotification: print(\"æ­£åœ¨æ»šåŠ¨\"); break; case ScrollEndNotification: print(\"æ»šåŠ¨åœæ­¢\"); break; case OverscrollNotification: print(\"æ»šåŠ¨åˆ°è¾¹ç•Œ\"); break; } return true; }, child: CupertinoScrollbar( child: SingleChildScrollView( child: Container( height: 2000, width: 400, color: Colors.orange, ), ), ), ); } è¿™ä¸ªä¾‹å­æˆ‘ä»¬ä½¿ç”¨äº†SingleChildScrollView,å½“å‘ç”Ÿæ»šåŠ¨æ—¶ï¼Œå°±ä¼šå‘é€æ»šåŠ¨é€šçŸ¥ScrollStartNotificationï¼Œæ»šåŠ¨é€šçŸ¥æ˜¯ç»§æ‰¿ScrollNotificationç±»ï¼Œä¸åŒçš„é€šçŸ¥åŒ…å«çš„ä¿¡æ¯ä¸ä¸€æ ·çš„ä¿¡æ¯ï¼Œæ¯”å¦‚ScrollUpdateNotificationæœ‰ä¸€ä¸ªscrollDeltaå±æ€§ï¼Œè®°å½•äº†ç§»åŠ¨çš„ä½ç§»ï¼Œå…¶ä»–çš„å¯ä»¥çœ‹å®˜æ–¹æ–‡æ¡£ã€‚ NotificationListenerçš„å±æ€§å¦‚ä¸‹ NotificationListener({ Key key, @required this.child, this.onNotification, }) NotificationListenerç»§æ‰¿äº†StatelessWidgetç±»ï¼Œå¯ä»¥ç›´æ¥åœ¨widgetæ ‘ä¸­ä½¿ç”¨ NotificationListenerå¯ä»¥æŒ‡å®šæ¨¡æ¿å‚æ•°ï¼Œä½†æ˜¯å¿…é¡»ç»§æ‰¿Notification,å½“æ˜¾å¼æŒ‡å®šå‚æ•°ï¼Œé‚£ä¹ˆè¿”å›çš„å‚æ•°åªä¼šæ¥å—è¯¥ç±»å‹çš„å‚æ•°ã€‚ é‚£ä¹ˆæˆ‘ä»¬å°†ä»£ç æ”¹æˆ NotificationListener( ... ...) é‚£ä¹ˆç°åœ¨åªèƒ½æ¥æ”¶æ»šåŠ¨å¼€å§‹çš„é€šçŸ¥äº†ã€‚ onNotificationå›è°ƒä¸ºé€šçŸ¥å¤„ç†å›è°ƒï¼Œç­¾åå¦‚ä¸‹ final NotificationListenerCallback onNotification typedef NotificationListenerCallback = bool Function(T notification); è¿”å›å€¼ä¸ºbool,å½“è¿”å›å€¼ä¸ºtrue,é˜²æ­¢å†’æ³¡ï¼Œå½“false,ç»§ç»­å‘ä¸Šå†’æ³¡ã€‚ Flutterçš„UIæ¡†æ¶å®ç°ä¸­ï¼Œé™¤äº†å¯æ»šåŠ¨åœ¨ç»„ä»¶ç§»åŠ¨ä¼šå‘ç”Ÿé™¤ScrollNotificationä¹‹å¤–ï¼Œè¿˜æœ‰å…¶ä»–çš„ä¸€äº›é€šçŸ¥ï¼Œå¦‚SizeChagneLayoutNotificationã€KeepAliveNotificationã€LayoutNoticationç­‰ï¼Œflutteræ­£å¼é€šè¿‡è¿™ç§é€šçŸ¥æœºåˆ¶ä½¿çˆ¶ç»„ä»¶å¯ä»¥æ‰§è¡Œä¸€äº›ç‰¹å®šçš„äº‹æƒ…ã€‚ è‡ªå®šä¹‰é€šçŸ¥ å®šä¹‰ä¸€ä¸ªç»§æ‰¿Notificationç±» Widget _body2() { return NotificationListener( onNotification: (FyNotification notification) { setState(() { _code = notification.code; }); return false; }, child: Center( child: Column( children: [ Builder( builder: (context) { return OutlineButton( child: Text('å‘é€é€šçŸ¥'), onPressed: () { FyNotification(code: 200).dispatch(context); }, ); }, ), Text('$_code'), ], ), ), ); } } class FyNotification extends Notification { int code; FyNotification({this.code}); } FyNotification(code: 200).dispatch(context) ä¸­çš„contextçš„å­æ ‘çš„contextï¼Œå› ä¸ºæˆ‘ä»¬ç›‘å¬çš„å­æ ‘ï¼Œæ‰€ä»¥éœ€è¦buildæ¥æ„é€ ä¸€ä¸ªå­contextï¼Œå¦åˆ™ç›‘å¬å¤±è´¥ã€‚ æ•ˆæœ; é˜»æ­¢å†’æ³¡ å½“è¿”å›falseï¼Œåˆ™ç»§ç»­å†’æ³¡ï¼Œå½“è¿”å›trueåˆ™åœæ­¢å†’æ³¡ã€‚ ... Widget _body2() { return NotificationListener( onNotification: (notification) { print('æˆ‘æ˜¯å¤–å±‚ç›‘å¬'); return false; }, child: NotificationListener( onNotification: (FyNotification notification) { setState(() { _code = notification.code; }); print('æˆ‘æ˜¯å†…å±‚ç›‘å¬'); return true; }, child: Center( child: Column( children: [ Builder( builder: (context) { return OutlineButton( child: Text('å‘é€é€šçŸ¥'), onPressed: () { FyNotification(code: 200).dispatch(context); }, ); }, ), Text('$_code'), ], ), ), ), ); } å½“é‡Œå±‚è¿”å›trueæ•ˆæœï¼š flutter: æˆ‘æ˜¯å†…å±‚ç›‘å¬ flutter: æˆ‘æ˜¯å†…å±‚ç›‘å¬ flutter: æˆ‘æ˜¯å†…å±‚ç›‘å¬ flutter: æˆ‘æ˜¯å†…å±‚ç›‘å¬ å½“é‡Œå±‚è¿”å›falseæ•ˆæœï¼š flutter: æˆ‘æ˜¯å†…å±‚ç›‘å¬ flutter: æˆ‘æ˜¯å¤–å±‚ç›‘å¬ flutter: æˆ‘æ˜¯å†…å±‚ç›‘å¬ flutter: æˆ‘æ˜¯å¤–å±‚ç›‘å¬ åŸç† ä¸Šè¾¹å·²ç»ä»‹ç»å®Œäº†é€šçŸ¥çš„ä½¿ç”¨å’Œè‡ªå®šä¹‰é€šçŸ¥çš„ä½¿ç”¨ï¼Œæ›´æ·±å…¥äº›ï¼Œäº†è§£ä¸€ä¸‹flutterå¦‚ä½•å®ç°å†’æ³¡çš„åŸç†çš„ï¼Œçœ‹ä¸‹æºç ï¼Œä»å‘é€é€šçŸ¥å‡½æ•°è§¦å‘ï¼Œç„¶åæ·±å…¥äº†è§£ã€‚Notificationçš„dispath(context)æ–¹æ³•çœ‹ä¸‹ï¼Œçœ‹çœ‹åšäº†ä»€ä¹ˆäº‹æƒ… void dispatch(BuildContext target) { target?.visitAncestorElements(visitAncestor); } dispatchè°ƒç”¨äº†å½“å‰çš„contextçš„visitAncestorElements,æ”¹æ–¹æ³•ä»å½“å‰å…ƒç´ éå†å‘çˆ¶çº§å…ƒç´ visitAncestorElementsæœ‰ä¸€ä¸ªéå†å›è°ƒå‚æ•°ï¼Œåœ¨éå†è¿‡ç¨‹ä¸­å¯¹éå†åˆ°çš„çˆ¶çº§å…ƒç´ éƒ½ä¼šæ‰§è¡Œè¯¥å›è°ƒã€‚éå†çš„ç»ˆæ­¢æ¡ä»¶æ˜¯ï¼šå·²ç»éå†åˆ°æ ¹Elementæˆ–æŸä¸ªéå†å›è°ƒè¿”å›falseã€‚æºç ä¸­ä¼ ç»™visitAncestorElementsæ–¹æ³•çš„éå†å›è°ƒä¸ºvisitAncestoræ–¹æ³•ï¼Œæˆ‘ä»¬çœ‹çœ‹visitAncestoræ–¹æ³•çš„å®ç°ï¼š //éå†å›è°ƒï¼Œä¼šå¯¹æ¯ä¸€ä¸ªçˆ¶çº§Elementæ‰§è¡Œæ­¤å›è°ƒ bool visitAncestor(Element element) { //åˆ¤æ–­å½“å‰elementå¯¹åº”çš„Widgetæ˜¯å¦æ˜¯NotificationListenerã€‚ //ç”±äºNotificationListeneræ˜¯ç»§æ‰¿è‡ªStatelessWidgetï¼Œ //æ•…å…ˆåˆ¤æ–­æ˜¯å¦æ˜¯StatelessElement if (element is StatelessElement) { //æ˜¯StatelessElementï¼Œåˆ™è·å–elementå¯¹åº”çš„Widgetï¼Œåˆ¤æ–­ //æ˜¯å¦æ˜¯NotificationListener ã€‚ final StatelessWidget widget = element.widget; if (widget is NotificationListener) { //æ˜¯NotificationListenerï¼Œåˆ™è°ƒç”¨è¯¥NotificationListenerçš„_dispatchæ–¹æ³• if (widget._dispatch(this, element)) return false; } } return true; } visitAncestorä¼šåˆ¤æ–­æ¯ä¸€ä¸ªéå†åˆ°çš„çˆ¶çº§Widgetæ˜¯å¦æ˜¯NotificationListenerï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™è¿”å›trueç»§ç»­å‘ä¸Šéå†ï¼Œå¦‚æœæ˜¯ï¼Œåˆ™è°ƒç”¨NotificationListenerçš„_dispatchæ–¹æ³•ï¼Œæˆ‘ä»¬çœ‹çœ‹_dispatchæ–¹æ³•çš„æºç ï¼š bool _dispatch(Notification notification, Element element) { // å¦‚æœé€šçŸ¥ç›‘å¬å™¨ä¸ä¸ºç©ºï¼Œå¹¶ä¸”å½“å‰é€šçŸ¥ç±»å‹æ˜¯è¯¥NotificationListener // ç›‘å¬çš„é€šçŸ¥ç±»å‹ï¼Œåˆ™è°ƒç”¨å½“å‰NotificationListenerçš„onNotification if (onNotification != null && notification is T) { final bool result = onNotification(notification); // è¿”å›å€¼å†³å®šæ˜¯å¦ç»§ç»­å‘ä¸Šéå† return result == true; } return false; } æˆ‘ä»¬å¯ä»¥çœ‹åˆ°NotificationListenerçš„onNotificationå›è°ƒæœ€ç»ˆæ˜¯åœ¨_dispatchæ–¹æ³•ä¸­æ‰§è¡Œçš„ï¼Œç„¶åä¼šæ ¹æ®è¿”å›å€¼æ¥ç¡®å®šæ˜¯å¦ç»§ç»­å‘ä¸Šå†’æ³¡ã€‚ä¸Šé¢çš„æºç å®ç°å…¶å®å¹¶ä¸å¤æ‚ï¼Œé€šè¿‡é˜…è¯»è¿™äº›æºç ï¼Œä¸€äº›é¢å¤–çš„ç‚¹è¯»è€…å¯ä»¥æ³¨æ„ä¸€ä¸‹ï¼š Contextä¸Šä¹Ÿæä¾›äº†éå†Elementæ ‘çš„æ–¹æ³•ã€‚ æˆ‘ä»¬å¯ä»¥é€šè¿‡Element.widgetå¾—åˆ°elementèŠ‚ç‚¹å¯¹åº”çš„widgetï¼›æˆ‘ä»¬å·²ç»åå¤è®²è¿‡Widgetå’ŒElementçš„å¯¹åº”å…³ç³»ï¼Œè¯»è€…é€šè¿‡è¿™äº›æºç æ¥åŠ æ·±ç†è§£ã€‚ "},"books/9.1åŠ¨ç”».html":{"url":"books/9.1åŠ¨ç”».html","title":"9.1ï¼šFlutteråŠ¨ç”»ç®€ä»‹","keywords":"","body":"7.1 å¯¼èˆªè¿”å›æ‹¦æˆªï¼ˆWillPopScopeï¼‰ å¹³æ—¶ä¸ºé˜²æ­¢ç”¨æˆ·è¿”å›è¯¯è§¦å‘ï¼Œæˆ–è€…ä¸æ„¿æ„ç”¨æˆ·è¿”å›ï¼Œåˆ™å¯ä»¥ç”¨è¿‡WillPopScopeæ¥åˆ¤æ–­æ˜¯å¦å¯ä»¥ç”¨æˆ·è¿”å›ã€‚æˆ‘ä»¬çœ‹ä¸‹å±æ€§ï¼š const WillPopScope({ ... @required WillPopCallback onWillPop, @required Widget child }) onWillPopæ˜¯å›è°ƒå‡½æ•°ï¼Œå½“ç”¨æˆ·ç‚¹å‡»è¿”å›é”®è¢«è°ƒç”¨(åŒ…æ‹¬å¯¼èˆªè¿”å›é”®å’Œandroidç‰©ç†æŒ‰é”®)ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªFutureå¯¹è±¡ï¼Œå¦‚æœè¿”å›false,å½“å‰è·¯ç”±ä¸ä¼špopï¼Œå½“ä¸ºtrue,åˆ™é€€å‡ºå½“å‰è·¯ç”±ã€‚ ä¾‹å­ æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªè¿”å›å¼¹çª—æé†’ç”¨æˆ·ä¸€æ¬¡ï¼Œæ˜¯å¦çœŸçš„ å‡†å¤‡é€€å‡ºäº†ã€‚ç‚¹å‡»æš‚ä¸é€€å‡ºé€€åˆ°å½“å‰è·¯ç”±ï¼Œå¦åˆ™é€€åˆ°é¦–é¡µã€‚ @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar( title: Text('BaseWillPop'), ), body: WillPopScope( child: _body(), onWillPop: () async { //code showDialog( context: context, child: CupertinoAlertDialog( title: Text('æç¤º'), content: Text('çœŸçš„é€€å‡ºå—ï¼Ÿ'), actions: [ FlatButton( child: Text('çœŸçš„ é€€å‡ºäº†'), onPressed: () { Navigator.of(context).popUntil((route) { return route.isFirst; }); }, ), FlatButton( child: Text('æš‚ä¸é€€å‡ºäº†'), onPressed: () { Navigator.maybePop(context); }, ), ], )); return false; }), ); } "},"books/9.2åŠ¨ç”»ç»“æ„.html":{"url":"books/9.2åŠ¨ç”»ç»“æ„.html","title":"9.2ï¼šåŠ¨ç”»ç»“æ„","keywords":"","body":"7.1 å¯¼èˆªè¿”å›æ‹¦æˆªï¼ˆWillPopScopeï¼‰ å¹³æ—¶ä¸ºé˜²æ­¢ç”¨æˆ·è¿”å›è¯¯è§¦å‘ï¼Œæˆ–è€…ä¸æ„¿æ„ç”¨æˆ·è¿”å›ï¼Œåˆ™å¯ä»¥ç”¨è¿‡WillPopScopeæ¥åˆ¤æ–­æ˜¯å¦å¯ä»¥ç”¨æˆ·è¿”å›ã€‚æˆ‘ä»¬çœ‹ä¸‹å±æ€§ï¼š const WillPopScope({ ... @required WillPopCallback onWillPop, @required Widget child }) onWillPopæ˜¯å›è°ƒå‡½æ•°ï¼Œå½“ç”¨æˆ·ç‚¹å‡»è¿”å›é”®è¢«è°ƒç”¨(åŒ…æ‹¬å¯¼èˆªè¿”å›é”®å’Œandroidç‰©ç†æŒ‰é”®)ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªFutureå¯¹è±¡ï¼Œå¦‚æœè¿”å›false,å½“å‰è·¯ç”±ä¸ä¼špopï¼Œå½“ä¸ºtrue,åˆ™é€€å‡ºå½“å‰è·¯ç”±ã€‚ ä¾‹å­ æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªè¿”å›å¼¹çª—æé†’ç”¨æˆ·ä¸€æ¬¡ï¼Œæ˜¯å¦çœŸçš„ å‡†å¤‡é€€å‡ºäº†ã€‚ç‚¹å‡»æš‚ä¸é€€å‡ºé€€åˆ°å½“å‰è·¯ç”±ï¼Œå¦åˆ™é€€åˆ°é¦–é¡µã€‚ @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar( title: Text('BaseWillPop'), ), body: WillPopScope( child: _body(), onWillPop: () async { //code showDialog( context: context, child: CupertinoAlertDialog( title: Text('æç¤º'), content: Text('çœŸçš„é€€å‡ºå—ï¼Ÿ'), actions: [ FlatButton( child: Text('çœŸçš„ é€€å‡ºäº†'), onPressed: () { Navigator.of(context).popUntil((route) { return route.isFirst; }); }, ), FlatButton( child: Text('æš‚ä¸é€€å‡ºäº†'), onPressed: () { Navigator.maybePop(context); }, ), ], )); return false; }), ); } "},"books/9.3è‡ªç”±è·¯ç”±è¿‡åº¦åŠ¨ç”».html":{"url":"books/9.3è‡ªç”±è·¯ç”±è¿‡åº¦åŠ¨ç”».html","title":"9.3ï¼šè‡ªå®šä¹‰è·¯ç”±è¿‡æ¸¡åŠ¨ç”»","keywords":"","body":"7.1 å¯¼èˆªè¿”å›æ‹¦æˆªï¼ˆWillPopScopeï¼‰ å¹³æ—¶ä¸ºé˜²æ­¢ç”¨æˆ·è¿”å›è¯¯è§¦å‘ï¼Œæˆ–è€…ä¸æ„¿æ„ç”¨æˆ·è¿”å›ï¼Œåˆ™å¯ä»¥ç”¨è¿‡WillPopScopeæ¥åˆ¤æ–­æ˜¯å¦å¯ä»¥ç”¨æˆ·è¿”å›ã€‚æˆ‘ä»¬çœ‹ä¸‹å±æ€§ï¼š const WillPopScope({ ... @required WillPopCallback onWillPop, @required Widget child }) onWillPopæ˜¯å›è°ƒå‡½æ•°ï¼Œå½“ç”¨æˆ·ç‚¹å‡»è¿”å›é”®è¢«è°ƒç”¨(åŒ…æ‹¬å¯¼èˆªè¿”å›é”®å’Œandroidç‰©ç†æŒ‰é”®)ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªFutureå¯¹è±¡ï¼Œå¦‚æœè¿”å›false,å½“å‰è·¯ç”±ä¸ä¼špopï¼Œå½“ä¸ºtrue,åˆ™é€€å‡ºå½“å‰è·¯ç”±ã€‚ ä¾‹å­ æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªè¿”å›å¼¹çª—æé†’ç”¨æˆ·ä¸€æ¬¡ï¼Œæ˜¯å¦çœŸçš„ å‡†å¤‡é€€å‡ºäº†ã€‚ç‚¹å‡»æš‚ä¸é€€å‡ºé€€åˆ°å½“å‰è·¯ç”±ï¼Œå¦åˆ™é€€åˆ°é¦–é¡µã€‚ @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar( title: Text('BaseWillPop'), ), body: WillPopScope( child: _body(), onWillPop: () async { //code showDialog( context: context, child: CupertinoAlertDialog( title: Text('æç¤º'), content: Text('çœŸçš„é€€å‡ºå—ï¼Ÿ'), actions: [ FlatButton( child: Text('çœŸçš„ é€€å‡ºäº†'), onPressed: () { Navigator.of(context).popUntil((route) { return route.isFirst; }); }, ), FlatButton( child: Text('æš‚ä¸é€€å‡ºäº†'), onPressed: () { Navigator.maybePop(context); }, ), ], )); return false; }), ); } "},"books/9.4heroåŠ¨ç”».html":{"url":"books/9.4heroåŠ¨ç”».html","title":"9.4ï¼šHeroåŠ¨ç”»","keywords":"","body":"7.1 å¯¼èˆªè¿”å›æ‹¦æˆªï¼ˆWillPopScopeï¼‰ å¹³æ—¶ä¸ºé˜²æ­¢ç”¨æˆ·è¿”å›è¯¯è§¦å‘ï¼Œæˆ–è€…ä¸æ„¿æ„ç”¨æˆ·è¿”å›ï¼Œåˆ™å¯ä»¥ç”¨è¿‡WillPopScopeæ¥åˆ¤æ–­æ˜¯å¦å¯ä»¥ç”¨æˆ·è¿”å›ã€‚æˆ‘ä»¬çœ‹ä¸‹å±æ€§ï¼š const WillPopScope({ ... @required WillPopCallback onWillPop, @required Widget child }) onWillPopæ˜¯å›è°ƒå‡½æ•°ï¼Œå½“ç”¨æˆ·ç‚¹å‡»è¿”å›é”®è¢«è°ƒç”¨(åŒ…æ‹¬å¯¼èˆªè¿”å›é”®å’Œandroidç‰©ç†æŒ‰é”®)ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªFutureå¯¹è±¡ï¼Œå¦‚æœè¿”å›false,å½“å‰è·¯ç”±ä¸ä¼špopï¼Œå½“ä¸ºtrue,åˆ™é€€å‡ºå½“å‰è·¯ç”±ã€‚ ä¾‹å­ æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªè¿”å›å¼¹çª—æé†’ç”¨æˆ·ä¸€æ¬¡ï¼Œæ˜¯å¦çœŸçš„ å‡†å¤‡é€€å‡ºäº†ã€‚ç‚¹å‡»æš‚ä¸é€€å‡ºé€€åˆ°å½“å‰è·¯ç”±ï¼Œå¦åˆ™é€€åˆ°é¦–é¡µã€‚ @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar( title: Text('BaseWillPop'), ), body: WillPopScope( child: _body(), onWillPop: () async { //code showDialog( context: context, child: CupertinoAlertDialog( title: Text('æç¤º'), content: Text('çœŸçš„é€€å‡ºå—ï¼Ÿ'), actions: [ FlatButton( child: Text('çœŸçš„ é€€å‡ºäº†'), onPressed: () { Navigator.of(context).popUntil((route) { return route.isFirst; }); }, ), FlatButton( child: Text('æš‚ä¸é€€å‡ºäº†'), onPressed: () { Navigator.maybePop(context); }, ), ], )); return false; }), ); } "},"books/9.5äº¤ç»‡åŠ¨ç”».html":{"url":"books/9.5äº¤ç»‡åŠ¨ç”».html","title":"9.5ï¼šäº¤ç»‡åŠ¨ç”»","keywords":"","body":"7.1 å¯¼èˆªè¿”å›æ‹¦æˆªï¼ˆWillPopScopeï¼‰ å¹³æ—¶ä¸ºé˜²æ­¢ç”¨æˆ·è¿”å›è¯¯è§¦å‘ï¼Œæˆ–è€…ä¸æ„¿æ„ç”¨æˆ·è¿”å›ï¼Œåˆ™å¯ä»¥ç”¨è¿‡WillPopScopeæ¥åˆ¤æ–­æ˜¯å¦å¯ä»¥ç”¨æˆ·è¿”å›ã€‚æˆ‘ä»¬çœ‹ä¸‹å±æ€§ï¼š const WillPopScope({ ... @required WillPopCallback onWillPop, @required Widget child }) onWillPopæ˜¯å›è°ƒå‡½æ•°ï¼Œå½“ç”¨æˆ·ç‚¹å‡»è¿”å›é”®è¢«è°ƒç”¨(åŒ…æ‹¬å¯¼èˆªè¿”å›é”®å’Œandroidç‰©ç†æŒ‰é”®)ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªFutureå¯¹è±¡ï¼Œå¦‚æœè¿”å›false,å½“å‰è·¯ç”±ä¸ä¼špopï¼Œå½“ä¸ºtrue,åˆ™é€€å‡ºå½“å‰è·¯ç”±ã€‚ ä¾‹å­ æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªè¿”å›å¼¹çª—æé†’ç”¨æˆ·ä¸€æ¬¡ï¼Œæ˜¯å¦çœŸçš„ å‡†å¤‡é€€å‡ºäº†ã€‚ç‚¹å‡»æš‚ä¸é€€å‡ºé€€åˆ°å½“å‰è·¯ç”±ï¼Œå¦åˆ™é€€åˆ°é¦–é¡µã€‚ @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar( title: Text('BaseWillPop'), ), body: WillPopScope( child: _body(), onWillPop: () async { //code showDialog( context: context, child: CupertinoAlertDialog( title: Text('æç¤º'), content: Text('çœŸçš„é€€å‡ºå—ï¼Ÿ'), actions: [ FlatButton( child: Text('çœŸçš„ é€€å‡ºäº†'), onPressed: () { Navigator.of(context).popUntil((route) { return route.isFirst; }); }, ), FlatButton( child: Text('æš‚ä¸é€€å‡ºäº†'), onPressed: () { Navigator.maybePop(context); }, ), ], )); return false; }), ); } "},"books/9.6é€šç”¨åˆ‡æ¢åŠ¨ç”»ç»„ä»¶.html":{"url":"books/9.6é€šç”¨åˆ‡æ¢åŠ¨ç”»ç»„ä»¶.html","title":"9.6ï¼šé€šç”¨â€œåŠ¨ç”»åˆ‡æ¢â€ç»„ä»¶ï¼ˆAnimatedSwitcherï¼‰","keywords":"","body":"7.1 å¯¼èˆªè¿”å›æ‹¦æˆªï¼ˆWillPopScopeï¼‰ å¹³æ—¶ä¸ºé˜²æ­¢ç”¨æˆ·è¿”å›è¯¯è§¦å‘ï¼Œæˆ–è€…ä¸æ„¿æ„ç”¨æˆ·è¿”å›ï¼Œåˆ™å¯ä»¥ç”¨è¿‡WillPopScopeæ¥åˆ¤æ–­æ˜¯å¦å¯ä»¥ç”¨æˆ·è¿”å›ã€‚æˆ‘ä»¬çœ‹ä¸‹å±æ€§ï¼š const WillPopScope({ ... @required WillPopCallback onWillPop, @required Widget child }) onWillPopæ˜¯å›è°ƒå‡½æ•°ï¼Œå½“ç”¨æˆ·ç‚¹å‡»è¿”å›é”®è¢«è°ƒç”¨(åŒ…æ‹¬å¯¼èˆªè¿”å›é”®å’Œandroidç‰©ç†æŒ‰é”®)ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªFutureå¯¹è±¡ï¼Œå¦‚æœè¿”å›false,å½“å‰è·¯ç”±ä¸ä¼špopï¼Œå½“ä¸ºtrue,åˆ™é€€å‡ºå½“å‰è·¯ç”±ã€‚ ä¾‹å­ æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªè¿”å›å¼¹çª—æé†’ç”¨æˆ·ä¸€æ¬¡ï¼Œæ˜¯å¦çœŸçš„ å‡†å¤‡é€€å‡ºäº†ã€‚ç‚¹å‡»æš‚ä¸é€€å‡ºé€€åˆ°å½“å‰è·¯ç”±ï¼Œå¦åˆ™é€€åˆ°é¦–é¡µã€‚ @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar( title: Text('BaseWillPop'), ), body: WillPopScope( child: _body(), onWillPop: () async { //code showDialog( context: context, child: CupertinoAlertDialog( title: Text('æç¤º'), content: Text('çœŸçš„é€€å‡ºå—ï¼Ÿ'), actions: [ FlatButton( child: Text('çœŸçš„ é€€å‡ºäº†'), onPressed: () { Navigator.of(context).popUntil((route) { return route.isFirst; }); }, ), FlatButton( child: Text('æš‚ä¸é€€å‡ºäº†'), onPressed: () { Navigator.maybePop(context); }, ), ], )); return false; }), ); } "},"books/9.7åŠ¨ç”»å¤šåº¦ç»„ä»¶.html":{"url":"books/9.7åŠ¨ç”»å¤šåº¦ç»„ä»¶.html","title":"9.7ï¼šåŠ¨ç”»è¿‡æ¸¡ç»„ä»¶","keywords":"","body":"7.1 å¯¼èˆªè¿”å›æ‹¦æˆªï¼ˆWillPopScopeï¼‰ å¹³æ—¶ä¸ºé˜²æ­¢ç”¨æˆ·è¿”å›è¯¯è§¦å‘ï¼Œæˆ–è€…ä¸æ„¿æ„ç”¨æˆ·è¿”å›ï¼Œåˆ™å¯ä»¥ç”¨è¿‡WillPopScopeæ¥åˆ¤æ–­æ˜¯å¦å¯ä»¥ç”¨æˆ·è¿”å›ã€‚æˆ‘ä»¬çœ‹ä¸‹å±æ€§ï¼š const WillPopScope({ ... @required WillPopCallback onWillPop, @required Widget child }) onWillPopæ˜¯å›è°ƒå‡½æ•°ï¼Œå½“ç”¨æˆ·ç‚¹å‡»è¿”å›é”®è¢«è°ƒç”¨(åŒ…æ‹¬å¯¼èˆªè¿”å›é”®å’Œandroidç‰©ç†æŒ‰é”®)ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ªFutureå¯¹è±¡ï¼Œå¦‚æœè¿”å›false,å½“å‰è·¯ç”±ä¸ä¼špopï¼Œå½“ä¸ºtrue,åˆ™é€€å‡ºå½“å‰è·¯ç”±ã€‚ ä¾‹å­ æˆ‘ä»¬å®ç°äº†ä¸€ä¸ªè¿”å›å¼¹çª—æé†’ç”¨æˆ·ä¸€æ¬¡ï¼Œæ˜¯å¦çœŸçš„ å‡†å¤‡é€€å‡ºäº†ã€‚ç‚¹å‡»æš‚ä¸é€€å‡ºé€€åˆ°å½“å‰è·¯ç”±ï¼Œå¦åˆ™é€€åˆ°é¦–é¡µã€‚ @override Widget build(BuildContext context) { return Scaffold( appBar: AppBar( title: Text('BaseWillPop'), ), body: WillPopScope( child: _body(), onWillPop: () async { //code showDialog( context: context, child: CupertinoAlertDialog( title: Text('æç¤º'), content: Text('çœŸçš„é€€å‡ºå—ï¼Ÿ'), actions: [ FlatButton( child: Text('çœŸçš„ é€€å‡ºäº†'), onPressed: () { Navigator.of(context).popUntil((route) { return route.isFirst; }); }, ), FlatButton( child: Text('æš‚ä¸é€€å‡ºäº†'), onPressed: () { Navigator.maybePop(context); }, ), ], )); return false; }), ); } "},"books/15.1addlivetem.html":{"url":"books/15.1addlivetem.html","title":"15.1:Flutter æ·»åŠ æ´»æ¨¡æ¿","keywords":"","body":"5.7 æ·»åŠ æ´»æ€§æ¨¡æ¿ æ¯æ¬¡æ–°å»ºç±»æ€»æ˜¯éœ€è¦è‡ªå·±å•ç‹¬å†™ä¸€å¥—ç»§æ‰¿StateFulWidget,ç°åœ¨æ·»åŠ ä¸€ä¸ªæ´»æ¨¡æ¿(æš‚æ—¶ä¸çŸ¥é“æ€ä¹ˆå«æ‰å¥½)ï¼Œè¾¾åˆ°ä¸‹è¾¹çš„æ•ˆæœï¼š å¦‚ä½•æ·»åŠ  è¿›å…¥è®¾ç½®ç•Œé¢Preferences->Edie->Live Templates æ·»åŠ åˆ›å»ºæ–‡ä»¶æ¨¡æ¿ "}}